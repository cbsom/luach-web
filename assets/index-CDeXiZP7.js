(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function SS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ap={exports:{}},nc={};var e2;function P4(){if(e2)return nc;e2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:i,type:a,key:c,ref:s!==void 0?s:null,props:l}}return nc.Fragment=e,nc.jsx=t,nc.jsxs=t,nc}var t2;function L4(){return t2||(t2=1,ap.exports=P4()),ap.exports}var T=L4(),ip={exports:{}},Ge={};var n2;function B4(){if(n2)return Ge;n2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),D=Symbol.iterator;function k(M){return M===null||typeof M!="object"?null:(M=D&&M[D]||M["@@iterator"],typeof M=="function"?M:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function W(M,Z,ue){this.props=M,this.context=Z,this.refs=$,this.updater=ue||H}W.prototype.isReactComponent={},W.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},W.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function le(){}le.prototype=W.prototype;function Q(M,Z,ue){this.props=M,this.context=Z,this.refs=$,this.updater=ue||H}var fe=Q.prototype=new le;fe.constructor=Q,q(fe,W.prototype),fe.isPureReactComponent=!0;var he=Array.isArray;function ne(){}var A={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function z(M,Z,ue){var ye=ue.ref;return{$$typeof:i,type:M,key:Z,ref:ye!==void 0?ye:null,props:ue}}function C(M,Z){return z(M.type,Z,M.props)}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function O(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return Z[ue]})}var R=/\/+/g;function xe(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):Z.toString(36)}function We(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ne,ne):(M.status="pending",M.then(function(Z){M.status==="pending"&&(M.status="fulfilled",M.value=Z)},function(Z){M.status==="pending"&&(M.status="rejected",M.reason=Z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function L(M,Z,ue,ye,Ve){var Ne=typeof M;(Ne==="undefined"||Ne==="boolean")&&(M=null);var Ye=!1;if(M===null)Ye=!0;else switch(Ne){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(M.$$typeof){case i:case e:Ye=!0;break;case v:return Ye=M._init,L(Ye(M._payload),Z,ue,ye,Ve)}}if(Ye)return Ve=Ve(M),Ye=ye===""?"."+xe(M,0):ye,he(Ve)?(ue="",Ye!=null&&(ue=Ye.replace(R,"$&/")+"/"),L(Ve,Z,ue,"",function(Oa){return Oa})):Ve!=null&&(N(Ve)&&(Ve=C(Ve,ue+(Ve.key==null||M&&M.key===Ve.key?"":(""+Ve.key).replace(R,"$&/")+"/")+Ye)),Z.push(Ve)),1;Ye=0;var Lt=ye===""?".":ye+":";if(he(M))for(var Dt=0;Dt<M.length;Dt++)ye=M[Dt],Ne=Lt+xe(ye,Dt),Ye+=L(ye,Z,ue,Ne,Ve);else if(Dt=k(M),typeof Dt=="function")for(M=Dt.call(M),Dt=0;!(ye=M.next()).done;)ye=ye.value,Ne=Lt+xe(ye,Dt++),Ye+=L(ye,Z,ue,Ne,Ve);else if(Ne==="object"){if(typeof M.then=="function")return L(We(M),Z,ue,ye,Ve);throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function re(M,Z,ue){if(M==null)return M;var ye=[],Ve=0;return L(M,ye,"","",function(Ne){return Z.call(ue,Ne,Ve++)}),ye}function de(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var je=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ee={map:re,forEach:function(M,Z,ue){re(M,function(){Z.apply(this,arguments)},ue)},count:function(M){var Z=0;return re(M,function(){Z++}),Z},toArray:function(M){return re(M,function(Z){return Z})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ge.Activity=S,Ge.Children=Ee,Ge.Component=W,Ge.Fragment=t,Ge.Profiler=s,Ge.PureComponent=Q,Ge.StrictMode=a,Ge.Suspense=m,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(M){return A.H.useMemoCache(M)}},Ge.cache=function(M){return function(){return M.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(M,Z,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ye=q({},M.props),Ve=M.key;if(Z!=null)for(Ne in Z.key!==void 0&&(Ve=""+Z.key),Z)!I.call(Z,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&Z.ref===void 0||(ye[Ne]=Z[Ne]);var Ne=arguments.length-2;if(Ne===1)ye.children=ue;else if(1<Ne){for(var Ye=Array(Ne),Lt=0;Lt<Ne;Lt++)Ye[Lt]=arguments[Lt+2];ye.children=Ye}return z(M.type,Ve,ye)},Ge.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ge.createElement=function(M,Z,ue){var ye,Ve={},Ne=null;if(Z!=null)for(ye in Z.key!==void 0&&(Ne=""+Z.key),Z)I.call(Z,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Ve[ye]=Z[ye]);var Ye=arguments.length-2;if(Ye===1)Ve.children=ue;else if(1<Ye){for(var Lt=Array(Ye),Dt=0;Dt<Ye;Dt++)Lt[Dt]=arguments[Dt+2];Ve.children=Lt}if(M&&M.defaultProps)for(ye in Ye=M.defaultProps,Ye)Ve[ye]===void 0&&(Ve[ye]=Ye[ye]);return z(M,Ne,Ve)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(M){return{$$typeof:d,render:M}},Ge.isValidElement=N,Ge.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:de}},Ge.memo=function(M,Z){return{$$typeof:p,type:M,compare:Z===void 0?null:Z}},Ge.startTransition=function(M){var Z=A.T,ue={};A.T=ue;try{var ye=M(),Ve=A.S;Ve!==null&&Ve(ue,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(ne,je)}catch(Ne){je(Ne)}finally{Z!==null&&ue.types!==null&&(Z.types=ue.types),A.T=Z}},Ge.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ge.use=function(M){return A.H.use(M)},Ge.useActionState=function(M,Z,ue){return A.H.useActionState(M,Z,ue)},Ge.useCallback=function(M,Z){return A.H.useCallback(M,Z)},Ge.useContext=function(M){return A.H.useContext(M)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(M,Z){return A.H.useDeferredValue(M,Z)},Ge.useEffect=function(M,Z){return A.H.useEffect(M,Z)},Ge.useEffectEvent=function(M){return A.H.useEffectEvent(M)},Ge.useId=function(){return A.H.useId()},Ge.useImperativeHandle=function(M,Z,ue){return A.H.useImperativeHandle(M,Z,ue)},Ge.useInsertionEffect=function(M,Z){return A.H.useInsertionEffect(M,Z)},Ge.useLayoutEffect=function(M,Z){return A.H.useLayoutEffect(M,Z)},Ge.useMemo=function(M,Z){return A.H.useMemo(M,Z)},Ge.useOptimistic=function(M,Z){return A.H.useOptimistic(M,Z)},Ge.useReducer=function(M,Z,ue){return A.H.useReducer(M,Z,ue)},Ge.useRef=function(M){return A.H.useRef(M)},Ge.useState=function(M){return A.H.useState(M)},Ge.useSyncExternalStore=function(M,Z,ue){return A.H.useSyncExternalStore(M,Z,ue)},Ge.useTransition=function(){return A.H.useTransition()},Ge.version="19.2.3",Ge}var a2;function b1(){return a2||(a2=1,ip.exports=B4()),ip.exports}var _e=b1();const Il=SS(_e);var rp={exports:{}},ac={},sp={exports:{}},op={};var i2;function j4(){return i2||(i2=1,(function(i){function e(L,re){var de=L.length;L.push(re);e:for(;0<de;){var je=de-1>>>1,Ee=L[je];if(0<s(Ee,re))L[je]=re,L[de]=Ee,de=je;else break e}}function t(L){return L.length===0?null:L[0]}function a(L){if(L.length===0)return null;var re=L[0],de=L.pop();if(de!==re){L[0]=de;e:for(var je=0,Ee=L.length,M=Ee>>>1;je<M;){var Z=2*(je+1)-1,ue=L[Z],ye=Z+1,Ve=L[ye];if(0>s(ue,de))ye<Ee&&0>s(Ve,ue)?(L[je]=Ve,L[ye]=de,je=ye):(L[je]=ue,L[Z]=de,je=Z);else if(ye<Ee&&0>s(Ve,de))L[je]=Ve,L[ye]=de,je=ye;else break e}}return re}function s(L,re){var de=L.sortIndex-re.sortIndex;return de!==0?de:L.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var m=[],p=[],v=1,S=null,D=3,k=!1,H=!1,q=!1,$=!1,W=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function fe(L){for(var re=t(p);re!==null;){if(re.callback===null)a(p);else if(re.startTime<=L)a(p),re.sortIndex=re.expirationTime,e(m,re);else break;re=t(p)}}function he(L){if(q=!1,fe(L),!H)if(t(m)!==null)H=!0,ne||(ne=!0,O());else{var re=t(p);re!==null&&We(he,re.startTime-L)}}var ne=!1,A=-1,I=5,z=-1;function C(){return $?!0:!(i.unstable_now()-z<I)}function N(){if($=!1,ne){var L=i.unstable_now();z=L;var re=!0;try{e:{H=!1,q&&(q=!1,le(A),A=-1),k=!0;var de=D;try{t:{for(fe(L),S=t(m);S!==null&&!(S.expirationTime>L&&C());){var je=S.callback;if(typeof je=="function"){S.callback=null,D=S.priorityLevel;var Ee=je(S.expirationTime<=L);if(L=i.unstable_now(),typeof Ee=="function"){S.callback=Ee,fe(L),re=!0;break t}S===t(m)&&a(m),fe(L)}else a(m);S=t(m)}if(S!==null)re=!0;else{var M=t(p);M!==null&&We(he,M.startTime-L),re=!1}}break e}finally{S=null,D=de,k=!1}re=void 0}}finally{re?O():ne=!1}}}var O;if(typeof Q=="function")O=function(){Q(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,xe=R.port2;R.port1.onmessage=N,O=function(){xe.postMessage(null)}}else O=function(){W(N,0)};function We(L,re){A=W(function(){L(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(L){L.callback=null},i.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_next=function(L){switch(D){case 1:case 2:case 3:var re=3;break;default:re=D}var de=D;D=re;try{return L()}finally{D=de}},i.unstable_requestPaint=function(){$=!0},i.unstable_runWithPriority=function(L,re){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var de=D;D=L;try{return re()}finally{D=de}},i.unstable_scheduleCallback=function(L,re,de){var je=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?je+de:je):de=je,L){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=de+Ee,L={id:v++,callback:re,priorityLevel:L,startTime:de,expirationTime:Ee,sortIndex:-1},de>je?(L.sortIndex=de,e(p,L),t(m)===null&&L===t(p)&&(q?(le(A),A=-1):q=!0,We(he,de-je))):(L.sortIndex=Ee,e(m,L),H||k||(H=!0,ne||(ne=!0,O()))),L},i.unstable_shouldYield=C,i.unstable_wrapCallback=function(L){var re=D;return function(){var de=D;D=re;try{return L.apply(this,arguments)}finally{D=de}}}})(op)),op}var r2;function U4(){return r2||(r2=1,sp.exports=j4()),sp.exports}var lp={exports:{}},Rn={};var s2;function H4(){if(s2)return Rn;s2=1;var i=b1();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,p,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:S==null?null:""+S,children:m,containerInfo:p,implementation:v}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Rn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},Rn.flushSync=function(m){var p=c.T,v=a.p;try{if(c.T=null,a.p=2,m)return m()}finally{c.T=p,a.p=v,a.d.f()}},Rn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(m,p))},Rn.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Rn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,S=d(v,p.crossOrigin),D=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?a.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:D,fetchPriority:k}):v==="script"&&a.d.X(m,{crossOrigin:S,integrity:D,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Rn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);a.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(m)},Rn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,S=d(v,p.crossOrigin);a.d.L(m,v,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Rn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);a.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(m)},Rn.requestFormReset=function(m){a.d.r(m)},Rn.unstable_batchedUpdates=function(m,p){return m(p)},Rn.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},Rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Rn.version="19.2.3",Rn}var o2;function F4(){if(o2)return lp.exports;o2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lp.exports=H4(),lp.exports}var l2;function Y4(){if(l2)return ac;l2=1;var i=U4(),e=b1(),t=F4();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(a(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(a(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return m(f),n;if(g===u)return m(f),r;g=g.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=g;else{for(var _=!1,E=f.child;E;){if(E===o){_=!0,o=f,u=g;break}if(E===u){_=!0,u=f,o=g;break}E=E.sibling}if(!_){for(E=g.child;E;){if(E===o){_=!0,o=g,u=f;break}if(E===u){_=!0,u=g,o=f;break}E=E.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var S=Object.assign,D=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function xe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case W:return"Profiler";case $:return"StrictMode";case he:return"Suspense";case ne:return"SuspenseList";case z:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case H:return"Portal";case Q:return n.displayName||"Context";case le:return(n._context.displayName||"Context")+".Consumer";case fe:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return r=n.displayName||null,r!==null?r:xe(n.type)||"Memo";case I:r=n._payload,n=n._init;try{return xe(n(r))}catch{}}return null}var We=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},je=[],Ee=-1;function M(n){return{current:n}}function Z(n){0>Ee||(n.current=je[Ee],je[Ee]=null,Ee--)}function ue(n,r){Ee++,je[Ee]=n.current,n.current=r}var ye=M(null),Ve=M(null),Ne=M(null),Ye=M(null);function Lt(n,r){switch(ue(Ne,r),ue(Ve,n),ue(ye,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Ev(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Ev(r),n=Av(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(ye),ue(ye,n)}function Dt(){Z(ye),Z(Ve),Z(Ne)}function Oa(n){n.memoizedState!==null&&ue(Ye,n);var r=ye.current,o=Av(r,n.type);r!==o&&(ue(Ve,n),ue(ye,o))}function wi(n){Ve.current===n&&(Z(ye),Z(Ve)),Ye.current===n&&(Z(Ye),Wu._currentValue=de)}var Wa,Ii;function Un(n){if(Wa===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Wa=r&&r[1]||"",Ii=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wa+n+Ii}var or=!1;function Va(n,r){if(!n||or)return"";or=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var G=J}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(J){G=J}n.call(ie.prototype)}}else{try{throw Error()}catch(J){G=J}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&G&&typeof J.stack=="string")return[J.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),_=g[0],E=g[1];if(_&&E){var x=_.split(`
`),Y=E.split(`
`);for(f=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(u===x.length||f===Y.length)for(u=x.length-1,f=Y.length-1;1<=u&&0<=f&&x[u]!==Y[f];)f--;for(;1<=u&&0<=f;u--,f--)if(x[u]!==Y[f]){if(u!==1||f!==1)do if(u--,f--,0>f||x[u]!==Y[f]){var ee=`
`+x[u].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=u&&0<=f);break}}}finally{or=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Un(o):""}function Di(n,r){switch(n.tag){case 26:case 27:case 5:return Un(n.type);case 16:return Un("Lazy");case 13:return n.child!==r&&r!==null?Un("Suspense Fallback"):Un("Suspense");case 19:return Un("SuspenseList");case 0:case 15:return Va(n.type,!1);case 11:return Va(n.type.render,!1);case 1:return Va(n.type,!0);case 31:return Un("Activity");default:return""}}function ya(n){try{var r="",o=null;do r+=Di(n,o),o=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var xt=Object.prototype.hasOwnProperty,Bt=i.unstable_scheduleCallback,Za=i.unstable_cancelCallback,lr=i.unstable_shouldYield,ys=i.unstable_requestPaint,Kt=i.unstable_now,ei=i.unstable_getCurrentPriorityLevel,ur=i.unstable_ImmediatePriority,cr=i.unstable_UserBlockingPriority,Pa=i.unstable_NormalPriority,To=i.unstable_LowPriority,_s=i.unstable_IdlePriority,vs=i.log,bs=i.unstable_setDisableYieldValue,ta=null,tn=null;function Hn(n){if(typeof vs=="function"&&bs(n),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(ta,n)}catch{}}var kt=Math.clz32?Math.clz32:fr,lu=Math.log,hr=Math.LN2;function fr(n){return n>>>=0,n===0?32:31-(lu(n)/hr|0)|0}var na=256,_a=262144,Ht=4194304;function Fn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Yn(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~g,u!==0?f=Fn(u):(_&=E,_!==0?f=Fn(_):o||(o=E&~n,o!==0&&(f=Fn(o))))):(E=u&~g,E!==0?f=Fn(E):_!==0?f=Fn(_):o||(o=u&~n,o!==0&&(f=Fn(o)))),f===0?0:r!==0&&r!==f&&(r&g)===0&&(g=f&-f,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:f}function zn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Eo(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ao(){var n=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),n}function va(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function ba(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ss(n,r,o,u,f,g){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,x=n.expirationTimes,Y=n.hiddenUpdates;for(o=_&~o;0<o;){var ee=31-kt(o),ie=1<<ee;E[ee]=0,x[ee]=-1;var G=Y[ee];if(G!==null)for(Y[ee]=null,ee=0;ee<G.length;ee++){var J=G[ee];J!==null&&(J.lane&=-536870913)}o&=~ie}u!==0&&aa(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(_&~r))}function aa(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-kt(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function La(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-kt(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function Ts(n,r){var o=r&-r;return o=(o&42)!==0?1:zi(o),(o&(n.suspendedLanes|r))!==0?0:o}function zi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ba(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function wo(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:Kv(n.type))}function Vn(n,r){var o=re.p;try{return re.p=n,r()}finally{re.p=o}}var Pn=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Pn,Qt="__reactProps$"+Pn,Sa="__reactContainer$"+Pn,dr="__reactEvents$"+Pn,uu="__reactListeners$"+Pn,Io="__reactHandles$"+Pn,Do="__reactResources$"+Pn,X="__reactMarker$"+Pn;function be(n){delete n[Ft],delete n[Qt],delete n[dr],delete n[uu],delete n[Io]}function ce(n){var r=n[Ft];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Sa]||o[Ft]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=Nv(n);n!==null;){if(o=n[Ft])return o;n=Nv(n)}return r}n=o,o=n.parentNode}return null}function Me(n){if(n=n[Ft]||n[Sa]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Se(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function qe(n){var r=n[Do];return r||(r=n[Do]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ot(n){n[X]=!0}var gt=new Set,jt={};function Tt(n,r){rt(n,r),rt(n+"Capture",r)}function rt(n,r){for(jt[n]=r,n=0;n<r.length;n++)gt.add(r[n])}var ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jt={},Ri={};function fh(n){return xt.call(Ri,n)?!0:xt.call(Jt,n)?!1:ht.test(n)?Ri[n]=!0:(Jt[n]=!0,!1)}function zo(n,r,o){if(fh(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function ia(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function nn(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}function yn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function cu(n,r,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,g.call(this,_)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function pt(n){if(!n._valueTracker){var r=mr(n)?"checked":"value";n._valueTracker=cu(n,r,""+n[r])}}function Es(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=mr(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function ti(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var As=/[\n"\\]/g;function qn(n){return n.replace(As,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ro(n,r,o,u,f,g,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+yn(r)):n.value!==""+yn(r)&&(n.value=""+yn(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?hu(n,_,yn(r)):o!=null?hu(n,_,yn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+yn(E):n.removeAttribute("name")}function dh(n,r,o,u,f,g,_,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){pt(n);return}o=o!=null?""+yn(o):"",r=r!=null?""+yn(r):o,E||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),pt(n)}function hu(n,r,o){r==="number"&&ti(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function gr(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+yn(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function mh(n,r,o){if(r!=null&&(r=""+yn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+yn(o):""}function pr(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(a(92));if(We(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=yn(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),pt(n)}function Gn(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var gh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fu(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||gh.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function du(n,r,o){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&fu(n,f,u)}else for(var g in r)r.hasOwnProperty(g)&&fu(n,g,r[g])}function Co(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(n){return yr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ja(){}var mu=null;function Ta(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _r=null,ni=null;function ws(n){var r=Me(n);if(r&&(n=r.stateNode)){var o=n[Qt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Ro(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+qn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[Qt]||null;if(!f)throw Error(a(90));Ro(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&Es(u)}break e;case"textarea":mh(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&gr(n,!!o.multiple,r,!1)}}}var Mo=!1;function vr(n,r,o){if(Mo)return n(r,o);Mo=!0;try{var u=n(r);return u}finally{if(Mo=!1,(_r!==null||ni!==null)&&(cf(),_r&&(r=_r,n=ni,ni=_r=null,ws(r),n)))for(r=0;r<n.length;r++)ws(n[r])}}function Ua(n,r){var o=n.stateNode;if(o===null)return null;var u=o[Qt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Is=!1;if(Ea)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){Is=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{Is=!1}var ai=null,gu=null,Ds=null;function pu(){if(Ds)return Ds;var n,r=gu,o=r.length,u,f="value"in ai?ai.value:ai.textContent,g=f.length;for(n=0;n<o&&r[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&r[o-u]===f[g-u];u++);return Ds=f.slice(n,1<u?1-u:void 0)}function zs(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ci(){return!0}function Ha(){return!1}function Sn(n){function r(o,u,f,g,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ci:Ha,this.isPropagationStopped=Ha,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),r}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ii=Sn(Ni),br=S({},Ni,{view:0,detail:0}),yu=Sn(br),Sr,xo,ri,ko=S({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ri&&(ri&&n.type==="mousemove"?(Sr=n.screenX-ri.screenX,xo=n.screenY-ri.screenY):xo=Sr=0,ri=n),Sr)},movementY:function(n){return"movementY"in n?n.movementY:xo}}),_u=Sn(ko),Rs=S({},ko,{dataTransfer:0}),yh=Sn(Rs),_h=S({},br,{relatedTarget:0}),Cs=Sn(_h),vu=S({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=Sn(vu),Oo=S({},Ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bh=Sn(Oo),Sh=S({},Ni,{data:0}),si=Sn(Sh),Th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wh(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Ah[n])?!!r[n]:!1}function Tr(){return wh}var Ln=S({},br,{key:function(n){if(n.key){var r=Th[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Eh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(n){return n.type==="keypress"?zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ih=Sn(Ln),Dh=S({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mi=Sn(Dh),h=S({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr}),y=Sn(h),b=S({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Sn(b),U=S({},ko,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Sn(U),ge=S({},Ni,{newState:0,oldState:0}),Ke=Sn(ge),$t=[9,13,27,32],ft=Ea&&"CompositionEvent"in window,Ot=null;Ea&&"documentMode"in document&&(Ot=document.documentMode);var Aa=Ea&&"TextEvent"in window&&!Ot,oi=Ea&&(!ft||Ot&&8<Ot&&11>=Ot),Fa=" ",Ya=!1;function Ns(n,r){switch(n){case"keyup":return $t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Po=!1;function o3(n,r){switch(n){case"compositionend":return Vo(r);case"keypress":return r.which!==32?null:(Ya=!0,Fa);case"textInput":return n=r.data,n===Fa&&Ya?null:n;default:return null}}function l3(n,r){if(Po)return n==="compositionend"||!ft&&Ns(n,r)?(n=pu(),Ds=gu=ai=null,Po=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return oi&&r.locale!=="ko"?null:r.data;default:return null}}var u3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ky(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!u3[n.type]:r==="textarea"}function Oy(n,r,o,u){_r?ni?ni.push(u):ni=[u]:_r=u,r=yf(r,"onChange"),0<r.length&&(o=new ii("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var bu=null,Su=null;function c3(n){yv(n,0)}function zh(n){var r=Se(n);if(Es(r))return n}function Vy(n,r){if(n==="change")return r}var Py=!1;if(Ea){var cm;if(Ea){var hm="oninput"in document;if(!hm){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),hm=typeof Ly.oninput=="function"}cm=hm}else cm=!1;Py=cm&&(!document.documentMode||9<document.documentMode)}function By(){bu&&(bu.detachEvent("onpropertychange",jy),Su=bu=null)}function jy(n){if(n.propertyName==="value"&&zh(Su)){var r=[];Oy(r,Su,n,Ta(n)),vr(c3,r)}}function h3(n,r,o){n==="focusin"?(By(),bu=r,Su=o,bu.attachEvent("onpropertychange",jy)):n==="focusout"&&By()}function f3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zh(Su)}function d3(n,r){if(n==="click")return zh(r)}function m3(n,r){if(n==="input"||n==="change")return zh(r)}function g3(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var ra=typeof Object.is=="function"?Object.is:g3;function Tu(n,r){if(ra(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!xt.call(r,f)||!ra(n[f],r[f]))return!1}return!0}function Uy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hy(n,r){var o=Uy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Uy(o)}}function Fy(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Fy(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Yy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ti(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=ti(n.document)}return r}function fm(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var p3=Ea&&"documentMode"in document&&11>=document.documentMode,Lo=null,dm=null,Eu=null,mm=!1;function qy(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;mm||Lo==null||Lo!==ti(u)||(u=Lo,"selectionStart"in u&&fm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Eu&&Tu(Eu,u)||(Eu=u,u=yf(dm,"onSelect"),0<u.length&&(r=new ii("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Lo)))}function Ms(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Bo={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},gm={},Gy={};Ea&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function xs(n){if(gm[n])return gm[n];if(!Bo[n])return n;var r=Bo[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Gy)return gm[n]=r[o];return n}var Ky=xs("animationend"),Qy=xs("animationiteration"),Jy=xs("animationstart"),y3=xs("transitionrun"),_3=xs("transitionstart"),v3=xs("transitioncancel"),$y=xs("transitionend"),Xy=new Map,pm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pm.push("scrollEnd");function qa(n,r){Xy.set(n,r),Tt(r,[n])}var Rh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},wa=[],jo=0,ym=0;function Ch(){for(var n=jo,r=ym=jo=0;r<n;){var o=wa[r];wa[r++]=null;var u=wa[r];wa[r++]=null;var f=wa[r];wa[r++]=null;var g=wa[r];if(wa[r++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}g!==0&&Wy(o,f,g)}}function Nh(n,r,o,u){wa[jo++]=n,wa[jo++]=r,wa[jo++]=o,wa[jo++]=u,ym|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function _m(n,r,o,u){return Nh(n,r,o,u),Mh(n)}function ks(n,r){return Nh(n,null,null,r),Mh(n)}function Wy(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&r!==null&&(f=31-kt(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[r]:u.push(r),r.lane=o|536870912),g):null}function Mh(n){if(50<qu)throw qu=0,Dg=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Uo={};function b3(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(n,r,o,u){return new b3(n,r,o,u)}function vm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xi(n,r){var o=n.alternate;return o===null?(o=sa(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Zy(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function xh(n,r,o,u,f,g){var _=0;if(u=n,typeof n=="function")vm(n)&&(_=1);else if(typeof n=="string")_=w4(n,o,ye.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case z:return n=sa(31,o,r,f),n.elementType=z,n.lanes=g,n;case q:return Os(o.children,f,g,r);case $:_=8,f|=24;break;case W:return n=sa(12,o,r,f|2),n.elementType=W,n.lanes=g,n;case he:return n=sa(13,o,r,f),n.elementType=he,n.lanes=g,n;case ne:return n=sa(19,o,r,f),n.elementType=ne,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:_=10;break e;case le:_=9;break e;case fe:_=11;break e;case A:_=14;break e;case I:_=16,u=null;break e}_=29,o=Error(a(130,n===null?"null":typeof n,"")),u=null}return r=sa(_,o,r,f),r.elementType=n,r.type=u,r.lanes=g,r}function Os(n,r,o,u){return n=sa(7,n,u,r),n.lanes=o,n}function bm(n,r,o){return n=sa(6,n,null,r),n.lanes=o,n}function e0(n){var r=sa(18,null,null,0);return r.stateNode=n,r}function Sm(n,r,o){return r=sa(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var t0=new WeakMap;function Ia(n,r){if(typeof n=="object"&&n!==null){var o=t0.get(n);return o!==void 0?o:(r={value:n,source:r,stack:ya(r)},t0.set(n,r),r)}return{value:n,source:r,stack:ya(r)}}var Ho=[],Fo=0,kh=null,Au=0,Da=[],za=0,Er=null,li=1,ui="";function ki(n,r){Ho[Fo++]=Au,Ho[Fo++]=kh,kh=n,Au=r}function n0(n,r,o){Da[za++]=li,Da[za++]=ui,Da[za++]=Er,Er=n;var u=li;n=ui;var f=32-kt(u)-1;u&=~(1<<f),o+=1;var g=32-kt(r)+f;if(30<g){var _=f-f%5;g=(u&(1<<_)-1).toString(32),u>>=_,f-=_,li=1<<32-kt(r)+f|o<<f|u,ui=g+n}else li=1<<g|o<<f|u,ui=n}function Tm(n){n.return!==null&&(ki(n,1),n0(n,1,0))}function Em(n){for(;n===kh;)kh=Ho[--Fo],Ho[Fo]=null,Au=Ho[--Fo],Ho[Fo]=null;for(;n===Er;)Er=Da[--za],Da[za]=null,ui=Da[--za],Da[za]=null,li=Da[--za],Da[za]=null}function a0(n,r){Da[za++]=li,Da[za++]=ui,Da[za++]=Er,li=r.id,ui=r.overflow,Er=n}var Tn=null,Ct=null,st=!1,Ar=null,Ra=!1,Am=Error(a(519));function wr(n){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wu(Ia(r,n)),Am}function i0(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[Ft]=n,r[Qt]=u,o){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(o=0;o<Ku.length;o++)et(Ku[o],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":et("invalid",r),dh(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":et("invalid",r);break;case"textarea":et("invalid",r),pr(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||Sv(r.textContent,o)?(u.popover!=null&&(et("beforetoggle",r),et("toggle",r)),u.onScroll!=null&&et("scroll",r),u.onScrollEnd!=null&&et("scrollend",r),u.onClick!=null&&(r.onclick=ja),r=!0):r=!1,r||wr(n,!0)}function r0(n){for(Tn=n.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:Ra=!1;return;case 27:case 3:Ra=!0;return;default:Tn=Tn.return}}function Yo(n){if(n!==Tn)return!1;if(!st)return r0(n),st=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Hg(n.type,n.memoizedProps)),o=!o),o&&Ct&&wr(n),r0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ct=Cv(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ct=Cv(n)}else r===27?(r=Ct,Br(n.type)?(n=Kg,Kg=null,Ct=n):Ct=r):Ct=Tn?Na(n.stateNode.nextSibling):null;return!0}function Vs(){Ct=Tn=null,st=!1}function wm(){var n=Ar;return n!==null&&($n===null?$n=n:$n.push.apply($n,n),Ar=null),n}function wu(n){Ar===null?Ar=[n]:Ar.push(n)}var Im=M(null),Ps=null,Oi=null;function Ir(n,r,o){ue(Im,r._currentValue),r._currentValue=o}function Vi(n){n._currentValue=Im.current,Z(Im)}function Dm(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function zm(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var _=f.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=f;for(var x=0;x<r.length;x++)if(E.context===r[x]){g.lanes|=o,E=g.alternate,E!==null&&(E.lanes|=o),Dm(g.return,o,n),u||(_=null);break e}g=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=o,g=_.alternate,g!==null&&(g.lanes|=o),Dm(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function qo(n,r,o,u){n=null;for(var f=r,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var E=f.type;ra(f.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(f===Ye.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Wu):n=[Wu])}f=f.return}n!==null&&zm(r,n,o,u),r.flags|=262144}function Oh(n){for(n=n.firstContext;n!==null;){if(!ra(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ls(n){Ps=n,Oi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function En(n){return s0(Ps,n)}function Vh(n,r){return Ps===null&&Ls(n),s0(n,r)}function s0(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Oi===null){if(n===null)throw Error(a(308));Oi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Oi=Oi.next=r;return o}var S3=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},T3=i.unstable_scheduleCallback,E3=i.unstable_NormalPriority,an={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rm(){return{controller:new S3,data:new Map,refCount:0}}function Iu(n){n.refCount--,n.refCount===0&&T3(E3,function(){n.controller.abort()})}var Du=null,Cm=0,Go=0,Ko=null;function A3(n,r){if(Du===null){var o=Du=[];Cm=0,Go=xg(),Ko={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Cm++,r.then(o0,o0),r}function o0(){if(--Cm===0&&Du!==null){Ko!==null&&(Ko.status="fulfilled");var n=Du;Du=null,Go=0,Ko=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function w3(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var l0=L.S;L.S=function(n,r){q_=Kt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&A3(n,r),l0!==null&&l0(n,r)};var Bs=M(null);function Nm(){var n=Bs.current;return n!==null?n:zt.pooledCache}function Ph(n,r){r===null?ue(Bs,Bs.current):ue(Bs,r.pool)}function u0(){var n=Nm();return n===null?null:{parent:an._currentValue,pool:n}}var Qo=Error(a(460)),Mm=Error(a(474)),Lh=Error(a(542)),Bh={then:function(){}};function c0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function h0(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(ja,ja),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,d0(n),n;default:if(typeof r.status=="string")r.then(ja,ja);else{if(n=zt,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,d0(n),n}throw Us=r,Qo}}function js(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Us=o,Qo):o}}var Us=null;function f0(){if(Us===null)throw Error(a(459));var n=Us;return Us=null,n}function d0(n){if(n===Qo||n===Lh)throw Error(a(483))}var Jo=null,zu=0;function jh(n){var r=zu;return zu+=1,Jo===null&&(Jo=[]),h0(Jo,n,r)}function Ru(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Uh(n,r){throw r.$$typeof===D?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function m0(n){function r(P,V){if(n){var F=P.deletions;F===null?(P.deletions=[V],P.flags|=16):F.push(V)}}function o(P,V){if(!n)return null;for(;V!==null;)r(P,V),V=V.sibling;return null}function u(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=xi(P,V),P.index=0,P.sibling=null,P}function g(P,V,F){return P.index=F,n?(F=P.alternate,F!==null?(F=F.index,F<V?(P.flags|=67108866,V):F):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function E(P,V,F,ae){return V===null||V.tag!==6?(V=bm(F,P.mode,ae),V.return=P,V):(V=f(V,F),V.return=P,V)}function x(P,V,F,ae){var ke=F.type;return ke===q?ee(P,V,F.props.children,ae,F.key):V!==null&&(V.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===I&&js(ke)===V.type)?(V=f(V,F.props),Ru(V,F),V.return=P,V):(V=xh(F.type,F.key,F.props,null,P.mode,ae),Ru(V,F),V.return=P,V)}function Y(P,V,F,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=Sm(F,P.mode,ae),V.return=P,V):(V=f(V,F.children||[]),V.return=P,V)}function ee(P,V,F,ae,ke){return V===null||V.tag!==7?(V=Os(F,P.mode,ae,ke),V.return=P,V):(V=f(V,F),V.return=P,V)}function ie(P,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=bm(""+V,P.mode,F),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return F=xh(V.type,V.key,V.props,null,P.mode,F),Ru(F,V),F.return=P,F;case H:return V=Sm(V,P.mode,F),V.return=P,V;case I:return V=js(V),ie(P,V,F)}if(We(V)||O(V))return V=Os(V,P.mode,F,null),V.return=P,V;if(typeof V.then=="function")return ie(P,jh(V),F);if(V.$$typeof===Q)return ie(P,Vh(P,V),F);Uh(P,V)}return null}function G(P,V,F,ae){var ke=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ke!==null?null:E(P,V,""+F,ae);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case k:return F.key===ke?x(P,V,F,ae):null;case H:return F.key===ke?Y(P,V,F,ae):null;case I:return F=js(F),G(P,V,F,ae)}if(We(F)||O(F))return ke!==null?null:ee(P,V,F,ae,null);if(typeof F.then=="function")return G(P,V,jh(F),ae);if(F.$$typeof===Q)return G(P,V,Vh(P,F),ae);Uh(P,F)}return null}function J(P,V,F,ae,ke){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return P=P.get(F)||null,E(V,P,""+ae,ke);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case k:return P=P.get(ae.key===null?F:ae.key)||null,x(V,P,ae,ke);case H:return P=P.get(ae.key===null?F:ae.key)||null,Y(V,P,ae,ke);case I:return ae=js(ae),J(P,V,F,ae,ke)}if(We(ae)||O(ae))return P=P.get(F)||null,ee(V,P,ae,ke,null);if(typeof ae.then=="function")return J(P,V,F,jh(ae),ke);if(ae.$$typeof===Q)return J(P,V,F,Vh(V,ae),ke);Uh(V,ae)}return null}function we(P,V,F,ae){for(var ke=null,ut=null,ze=V,Je=V=0,nt=null;ze!==null&&Je<F.length;Je++){ze.index>Je?(nt=ze,ze=null):nt=ze.sibling;var ct=G(P,ze,F[Je],ae);if(ct===null){ze===null&&(ze=nt);break}n&&ze&&ct.alternate===null&&r(P,ze),V=g(ct,V,Je),ut===null?ke=ct:ut.sibling=ct,ut=ct,ze=nt}if(Je===F.length)return o(P,ze),st&&ki(P,Je),ke;if(ze===null){for(;Je<F.length;Je++)ze=ie(P,F[Je],ae),ze!==null&&(V=g(ze,V,Je),ut===null?ke=ze:ut.sibling=ze,ut=ze);return st&&ki(P,Je),ke}for(ze=u(ze);Je<F.length;Je++)nt=J(ze,P,Je,F[Je],ae),nt!==null&&(n&&nt.alternate!==null&&ze.delete(nt.key===null?Je:nt.key),V=g(nt,V,Je),ut===null?ke=nt:ut.sibling=nt,ut=nt);return n&&ze.forEach(function(Yr){return r(P,Yr)}),st&&ki(P,Je),ke}function Be(P,V,F,ae){if(F==null)throw Error(a(151));for(var ke=null,ut=null,ze=V,Je=V=0,nt=null,ct=F.next();ze!==null&&!ct.done;Je++,ct=F.next()){ze.index>Je?(nt=ze,ze=null):nt=ze.sibling;var Yr=G(P,ze,ct.value,ae);if(Yr===null){ze===null&&(ze=nt);break}n&&ze&&Yr.alternate===null&&r(P,ze),V=g(Yr,V,Je),ut===null?ke=Yr:ut.sibling=Yr,ut=Yr,ze=nt}if(ct.done)return o(P,ze),st&&ki(P,Je),ke;if(ze===null){for(;!ct.done;Je++,ct=F.next())ct=ie(P,ct.value,ae),ct!==null&&(V=g(ct,V,Je),ut===null?ke=ct:ut.sibling=ct,ut=ct);return st&&ki(P,Je),ke}for(ze=u(ze);!ct.done;Je++,ct=F.next())ct=J(ze,P,Je,ct.value,ae),ct!==null&&(n&&ct.alternate!==null&&ze.delete(ct.key===null?Je:ct.key),V=g(ct,V,Je),ut===null?ke=ct:ut.sibling=ct,ut=ct);return n&&ze.forEach(function(V4){return r(P,V4)}),st&&ki(P,Je),ke}function It(P,V,F,ae){if(typeof F=="object"&&F!==null&&F.type===q&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case k:e:{for(var ke=F.key;V!==null;){if(V.key===ke){if(ke=F.type,ke===q){if(V.tag===7){o(P,V.sibling),ae=f(V,F.props.children),ae.return=P,P=ae;break e}}else if(V.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===I&&js(ke)===V.type){o(P,V.sibling),ae=f(V,F.props),Ru(ae,F),ae.return=P,P=ae;break e}o(P,V);break}else r(P,V);V=V.sibling}F.type===q?(ae=Os(F.props.children,P.mode,ae,F.key),ae.return=P,P=ae):(ae=xh(F.type,F.key,F.props,null,P.mode,ae),Ru(ae,F),ae.return=P,P=ae)}return _(P);case H:e:{for(ke=F.key;V!==null;){if(V.key===ke)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){o(P,V.sibling),ae=f(V,F.children||[]),ae.return=P,P=ae;break e}else{o(P,V);break}else r(P,V);V=V.sibling}ae=Sm(F,P.mode,ae),ae.return=P,P=ae}return _(P);case I:return F=js(F),It(P,V,F,ae)}if(We(F))return we(P,V,F,ae);if(O(F)){if(ke=O(F),typeof ke!="function")throw Error(a(150));return F=ke.call(F),Be(P,V,F,ae)}if(typeof F.then=="function")return It(P,V,jh(F),ae);if(F.$$typeof===Q)return It(P,V,Vh(P,F),ae);Uh(P,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(o(P,V.sibling),ae=f(V,F),ae.return=P,P=ae):(o(P,V),ae=bm(F,P.mode,ae),ae.return=P,P=ae),_(P)):o(P,V)}return function(P,V,F,ae){try{zu=0;var ke=It(P,V,F,ae);return Jo=null,ke}catch(ze){if(ze===Qo||ze===Lh)throw ze;var ut=sa(29,ze,null,P.mode);return ut.lanes=ae,ut.return=P,ut}}}var Hs=m0(!0),g0=m0(!1),Dr=!1;function xm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function km(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Rr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(dt&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Mh(n),Wy(n,null,o),r}return Nh(n,u,r,o),Mh(n)}function Cu(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,La(n,o)}}function Om(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=_:g=g.next=_,o=o.next}while(o!==null);g===null?f=g=r:g=g.next=r}else f=g=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Vm=!1;function Nu(){if(Vm){var n=Ko;if(n!==null)throw n}}function Mu(n,r,o,u){Vm=!1;var f=n.updateQueue;Dr=!1;var g=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var x=E,Y=x.next;x.next=null,_===null?g=Y:_.next=Y,_=x;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,E=ee.lastBaseUpdate,E!==_&&(E===null?ee.firstBaseUpdate=Y:E.next=Y,ee.lastBaseUpdate=x))}if(g!==null){var ie=f.baseState;_=0,ee=Y=x=null,E=g;do{var G=E.lane&-536870913,J=G!==E.lane;if(J?(tt&G)===G:(u&G)===G){G!==0&&G===Go&&(Vm=!0),ee!==null&&(ee=ee.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var we=n,Be=E;G=r;var It=o;switch(Be.tag){case 1:if(we=Be.payload,typeof we=="function"){ie=we.call(It,ie,G);break e}ie=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Be.payload,G=typeof we=="function"?we.call(It,ie,G):we,G==null)break e;ie=S({},ie,G);break e;case 2:Dr=!0}}G=E.callback,G!==null&&(n.flags|=64,J&&(n.flags|=8192),J=f.callbacks,J===null?f.callbacks=[G]:J.push(G))}else J={lane:G,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ee===null?(Y=ee=J,x=ie):ee=ee.next=J,_|=G;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;J=E,E=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);ee===null&&(x=ie),f.baseState=x,f.firstBaseUpdate=Y,f.lastBaseUpdate=ee,g===null&&(f.shared.lanes=0),kr|=_,n.lanes=_,n.memoizedState=ie}}function p0(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function y0(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)p0(o[n],r)}var $o=M(null),Hh=M(0);function _0(n,r){n=qi,ue(Hh,n),ue($o,r),qi=n|r.baseLanes}function Pm(){ue(Hh,qi),ue($o,$o.current)}function Lm(){qi=Hh.current,Z($o),Z(Hh)}var oa=M(null),Ca=null;function Cr(n){var r=n.alternate;ue(Xt,Xt.current&1),ue(oa,n),Ca===null&&(r===null||$o.current!==null||r.memoizedState!==null)&&(Ca=n)}function Bm(n){ue(Xt,Xt.current),ue(oa,n),Ca===null&&(Ca=n)}function v0(n){n.tag===22?(ue(Xt,Xt.current),ue(oa,n),Ca===null&&(Ca=n)):Nr()}function Nr(){ue(Xt,Xt.current),ue(oa,oa.current)}function la(n){Z(oa),Ca===n&&(Ca=null),Z(Xt)}var Xt=M(0);function Fh(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||qg(o)||Gg(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Pi=0,Qe=null,At=null,rn=null,Yh=!1,Xo=!1,Fs=!1,qh=0,xu=0,Wo=null,I3=0;function Yt(){throw Error(a(321))}function jm(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!ra(n[o],r[o]))return!1;return!0}function Um(n,r,o,u,f,g){return Pi=g,Qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,L.H=n===null||n.memoizedState===null?n_:ng,Fs=!1,g=o(u,f),Fs=!1,Xo&&(g=S0(r,o,u,f)),b0(n),g}function b0(n){L.H=Vu;var r=At!==null&&At.next!==null;if(Pi=0,rn=At=Qe=null,Yh=!1,xu=0,Wo=null,r)throw Error(a(300));n===null||sn||(n=n.dependencies,n!==null&&Oh(n)&&(sn=!0))}function S0(n,r,o,u){Qe=n;var f=0;do{if(Xo&&(Wo=null),xu=0,Xo=!1,25<=f)throw Error(a(301));if(f+=1,rn=At=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=a_,g=r(o,u)}while(Xo);return g}function D3(){var n=L.H,r=n.useState()[0];return r=typeof r.then=="function"?ku(r):r,n=n.useState()[0],(At!==null?At.memoizedState:null)!==n&&(Qe.flags|=1024),r}function Hm(){var n=qh!==0;return qh=0,n}function Fm(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Ym(n){if(Yh){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Yh=!1}Pi=0,rn=At=Qe=null,Xo=!1,xu=qh=0,Wo=null}function Bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Qe.memoizedState=rn=n:rn=rn.next=n,rn}function Wt(){if(At===null){var n=Qe.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var r=rn===null?Qe.memoizedState:rn.next;if(r!==null)rn=r,At=n;else{if(n===null)throw Qe.alternate===null?Error(a(467)):Error(a(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},rn===null?Qe.memoizedState=rn=n:rn=rn.next=n}return rn}function Gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ku(n){var r=xu;return xu+=1,Wo===null&&(Wo=[]),n=h0(Wo,n,r),r=Qe,(rn===null?r.memoizedState:rn.next)===null&&(r=r.alternate,L.H=r===null||r.memoizedState===null?n_:ng),n}function Kh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ku(n);if(n.$$typeof===Q)return En(n)}throw Error(a(438,String(n)))}function qm(n){var r=null,o=Qe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Gh(),Qe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=C;return r.index++,o}function Li(n,r){return typeof r=="function"?r(n):r}function Qh(n){var r=Wt();return Gm(r,At,n)}function Gm(n,r,o){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var _=f.next;f.next=g.next,g.next=_}r.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{r=f.next;var E=_=null,x=null,Y=r,ee=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(tt&ie)===ie:(Pi&ie)===ie){var G=Y.revertLane;if(G===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Go&&(ee=!0);else if((Pi&G)===G){Y=Y.next,G===Go&&(ee=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},x===null?(E=x=ie,_=g):x=x.next=ie,Qe.lanes|=G,kr|=G;ie=Y.action,Fs&&o(g,ie),g=Y.hasEagerState?Y.eagerState:o(g,ie)}else G={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},x===null?(E=x=G,_=g):x=x.next=G,Qe.lanes|=ie,kr|=ie;Y=Y.next}while(Y!==null&&Y!==r);if(x===null?_=g:x.next=E,!ra(g,n.memoizedState)&&(sn=!0,ee&&(o=Ko,o!==null)))throw o;n.memoizedState=g,n.baseState=_,n.baseQueue=x,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Km(n){var r=Wt(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do g=n(g,_.action),_=_.next;while(_!==f);ra(g,r.memoizedState)||(sn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,u]}function T0(n,r,o){var u=Qe,f=Wt(),g=st;if(g){if(o===void 0)throw Error(a(407));o=o()}else o=r();var _=!ra((At||f).memoizedState,o);if(_&&(f.memoizedState=o,sn=!0),f=f.queue,$m(w0.bind(null,u,f,n),[n]),f.getSnapshot!==r||_||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,Zo(9,{destroy:void 0},A0.bind(null,u,f,o,r),null),zt===null)throw Error(a(349));g||(Pi&127)!==0||E0(u,r,o)}return o}function E0(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Qe.updateQueue,r===null?(r=Gh(),Qe.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function A0(n,r,o,u){r.value=o,r.getSnapshot=u,I0(r)&&D0(n)}function w0(n,r,o){return o(function(){I0(r)&&D0(n)})}function I0(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!ra(n,o)}catch{return!0}}function D0(n){var r=ks(n,2);r!==null&&Xn(r,n,2)}function Qm(n){var r=Bn();if(typeof n=="function"){var o=n;if(n=o(),Fs){Hn(!0);try{o()}finally{Hn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:n},r}function z0(n,r,o,u){return n.baseState=o,Gm(n,At,typeof u=="function"?u:Li)}function z3(n,r,o,u,f){if(Xh(n))throw Error(a(485));if(n=r.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){g.listeners.push(_)}};L.T!==null?o(!0):g.isTransition=!1,u(g),o=r.pending,o===null?(g.next=r.pending=g,R0(r,g)):(g.next=o.next,r.pending=o.next=g)}}function R0(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var g=L.T,_={};L.T=_;try{var E=o(f,u),x=L.S;x!==null&&x(_,E),C0(n,r,E)}catch(Y){Jm(n,r,Y)}finally{g!==null&&_.types!==null&&(g.types=_.types),L.T=g}}else try{g=o(f,u),C0(n,r,g)}catch(Y){Jm(n,r,Y)}}function C0(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){N0(n,r,u)},function(u){return Jm(n,r,u)}):N0(n,r,o)}function N0(n,r,o){r.status="fulfilled",r.value=o,M0(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,R0(n,o)))}function Jm(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,M0(r),r=r.next;while(r!==u)}n.action=null}function M0(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function x0(n,r){return r}function k0(n,r){if(st){var o=zt.formState;if(o!==null){e:{var u=Qe;if(st){if(Ct){t:{for(var f=Ct,g=Ra;f.nodeType!==8;){if(!g){f=null;break t}if(f=Na(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Ct=Na(f.nextSibling),u=f.data==="F!";break e}}wr(u)}u=!1}u&&(r=o[0])}}return o=Bn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x0,lastRenderedState:r},o.queue=u,o=Z0.bind(null,Qe,u),u.dispatch=o,u=Qm(!1),g=tg.bind(null,Qe,!1,u.queue),u=Bn(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=z3.bind(null,Qe,f,g,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function O0(n){var r=Wt();return V0(r,At,n)}function V0(n,r,o){if(r=Gm(n,r,x0)[0],n=Qh(Li)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=ku(r)}catch(_){throw _===Qo?Lh:_}else u=r;r=Wt();var f=r.queue,g=f.dispatch;return o!==r.memoizedState&&(Qe.flags|=2048,Zo(9,{destroy:void 0},R3.bind(null,f,o),null)),[u,g,n]}function R3(n,r){n.action=r}function P0(n){var r=Wt(),o=At;if(o!==null)return V0(r,o,n);Wt(),r=r.memoizedState,o=Wt();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function Zo(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=Qe.updateQueue,r===null&&(r=Gh(),Qe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function L0(){return Wt().memoizedState}function Jh(n,r,o,u){var f=Bn();Qe.flags|=n,f.memoizedState=Zo(1|r,{destroy:void 0},o,u===void 0?null:u)}function $h(n,r,o,u){var f=Wt();u=u===void 0?null:u;var g=f.memoizedState.inst;At!==null&&u!==null&&jm(u,At.memoizedState.deps)?f.memoizedState=Zo(r,g,o,u):(Qe.flags|=n,f.memoizedState=Zo(1|r,g,o,u))}function B0(n,r){Jh(8390656,8,n,r)}function $m(n,r){$h(2048,8,n,r)}function C3(n){Qe.flags|=4;var r=Qe.updateQueue;if(r===null)r=Gh(),Qe.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function j0(n){var r=Wt().memoizedState;return C3({ref:r,nextImpl:n}),function(){if((dt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function U0(n,r){return $h(4,2,n,r)}function H0(n,r){return $h(4,4,n,r)}function F0(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Y0(n,r,o){o=o!=null?o.concat([n]):null,$h(4,4,F0.bind(null,r,n),o)}function Xm(){}function q0(n,r){var o=Wt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&jm(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function G0(n,r){var o=Wt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&jm(r,u[1]))return u[0];if(u=n(),Fs){Hn(!0);try{n()}finally{Hn(!1)}}return o.memoizedState=[u,r],u}function Wm(n,r,o){return o===void 0||(Pi&1073741824)!==0&&(tt&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=K_(),Qe.lanes|=n,kr|=n,o)}function K0(n,r,o,u){return ra(o,r)?o:$o.current!==null?(n=Wm(n,o,u),ra(n,r)||(sn=!0),n):(Pi&42)===0||(Pi&1073741824)!==0&&(tt&261930)===0?(sn=!0,n.memoizedState=o):(n=K_(),Qe.lanes|=n,kr|=n,r)}function Q0(n,r,o,u,f){var g=re.p;re.p=g!==0&&8>g?g:8;var _=L.T,E={};L.T=E,tg(n,!1,r,o);try{var x=f(),Y=L.S;if(Y!==null&&Y(E,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var ee=w3(x,u);Ou(n,r,ee,ha(n))}else Ou(n,r,u,ha(n))}catch(ie){Ou(n,r,{then:function(){},status:"rejected",reason:ie},ha())}finally{re.p=g,_!==null&&E.types!==null&&(_.types=E.types),L.T=_}}function N3(){}function Zm(n,r,o,u){if(n.tag!==5)throw Error(a(476));var f=J0(n).queue;Q0(n,f,r,de,o===null?N3:function(){return $0(n),o(u)})}function J0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:de},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function $0(n){var r=J0(n);r.next===null&&(r=n.alternate.memoizedState),Ou(n,r.next.queue,{},ha())}function eg(){return En(Wu)}function X0(){return Wt().memoizedState}function W0(){return Wt().memoizedState}function M3(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=ha();n=zr(o);var u=Rr(r,n,o);u!==null&&(Xn(u,r,o),Cu(u,r,o)),r={cache:Rm()},n.payload=r;return}r=r.return}}function x3(n,r,o){var u=ha();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xh(n)?e_(r,o):(o=_m(n,r,o,u),o!==null&&(Xn(o,n,u),t_(o,r,u)))}function Z0(n,r,o){var u=ha();Ou(n,r,o,u)}function Ou(n,r,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xh(n))e_(r,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var _=r.lastRenderedState,E=g(_,o);if(f.hasEagerState=!0,f.eagerState=E,ra(E,_))return Nh(n,r,f,0),zt===null&&Ch(),!1}catch{}if(o=_m(n,r,f,u),o!==null)return Xn(o,n,u),t_(o,r,u),!0}return!1}function tg(n,r,o,u){if(u={lane:2,revertLane:xg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Xh(n)){if(r)throw Error(a(479))}else r=_m(n,o,u,2),r!==null&&Xn(r,n,2)}function Xh(n){var r=n.alternate;return n===Qe||r!==null&&r===Qe}function e_(n,r){Xo=Yh=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function t_(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,La(n,o)}}var Vu={readContext:En,use:Kh,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};Vu.useEffectEvent=Yt;var n_={readContext:En,use:Kh,useCallback:function(n,r){return Bn().memoizedState=[n,r===void 0?null:r],n},useContext:En,useEffect:B0,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Jh(4194308,4,F0.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Jh(4194308,4,n,r)},useInsertionEffect:function(n,r){Jh(4,2,n,r)},useMemo:function(n,r){var o=Bn();r=r===void 0?null:r;var u=n();if(Fs){Hn(!0);try{n()}finally{Hn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=Bn();if(o!==void 0){var f=o(r);if(Fs){Hn(!0);try{o(r)}finally{Hn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=x3.bind(null,Qe,n),[u.memoizedState,n]},useRef:function(n){var r=Bn();return n={current:n},r.memoizedState=n},useState:function(n){n=Qm(n);var r=n.queue,o=Z0.bind(null,Qe,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Xm,useDeferredValue:function(n,r){var o=Bn();return Wm(o,n,r)},useTransition:function(){var n=Qm(!1);return n=Q0.bind(null,Qe,n.queue,!0,!1),Bn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=Qe,f=Bn();if(st){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),zt===null)throw Error(a(349));(tt&127)!==0||E0(u,r,o)}f.memoizedState=o;var g={value:o,getSnapshot:r};return f.queue=g,B0(w0.bind(null,u,g,n),[n]),u.flags|=2048,Zo(9,{destroy:void 0},A0.bind(null,u,g,o,r),null),o},useId:function(){var n=Bn(),r=zt.identifierPrefix;if(st){var o=ui,u=li;o=(u&~(1<<32-kt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=qh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=I3++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:eg,useFormState:k0,useActionState:k0,useOptimistic:function(n){var r=Bn();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=tg.bind(null,Qe,!0,o),o.dispatch=r,[n,r]},useMemoCache:qm,useCacheRefresh:function(){return Bn().memoizedState=M3.bind(null,Qe)},useEffectEvent:function(n){var r=Bn(),o={impl:n};return r.memoizedState=o,function(){if((dt&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},ng={readContext:En,use:Kh,useCallback:q0,useContext:En,useEffect:$m,useImperativeHandle:Y0,useInsertionEffect:U0,useLayoutEffect:H0,useMemo:G0,useReducer:Qh,useRef:L0,useState:function(){return Qh(Li)},useDebugValue:Xm,useDeferredValue:function(n,r){var o=Wt();return K0(o,At.memoizedState,n,r)},useTransition:function(){var n=Qh(Li)[0],r=Wt().memoizedState;return[typeof n=="boolean"?n:ku(n),r]},useSyncExternalStore:T0,useId:X0,useHostTransitionStatus:eg,useFormState:O0,useActionState:O0,useOptimistic:function(n,r){var o=Wt();return z0(o,At,n,r)},useMemoCache:qm,useCacheRefresh:W0};ng.useEffectEvent=j0;var a_={readContext:En,use:Kh,useCallback:q0,useContext:En,useEffect:$m,useImperativeHandle:Y0,useInsertionEffect:U0,useLayoutEffect:H0,useMemo:G0,useReducer:Km,useRef:L0,useState:function(){return Km(Li)},useDebugValue:Xm,useDeferredValue:function(n,r){var o=Wt();return At===null?Wm(o,n,r):K0(o,At.memoizedState,n,r)},useTransition:function(){var n=Km(Li)[0],r=Wt().memoizedState;return[typeof n=="boolean"?n:ku(n),r]},useSyncExternalStore:T0,useId:X0,useHostTransitionStatus:eg,useFormState:P0,useActionState:P0,useOptimistic:function(n,r){var o=Wt();return At!==null?z0(o,At,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:qm,useCacheRefresh:W0};a_.useEffectEvent=j0;function ag(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:S({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var ig={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=ha(),f=zr(u);f.payload=r,o!=null&&(f.callback=o),r=Rr(n,f,u),r!==null&&(Xn(r,n,u),Cu(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=ha(),f=zr(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Rr(n,f,u),r!==null&&(Xn(r,n,u),Cu(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=ha(),u=zr(o);u.tag=2,r!=null&&(u.callback=r),r=Rr(n,u,o),r!==null&&(Xn(r,n,o),Cu(r,n,o))}};function i_(n,r,o,u,f,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,_):r.prototype&&r.prototype.isPureReactComponent?!Tu(o,u)||!Tu(f,g):!0}function r_(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&ig.enqueueReplaceState(r,r.state,null)}function Ys(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=S({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function s_(n){Rh(n)}function o_(n){console.error(n)}function l_(n){Rh(n)}function Wh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function u_(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function rg(n,r,o){return o=zr(o),o.tag=3,o.payload={element:null},o.callback=function(){Wh(n,r)},o}function c_(n){return n=zr(n),n.tag=3,n}function h_(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){u_(r,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){u_(r,o,u),typeof f!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function k3(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&qo(r,o,f,!0),o=oa.current,o!==null){switch(o.tag){case 31:case 13:return Ca===null?hf():o.alternate===null&&qt===0&&(qt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Bh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Cg(n,u,f)),!1;case 22:return o.flags|=65536,u===Bh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Cg(n,u,f)),!1}throw Error(a(435,o.tag))}return Cg(n,u,f),hf(),!1}if(st)return r=oa.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Am&&(n=Error(a(422),{cause:u}),wu(Ia(n,o)))):(u!==Am&&(r=Error(a(423),{cause:u}),wu(Ia(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Ia(u,o),f=rg(n.stateNode,u,f),Om(n,f),qt!==4&&(qt=2)),!1;var g=Error(a(520),{cause:u});if(g=Ia(g,o),Yu===null?Yu=[g]:Yu.push(g),qt!==4&&(qt=2),r===null)return!0;u=Ia(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=rg(o.stateNode,u,n),Om(o,n),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Or===null||!Or.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=c_(f),h_(f,n,o,u),Om(o,f),!1}o=o.return}while(o!==null);return!1}var sg=Error(a(461)),sn=!1;function An(n,r,o,u){r.child=n===null?g0(r,null,o,u):Hs(r,n.child,o,u)}function f_(n,r,o,u,f){o=o.render;var g=r.ref;if("ref"in u){var _={};for(var E in u)E!=="ref"&&(_[E]=u[E])}else _=u;return Ls(r),u=Um(n,r,o,_,g,f),E=Hm(),n!==null&&!sn?(Fm(n,r,f),Bi(n,r,f)):(st&&E&&Tm(r),r.flags|=1,An(n,r,u,f),r.child)}function d_(n,r,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!vm(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,m_(n,r,g,u,f)):(n=xh(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!mg(n,f)){var _=g.memoizedProps;if(o=o.compare,o=o!==null?o:Tu,o(_,u)&&n.ref===r.ref)return Bi(n,r,f)}return r.flags|=1,n=xi(g,u),n.ref=r.ref,n.return=r,r.child=n}function m_(n,r,o,u,f){if(n!==null){var g=n.memoizedProps;if(Tu(g,u)&&n.ref===r.ref)if(sn=!1,r.pendingProps=u=g,mg(n,f))(n.flags&131072)!==0&&(sn=!0);else return r.lanes=n.lanes,Bi(n,r,f)}return og(n,r,o,u,f)}function g_(n,r,o,u){var f=u.children,g=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(u=r.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~g}else u=0,r.child=null;return p_(n,r,g,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ph(r,g!==null?g.cachePool:null),g!==null?_0(r,g):Pm(),v0(r);else return u=r.lanes=536870912,p_(n,r,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Ph(r,g.cachePool),_0(r,g),Nr(),r.memoizedState=null):(n!==null&&Ph(r,null),Pm(),Nr());return An(n,r,f,o),r.child}function Pu(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function p_(n,r,o,u,f){var g=Nm();return g=g===null?null:{parent:an._currentValue,pool:g},r.memoizedState={baseLanes:o,cachePool:g},n!==null&&Ph(r,null),Pm(),v0(r),n!==null&&qo(n,r,u,!0),r.childLanes=f,null}function Zh(n,r){return r=tf({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function y_(n,r,o){return Hs(r,n.child,null,o),n=Zh(r,r.pendingProps),n.flags|=2,la(r),r.memoizedState=null,n}function O3(n,r,o){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(st){if(u.mode==="hidden")return n=Zh(r,u),r.lanes=536870912,Pu(null,n);if(Bm(r),(n=Ct)?(n=Rv(n,Ra),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Er!==null?{id:li,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},o=e0(n),o.return=r,r.child=o,Tn=r,Ct=null)):n=null,n===null)throw wr(r);return r.lanes=536870912,null}return Zh(r,u)}var g=n.memoizedState;if(g!==null){var _=g.dehydrated;if(Bm(r),f)if(r.flags&256)r.flags&=-257,r=y_(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(a(558));else if(sn||qo(n,r,o,!1),f=(o&n.childLanes)!==0,sn||f){if(u=zt,u!==null&&(_=Ts(u,o),_!==0&&_!==g.retryLane))throw g.retryLane=_,ks(n,_),Xn(u,n,_),sg;hf(),r=y_(n,r,o)}else n=g.treeContext,Ct=Na(_.nextSibling),Tn=r,st=!0,Ar=null,Ra=!1,n!==null&&a0(r,n),r=Zh(r,u),r.flags|=4096;return r}return n=xi(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function ef(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function og(n,r,o,u,f){return Ls(r),o=Um(n,r,o,u,void 0,f),u=Hm(),n!==null&&!sn?(Fm(n,r,f),Bi(n,r,f)):(st&&u&&Tm(r),r.flags|=1,An(n,r,o,f),r.child)}function __(n,r,o,u,f,g){return Ls(r),r.updateQueue=null,o=S0(r,u,o,f),b0(n),u=Hm(),n!==null&&!sn?(Fm(n,r,g),Bi(n,r,g)):(st&&u&&Tm(r),r.flags|=1,An(n,r,o,g),r.child)}function v_(n,r,o,u,f){if(Ls(r),r.stateNode===null){var g=Uo,_=o.contextType;typeof _=="object"&&_!==null&&(g=En(_)),g=new o(u,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ig,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=u,g.state=r.memoizedState,g.refs={},xm(r),_=o.contextType,g.context=typeof _=="object"&&_!==null?En(_):Uo,g.state=r.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(ag(r,o,_,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(_=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),_!==g.state&&ig.enqueueReplaceState(g,g.state,null),Mu(r,u,g,f),Nu(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){g=r.stateNode;var E=r.memoizedProps,x=Ys(o,E);g.props=x;var Y=g.context,ee=o.contextType;_=Uo,typeof ee=="object"&&ee!==null&&(_=En(ee));var ie=o.getDerivedStateFromProps;ee=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,ee||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||Y!==_)&&r_(r,g,u,_),Dr=!1;var G=r.memoizedState;g.state=G,Mu(r,u,g,f),Nu(),Y=r.memoizedState,E||G!==Y||Dr?(typeof ie=="function"&&(ag(r,o,ie,u),Y=r.memoizedState),(x=Dr||i_(r,o,x,u,G,Y,_))?(ee||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Y),g.props=u,g.state=Y,g.context=_,u=x):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{g=r.stateNode,km(n,r),_=r.memoizedProps,ee=Ys(o,_),g.props=ee,ie=r.pendingProps,G=g.context,Y=o.contextType,x=Uo,typeof Y=="object"&&Y!==null&&(x=En(Y)),E=o.getDerivedStateFromProps,(Y=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==ie||G!==x)&&r_(r,g,u,x),Dr=!1,G=r.memoizedState,g.state=G,Mu(r,u,g,f),Nu();var J=r.memoizedState;_!==ie||G!==J||Dr||n!==null&&n.dependencies!==null&&Oh(n.dependencies)?(typeof E=="function"&&(ag(r,o,E,u),J=r.memoizedState),(ee=Dr||i_(r,o,ee,u,G,J,x)||n!==null&&n.dependencies!==null&&Oh(n.dependencies))?(Y||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,J,x),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,J,x)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=J),g.props=u,g.state=J,g.context=x,u=ee):(typeof g.componentDidUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),u=!1)}return g=u,ef(n,r),u=(r.flags&128)!==0,g||u?(g=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&u?(r.child=Hs(r,n.child,null,f),r.child=Hs(r,null,o,f)):An(n,r,o,f),r.memoizedState=g.state,n=r.child):n=Bi(n,r,f),n}function b_(n,r,o,u){return Vs(),r.flags|=256,An(n,r,o,u),r.child}var lg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ug(n){return{baseLanes:n,cachePool:u0()}}function cg(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=ca),n}function S_(n,r,o){var u=r.pendingProps,f=!1,g=(r.flags&128)!==0,_;if((_=g)||(_=n!==null&&n.memoizedState===null?!1:(Xt.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(st){if(f?Cr(r):Nr(),(n=Ct)?(n=Rv(n,Ra),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Er!==null?{id:li,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},o=e0(n),o.return=r,r.child=o,Tn=r,Ct=null)):n=null,n===null)throw wr(r);return Gg(n)?r.lanes=32:r.lanes=536870912,null}var E=u.children;return u=u.fallback,f?(Nr(),f=r.mode,E=tf({mode:"hidden",children:E},f),u=Os(u,f,o,null),E.return=r,u.return=r,E.sibling=u,r.child=E,u=r.child,u.memoizedState=ug(o),u.childLanes=cg(n,_,o),r.memoizedState=lg,Pu(null,u)):(Cr(r),hg(r,E))}var x=n.memoizedState;if(x!==null&&(E=x.dehydrated,E!==null)){if(g)r.flags&256?(Cr(r),r.flags&=-257,r=fg(n,r,o)):r.memoizedState!==null?(Nr(),r.child=n.child,r.flags|=128,r=null):(Nr(),E=u.fallback,f=r.mode,u=tf({mode:"visible",children:u.children},f),E=Os(E,f,o,null),E.flags|=2,u.return=r,E.return=r,u.sibling=E,r.child=u,Hs(r,n.child,null,o),u=r.child,u.memoizedState=ug(o),u.childLanes=cg(n,_,o),r.memoizedState=lg,r=Pu(null,u));else if(Cr(r),Gg(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var Y=_.dgst;_=Y,u=Error(a(419)),u.stack="",u.digest=_,wu({value:u,source:null,stack:null}),r=fg(n,r,o)}else if(sn||qo(n,r,o,!1),_=(o&n.childLanes)!==0,sn||_){if(_=zt,_!==null&&(u=Ts(_,o),u!==0&&u!==x.retryLane))throw x.retryLane=u,ks(n,u),Xn(_,n,u),sg;qg(E)||hf(),r=fg(n,r,o)}else qg(E)?(r.flags|=192,r.child=n.child,r=null):(n=x.treeContext,Ct=Na(E.nextSibling),Tn=r,st=!0,Ar=null,Ra=!1,n!==null&&a0(r,n),r=hg(r,u.children),r.flags|=4096);return r}return f?(Nr(),E=u.fallback,f=r.mode,x=n.child,Y=x.sibling,u=xi(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,Y!==null?E=xi(Y,E):(E=Os(E,f,o,null),E.flags|=2),E.return=r,u.return=r,u.sibling=E,r.child=u,Pu(null,u),u=r.child,E=n.child.memoizedState,E===null?E=ug(o):(f=E.cachePool,f!==null?(x=an._currentValue,f=f.parent!==x?{parent:x,pool:x}:f):f=u0(),E={baseLanes:E.baseLanes|o,cachePool:f}),u.memoizedState=E,u.childLanes=cg(n,_,o),r.memoizedState=lg,Pu(n.child,u)):(Cr(r),o=n.child,n=o.sibling,o=xi(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=o,r.memoizedState=null,o)}function hg(n,r){return r=tf({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function tf(n,r){return n=sa(22,n,null,r),n.lanes=0,n}function fg(n,r,o){return Hs(r,n.child,null,o),n=hg(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function T_(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Dm(n.return,r,o)}function dg(n,r,o,u,f,g){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:g}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=g)}function E_(n,r,o){var u=r.pendingProps,f=u.revealOrder,g=u.tail;u=u.children;var _=Xt.current,E=(_&2)!==0;if(E?(_=_&1|2,r.flags|=128):_&=1,ue(Xt,_),An(n,r,u,o),u=st?Au:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&T_(n,o,r);else if(n.tag===19)T_(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&Fh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),dg(r,!1,f,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Fh(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}dg(r,!0,o,null,g,u);break;case"together":dg(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Bi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),kr|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(qo(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,o=xi(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=xi(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function mg(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Oh(n)))}function V3(n,r,o){switch(r.tag){case 3:Lt(r,r.stateNode.containerInfo),Ir(r,an,n.memoizedState.cache),Vs();break;case 27:case 5:Oa(r);break;case 4:Lt(r,r.stateNode.containerInfo);break;case 10:Ir(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Bm(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Cr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?S_(n,r,o):(Cr(r),n=Bi(n,r,o),n!==null?n.sibling:null);Cr(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(qo(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return E_(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Xt,Xt.current),u)break;return null;case 22:return r.lanes=0,g_(n,r,o,r.pendingProps);case 24:Ir(r,an,n.memoizedState.cache)}return Bi(n,r,o)}function A_(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)sn=!0;else{if(!mg(n,o)&&(r.flags&128)===0)return sn=!1,V3(n,r,o);sn=(n.flags&131072)!==0}else sn=!1,st&&(r.flags&1048576)!==0&&n0(r,Au,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(n=js(r.elementType),r.type=n,typeof n=="function")vm(n)?(u=Ys(n,u),r.tag=1,r=v_(null,r,n,u,o)):(r.tag=0,r=og(null,r,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===fe){r.tag=11,r=f_(null,r,n,u,o);break e}else if(f===A){r.tag=14,r=d_(null,r,n,u,o);break e}}throw r=xe(n)||n,Error(a(306,r,""))}}return r;case 0:return og(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Ys(u,r.pendingProps),v_(n,r,u,f,o);case 3:e:{if(Lt(r,r.stateNode.containerInfo),n===null)throw Error(a(387));u=r.pendingProps;var g=r.memoizedState;f=g.element,km(n,r),Mu(r,u,null,o);var _=r.memoizedState;if(u=_.cache,Ir(r,an,u),u!==g.cache&&zm(r,[an],o,!0),Nu(),u=_.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=b_(n,r,u,o);break e}else if(u!==f){f=Ia(Error(a(424)),r),wu(f),r=b_(n,r,u,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ct=Na(n.firstChild),Tn=r,st=!0,Ar=null,Ra=!0,o=g0(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Vs(),u===f){r=Bi(n,r,o);break e}An(n,r,u,o)}r=r.child}return r;case 26:return ef(n,r),n===null?(o=Ov(r.type,null,r.pendingProps,null))?r.memoizedState=o:st||(o=r.type,n=r.pendingProps,u=_f(Ne.current).createElement(o),u[Ft]=r,u[Qt]=n,wn(u,o,n),ot(u),r.stateNode=u):r.memoizedState=Ov(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Oa(r),n===null&&st&&(u=r.stateNode=Mv(r.type,r.pendingProps,Ne.current),Tn=r,Ra=!0,f=Ct,Br(r.type)?(Kg=f,Ct=Na(u.firstChild)):Ct=f),An(n,r,r.pendingProps.children,o),ef(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&st&&((f=u=Ct)&&(u=f4(u,r.type,r.pendingProps,Ra),u!==null?(r.stateNode=u,Tn=r,Ct=Na(u.firstChild),Ra=!1,f=!0):f=!1),f||wr(r)),Oa(r),f=r.type,g=r.pendingProps,_=n!==null?n.memoizedProps:null,u=g.children,Hg(f,g)?u=null:_!==null&&Hg(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Um(n,r,D3,null,null,o),Wu._currentValue=f),ef(n,r),An(n,r,u,o),r.child;case 6:return n===null&&st&&((n=o=Ct)&&(o=d4(o,r.pendingProps,Ra),o!==null?(r.stateNode=o,Tn=r,Ct=null,n=!0):n=!1),n||wr(r)),null;case 13:return S_(n,r,o);case 4:return Lt(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=Hs(r,null,u,o):An(n,r,u,o),r.child;case 11:return f_(n,r,r.type,r.pendingProps,o);case 7:return An(n,r,r.pendingProps,o),r.child;case 8:return An(n,r,r.pendingProps.children,o),r.child;case 12:return An(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Ir(r,r.type,u.value),An(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Ls(r),f=En(f),u=u(f),r.flags|=1,An(n,r,u,o),r.child;case 14:return d_(n,r,r.type,r.pendingProps,o);case 15:return m_(n,r,r.type,r.pendingProps,o);case 19:return E_(n,r,o);case 31:return O3(n,r,o);case 22:return g_(n,r,o,r.pendingProps);case 24:return Ls(r),u=En(an),n===null?(f=Nm(),f===null&&(f=zt,g=Rm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),r.memoizedState={parent:u,cache:f},xm(r),Ir(r,an,f)):((n.lanes&o)!==0&&(km(n,r),Mu(r,null,null,o),Nu()),f=n.memoizedState,g=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ir(r,an,u)):(u=g.cache,Ir(r,an,u),u!==f.cache&&zm(r,[an],o,!0))),An(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function ji(n){n.flags|=4}function gg(n,r,o,u,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(X_())n.flags|=8192;else throw Us=Bh,Mm}else n.flags&=-16777217}function w_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!jv(r))if(X_())n.flags|=8192;else throw Us=Bh,Mm}function nf(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Ao():536870912,n.lanes|=r,al|=r)}function Lu(n,r){if(!st)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Nt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function P3(n,r,o){var u=r.pendingProps;switch(Em(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return Nt(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Vi(an),Dt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Yo(r)?ji(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wm())),Nt(r),null;case 26:var f=r.type,g=r.memoizedState;return n===null?(ji(r),g!==null?(Nt(r),w_(r,g)):(Nt(r),gg(r,f,null,u,o))):g?g!==n.memoizedState?(ji(r),Nt(r),w_(r,g)):(Nt(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&ji(r),Nt(r),gg(r,f,n,u,o)),null;case 27:if(wi(r),o=Ne.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&ji(r);else{if(!u){if(r.stateNode===null)throw Error(a(166));return Nt(r),null}n=ye.current,Yo(r)?i0(r):(n=Mv(f,u,o),r.stateNode=n,ji(r))}return Nt(r),null;case 5:if(wi(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&ji(r);else{if(!u){if(r.stateNode===null)throw Error(a(166));return Nt(r),null}if(g=ye.current,Yo(r))i0(r);else{var _=_f(Ne.current);switch(g){case 1:g=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=_.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}g[Ft]=r,g[Qt]=u;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)g.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=g;e:switch(wn(g,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ji(r)}}return Nt(r),gg(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&ji(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(a(166));if(n=Ne.current,Yo(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=Tn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ft]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Sv(n.nodeValue,o)),n||wr(r,!0)}else n=_f(n).createTextNode(u),n[Ft]=r,r.stateNode=n}return Nt(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(u=Yo(r),o!==null){if(n===null){if(!u)throw Error(a(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Ft]=r}else Vs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Nt(r),n=!1}else o=wm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(la(r),r):(la(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Nt(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Yo(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ft]=r}else Vs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Nt(r),f=!1}else f=wm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(la(r),r):(la(r),null)}return la(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),nf(r,r.updateQueue),Nt(r),null);case 4:return Dt(),n===null&&Pg(r.stateNode.containerInfo),Nt(r),null;case 10:return Vi(r.type),Nt(r),null;case 19:if(Z(Xt),u=r.memoizedState,u===null)return Nt(r),null;if(f=(r.flags&128)!==0,g=u.rendering,g===null)if(f)Lu(u,!1);else{if(qt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=Fh(n),g!==null){for(r.flags|=128,Lu(u,!1),n=g.updateQueue,r.updateQueue=n,nf(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)Zy(o,n),o=o.sibling;return ue(Xt,Xt.current&1|2),st&&ki(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&Kt()>lf&&(r.flags|=128,f=!0,Lu(u,!1),r.lanes=4194304)}else{if(!f)if(n=Fh(g),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,nf(r,n),Lu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!st)return Nt(r),null}else 2*Kt()-u.renderingStartTime>lf&&o!==536870912&&(r.flags|=128,f=!0,Lu(u,!1),r.lanes=4194304);u.isBackwards?(g.sibling=r.child,r.child=g):(n=u.last,n!==null?n.sibling=g:r.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Kt(),n.sibling=null,o=Xt.current,ue(Xt,f?o&1|2:o&1),st&&ki(r,u.treeForkCount),n):(Nt(r),null);case 22:case 23:return la(r),Lm(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),o=r.updateQueue,o!==null&&nf(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&Z(Bs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Vi(an),Nt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function L3(n,r){switch(Em(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Vi(an),Dt(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return wi(r),null;case 31:if(r.memoizedState!==null){if(la(r),r.alternate===null)throw Error(a(340));Vs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(la(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Vs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Z(Xt),null;case 4:return Dt(),null;case 10:return Vi(r.type),null;case 22:case 23:return la(r),Lm(),n!==null&&Z(Bs),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Vi(an),null;case 25:return null;default:return null}}function I_(n,r){switch(Em(r),r.tag){case 3:Vi(an),Dt();break;case 26:case 27:case 5:wi(r);break;case 4:Dt();break;case 31:r.memoizedState!==null&&la(r);break;case 13:la(r);break;case 19:Z(Xt);break;case 10:Vi(r.type);break;case 22:case 23:la(r),Lm(),n!==null&&Z(Bs);break;case 24:Vi(an)}}function Bu(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,_=o.inst;u=g(),_.destroy=u}o=o.next}while(o!==f)}}catch(E){_t(r,r.return,E)}}function Mr(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var _=u.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=r;var x=o,Y=E;try{Y()}catch(ee){_t(f,x,ee)}}}u=u.next}while(u!==g)}}catch(ee){_t(r,r.return,ee)}}function D_(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{y0(r,o)}catch(u){_t(n,n.return,u)}}}function z_(n,r,o){o.props=Ys(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){_t(n,r,u)}}function ju(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){_t(n,r,f)}}function ci(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){_t(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){_t(n,r,f)}else o.current=null}function R_(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){_t(n,n.return,f)}}function pg(n,r,o){try{var u=n.stateNode;s4(u,n.type,o,r),u[Qt]=r}catch(f){_t(n,n.return,f)}}function C_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Br(n.type)||n.tag===4}function yg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||C_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Br(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _g(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ja));else if(u!==4&&(u===27&&Br(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(_g(n,r,o),n=n.sibling;n!==null;)_g(n,r,o),n=n.sibling}function af(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&Br(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(af(n,r,o),n=n.sibling;n!==null;)af(n,r,o),n=n.sibling}function N_(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);wn(r,u,o),r[Ft]=n,r[Qt]=o}catch(g){_t(n,n.return,g)}}var Ui=!1,on=!1,vg=!1,M_=typeof WeakSet=="function"?WeakSet:Set,_n=null;function B3(n,r){if(n=n.containerInfo,jg=wf,n=Yy(n),fm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var _=0,E=-1,x=-1,Y=0,ee=0,ie=n,G=null;t:for(;;){for(var J;ie!==o||f!==0&&ie.nodeType!==3||(E=_+f),ie!==g||u!==0&&ie.nodeType!==3||(x=_+u),ie.nodeType===3&&(_+=ie.nodeValue.length),(J=ie.firstChild)!==null;)G=ie,ie=J;for(;;){if(ie===n)break t;if(G===o&&++Y===f&&(E=_),G===g&&++ee===u&&(x=_),(J=ie.nextSibling)!==null)break;ie=G,G=ie.parentNode}ie=J}o=E===-1||x===-1?null:{start:E,end:x}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ug={focusedElem:n,selectionRange:o},wf=!1,_n=r;_n!==null;)if(r=_n,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,_n=n;else for(;_n!==null;){switch(r=_n,g=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=r,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var we=Ys(o.type,f);n=u.getSnapshotBeforeUpdate(we,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Be){_t(o,o.return,Be)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)Yg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Yg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,_n=n;break}_n=r.return}}function x_(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Fi(n,o),u&4&&Bu(5,o);break;case 1:if(Fi(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(_){_t(o,o.return,_)}else{var f=Ys(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){_t(o,o.return,_)}}u&64&&D_(o),u&512&&ju(o,o.return);break;case 3:if(Fi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{y0(n,r)}catch(_){_t(o,o.return,_)}}break;case 27:r===null&&u&4&&N_(o);case 26:case 5:Fi(n,o),r===null&&u&4&&R_(o),u&512&&ju(o,o.return);break;case 12:Fi(n,o);break;case 31:Fi(n,o),u&4&&V_(n,o);break;case 13:Fi(n,o),u&4&&P_(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Q3.bind(null,o),m4(n,o))));break;case 22:if(u=o.memoizedState!==null||Ui,!u){r=r!==null&&r.memoizedState!==null||on,f=Ui;var g=on;Ui=u,(on=r)&&!g?Yi(n,o,(o.subtreeFlags&8772)!==0):Fi(n,o),Ui=f,on=g}break;case 30:break;default:Fi(n,o)}}function k_(n){var r=n.alternate;r!==null&&(n.alternate=null,k_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&be(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Vt=null,Kn=!1;function Hi(n,r,o){for(o=o.child;o!==null;)O_(n,r,o),o=o.sibling}function O_(n,r,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ta,o)}catch{}switch(o.tag){case 26:on||ci(o,r),Hi(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:on||ci(o,r);var u=Vt,f=Kn;Br(o.type)&&(Vt=o.stateNode,Kn=!1),Hi(n,r,o),Ju(o.stateNode),Vt=u,Kn=f;break;case 5:on||ci(o,r);case 6:if(u=Vt,f=Kn,Vt=null,Hi(n,r,o),Vt=u,Kn=f,Vt!==null)if(Kn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(o.stateNode)}catch(g){_t(o,r,g)}else try{Vt.removeChild(o.stateNode)}catch(g){_t(o,r,g)}break;case 18:Vt!==null&&(Kn?(n=Vt,Dv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),hl(n)):Dv(Vt,o.stateNode));break;case 4:u=Vt,f=Kn,Vt=o.stateNode.containerInfo,Kn=!0,Hi(n,r,o),Vt=u,Kn=f;break;case 0:case 11:case 14:case 15:Mr(2,o,r),on||Mr(4,o,r),Hi(n,r,o);break;case 1:on||(ci(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&z_(o,r,u)),Hi(n,r,o);break;case 21:Hi(n,r,o);break;case 22:on=(u=on)||o.memoizedState!==null,Hi(n,r,o),on=u;break;default:Hi(n,r,o)}}function V_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{hl(n)}catch(o){_t(r,r.return,o)}}}function P_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{hl(n)}catch(o){_t(r,r.return,o)}}function j3(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new M_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new M_),r;default:throw Error(a(435,n.tag))}}function rf(n,r){var o=j3(n);r.forEach(function(u){if(!o.has(u)){o.add(u);var f=J3.bind(null,n,u);u.then(f,f)}})}function Qn(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,_=r,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Br(E.type)){Vt=E.stateNode,Kn=!1;break e}break;case 5:Vt=E.stateNode,Kn=!1;break e;case 3:case 4:Vt=E.stateNode.containerInfo,Kn=!0;break e}E=E.return}if(Vt===null)throw Error(a(160));O_(g,_,f),Vt=null,Kn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)L_(r,n),r=r.sibling}var Ga=null;function L_(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qn(r,n),Jn(n),u&4&&(Mr(3,n,n.return),Bu(3,n),Mr(5,n,n.return));break;case 1:Qn(r,n),Jn(n),u&512&&(on||o===null||ci(o,o.return)),u&64&&Ui&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Ga;if(Qn(r,n),Jn(n),u&512&&(on||o===null||ci(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[X]||g[Ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),wn(g,u,o),g[Ft]=n,ot(g),u=g;break e;case"link":var _=Lv("link","href",f).get(u+(o.href||""));if(_){for(var E=0;E<_.length;E++)if(g=_[E],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(E,1);break t}}g=f.createElement(u),wn(g,u,o),f.head.appendChild(g);break;case"meta":if(_=Lv("meta","content",f).get(u+(o.content||""))){for(E=0;E<_.length;E++)if(g=_[E],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(E,1);break t}}g=f.createElement(u),wn(g,u,o),f.head.appendChild(g);break;default:throw Error(a(468,u))}g[Ft]=n,ot(g),u=g}n.stateNode=u}else Bv(f,n.type,n.stateNode);else n.stateNode=Pv(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?Bv(f,n.type,n.stateNode):Pv(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&pg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Qn(r,n),Jn(n),u&512&&(on||o===null||ci(o,o.return)),o!==null&&u&4&&pg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Qn(r,n),Jn(n),u&512&&(on||o===null||ci(o,o.return)),n.flags&32){f=n.stateNode;try{Gn(f,"")}catch(we){_t(n,n.return,we)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,pg(n,f,o!==null?o.memoizedProps:f)),u&1024&&(vg=!0);break;case 6:if(Qn(r,n),Jn(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(we){_t(n,n.return,we)}}break;case 3:if(Sf=null,f=Ga,Ga=vf(r.containerInfo),Qn(r,n),Ga=f,Jn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{hl(r.containerInfo)}catch(we){_t(n,n.return,we)}vg&&(vg=!1,B_(n));break;case 4:u=Ga,Ga=vf(n.stateNode.containerInfo),Qn(r,n),Jn(n),Ga=u;break;case 12:Qn(r,n),Jn(n);break;case 31:Qn(r,n),Jn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,rf(n,u)));break;case 13:Qn(r,n),Jn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(of=Kt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,rf(n,u)));break;case 22:f=n.memoizedState!==null;var x=o!==null&&o.memoizedState!==null,Y=Ui,ee=on;if(Ui=Y||f,on=ee||x,Qn(r,n),on=ee,Ui=Y,Jn(n),u&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||x||Ui||on||qs(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){x=o=r;try{if(g=x.stateNode,f)_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=x.stateNode;var ie=x.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(we){_t(x,x.return,we)}}}else if(r.tag===6){if(o===null){x=r;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(we){_t(x,x.return,we)}}}else if(r.tag===18){if(o===null){x=r;try{var J=x.stateNode;f?zv(J,!0):zv(x.stateNode,!1)}catch(we){_t(x,x.return,we)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,rf(n,o))));break;case 19:Qn(r,n),Jn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,rf(n,u)));break;case 30:break;case 21:break;default:Qn(r,n),Jn(n)}}function Jn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(C_(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,g=yg(n);af(n,g,f);break;case 5:var _=o.stateNode;o.flags&32&&(Gn(_,""),o.flags&=-33);var E=yg(n);af(n,E,_);break;case 3:case 4:var x=o.stateNode.containerInfo,Y=yg(n);_g(n,Y,x);break;default:throw Error(a(161))}}catch(ee){_t(n,n.return,ee)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function B_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;B_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Fi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)x_(n,r.alternate,r),r=r.sibling}function qs(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Mr(4,r,r.return),qs(r);break;case 1:ci(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&z_(r,r.return,o),qs(r);break;case 27:Ju(r.stateNode);case 26:case 5:ci(r,r.return),qs(r);break;case 22:r.memoizedState===null&&qs(r);break;case 30:qs(r);break;default:qs(r)}n=n.sibling}}function Yi(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,g=r,_=g.flags;switch(g.tag){case 0:case 11:case 15:Yi(f,g,o),Bu(4,g);break;case 1:if(Yi(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){_t(u,u.return,Y)}if(u=g,f=u.updateQueue,f!==null){var E=u.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)p0(x[f],E)}catch(Y){_t(u,u.return,Y)}}o&&_&64&&D_(g),ju(g,g.return);break;case 27:N_(g);case 26:case 5:Yi(f,g,o),o&&u===null&&_&4&&R_(g),ju(g,g.return);break;case 12:Yi(f,g,o);break;case 31:Yi(f,g,o),o&&_&4&&V_(f,g);break;case 13:Yi(f,g,o),o&&_&4&&P_(f,g);break;case 22:g.memoizedState===null&&Yi(f,g,o),ju(g,g.return);break;case 30:break;default:Yi(f,g,o)}r=r.sibling}}function bg(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Iu(o))}function Sg(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Iu(n))}function Ka(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)j_(n,r,o,u),r=r.sibling}function j_(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ka(n,r,o,u),f&2048&&Bu(9,r);break;case 1:Ka(n,r,o,u);break;case 3:Ka(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Iu(n)));break;case 12:if(f&2048){Ka(n,r,o,u),n=r.stateNode;try{var g=r.memoizedProps,_=g.id,E=g.onPostCommit;typeof E=="function"&&E(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){_t(r,r.return,x)}}else Ka(n,r,o,u);break;case 31:Ka(n,r,o,u);break;case 13:Ka(n,r,o,u);break;case 23:break;case 22:g=r.stateNode,_=r.alternate,r.memoizedState!==null?g._visibility&2?Ka(n,r,o,u):Uu(n,r):g._visibility&2?Ka(n,r,o,u):(g._visibility|=2,el(n,r,o,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&bg(_,r);break;case 24:Ka(n,r,o,u),f&2048&&Sg(r.alternate,r);break;default:Ka(n,r,o,u)}}function el(n,r,o,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=n,_=r,E=o,x=u,Y=_.flags;switch(_.tag){case 0:case 11:case 15:el(g,_,E,x,f),Bu(8,_);break;case 23:break;case 22:var ee=_.stateNode;_.memoizedState!==null?ee._visibility&2?el(g,_,E,x,f):Uu(g,_):(ee._visibility|=2,el(g,_,E,x,f)),f&&Y&2048&&bg(_.alternate,_);break;case 24:el(g,_,E,x,f),f&&Y&2048&&Sg(_.alternate,_);break;default:el(g,_,E,x,f)}r=r.sibling}}function Uu(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:Uu(o,u),f&2048&&bg(u.alternate,u);break;case 24:Uu(o,u),f&2048&&Sg(u.alternate,u);break;default:Uu(o,u)}r=r.sibling}}var Hu=8192;function tl(n,r,o){if(n.subtreeFlags&Hu)for(n=n.child;n!==null;)U_(n,r,o),n=n.sibling}function U_(n,r,o){switch(n.tag){case 26:tl(n,r,o),n.flags&Hu&&n.memoizedState!==null&&I4(o,Ga,n.memoizedState,n.memoizedProps);break;case 5:tl(n,r,o);break;case 3:case 4:var u=Ga;Ga=vf(n.stateNode.containerInfo),tl(n,r,o),Ga=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Hu,Hu=16777216,tl(n,r,o),Hu=u):tl(n,r,o));break;default:tl(n,r,o)}}function H_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Fu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];_n=u,Y_(u,n)}H_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)F_(n),n=n.sibling}function F_(n){switch(n.tag){case 0:case 11:case 15:Fu(n),n.flags&2048&&Mr(9,n,n.return);break;case 3:Fu(n);break;case 12:Fu(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,sf(n)):Fu(n);break;default:Fu(n)}}function sf(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];_n=u,Y_(u,n)}H_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Mr(8,r,r.return),sf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,sf(r));break;default:sf(r)}n=n.sibling}}function Y_(n,r){for(;_n!==null;){var o=_n;switch(o.tag){case 0:case 11:case 15:Mr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Iu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,_n=u;else e:for(o=n;_n!==null;){u=_n;var f=u.sibling,g=u.return;if(k_(u),u===o){_n=null;break e}if(f!==null){f.return=g,_n=f;break e}_n=g}}}var U3={getCacheForType:function(n){var r=En(an),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return En(an).controller.signal}},H3=typeof WeakMap=="function"?WeakMap:Map,dt=0,zt=null,Ze=null,tt=0,yt=0,ua=null,xr=!1,nl=!1,Tg=!1,qi=0,qt=0,kr=0,Gs=0,Eg=0,ca=0,al=0,Yu=null,$n=null,Ag=!1,of=0,q_=0,lf=1/0,uf=null,Or=null,mn=0,Vr=null,il=null,Gi=0,wg=0,Ig=null,G_=null,qu=0,Dg=null;function ha(){return(dt&2)!==0&&tt!==0?tt&-tt:L.T!==null?xg():wo()}function K_(){if(ca===0)if((tt&536870912)===0||st){var n=_a;_a<<=1,(_a&3932160)===0&&(_a=262144),ca=n}else ca=536870912;return n=oa.current,n!==null&&(n.flags|=32),ca}function Xn(n,r,o){(n===zt&&(yt===2||yt===9)||n.cancelPendingCommit!==null)&&(rl(n,0),Pr(n,tt,ca,!1)),ba(n,o),((dt&2)===0||n!==zt)&&(n===zt&&((dt&2)===0&&(Gs|=o),qt===4&&Pr(n,tt,ca,!1)),hi(n))}function Q_(n,r,o){if((dt&6)!==0)throw Error(a(327));var u=!o&&(r&127)===0&&(r&n.expiredLanes)===0||zn(n,r),f=u?q3(n,r):Rg(n,r,!0),g=u;do{if(f===0){nl&&!u&&Pr(n,r,0,!1);break}else{if(o=n.current.alternate,g&&!F3(o)){f=Rg(n,r,!1),g=!1;continue}if(f===2){if(g=r,n.errorRecoveryDisabledLanes&g)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var E=n;f=Yu;var x=E.current.memoizedState.isDehydrated;if(x&&(rl(E,_).flags|=256),_=Rg(E,_,!1),_!==2){if(Tg&&!x){E.errorRecoveryDisabledLanes|=g,Gs|=g,f=4;break e}g=$n,$n=f,g!==null&&($n===null?$n=g:$n.push.apply($n,g))}f=_}if(g=!1,f!==2)continue}}if(f===1){rl(n,0),Pr(n,r,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Pr(u,r,ca,!xr);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=of+300-Kt(),10<f)){if(Pr(u,r,ca,!xr),Yn(u,0,!0)!==0)break e;Gi=r,u.timeoutHandle=wv(J_.bind(null,u,o,$n,uf,Ag,r,ca,Gs,al,xr,g,"Throttled",-0,0),f);break e}J_(u,o,$n,uf,Ag,r,ca,Gs,al,xr,g,null,-0,0)}}break}while(!0);hi(n)}function J_(n,r,o,u,f,g,_,E,x,Y,ee,ie,G,J){if(n.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ja},U_(r,g,ie);var we=(g&62914560)===g?of-Kt():(g&4194048)===g?q_-Kt():0;if(we=D4(ie,we),we!==null){Gi=g,n.cancelPendingCommit=we(av.bind(null,n,r,g,o,u,f,_,E,x,ee,ie,null,G,J)),Pr(n,g,_,!Y);return}}av(n,r,g,o,u,f,_,E,x)}function F3(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!ra(g(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Pr(n,r,o,u){r&=~Eg,r&=~Gs,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var g=31-kt(f),_=1<<g;u[g]=-1,f&=~_}o!==0&&aa(n,o,r)}function cf(){return(dt&6)===0?(Gu(0),!1):!0}function zg(){if(Ze!==null){if(yt===0)var n=Ze.return;else n=Ze,Oi=Ps=null,Ym(n),Jo=null,zu=0,n=Ze;for(;n!==null;)I_(n.alternate,n),n=n.return;Ze=null}}function rl(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,u4(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Gi=0,zg(),zt=n,Ze=o=xi(n.current,null),tt=r,yt=0,ua=null,xr=!1,nl=zn(n,r),Tg=!1,al=ca=Eg=Gs=kr=qt=0,$n=Yu=null,Ag=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-kt(u),g=1<<f;r|=n[f],u&=~g}return qi=r,Ch(),o}function $_(n,r){Qe=null,L.H=Vu,r===Qo||r===Lh?(r=f0(),yt=3):r===Mm?(r=f0(),yt=4):yt=r===sg?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ua=r,Ze===null&&(qt=1,Wh(n,Ia(r,n.current)))}function X_(){var n=oa.current;return n===null?!0:(tt&4194048)===tt?Ca===null:(tt&62914560)===tt||(tt&536870912)!==0?n===Ca:!1}function W_(){var n=L.H;return L.H=Vu,n===null?Vu:n}function Z_(){var n=L.A;return L.A=U3,n}function hf(){qt=4,xr||(tt&4194048)!==tt&&oa.current!==null||(nl=!0),(kr&134217727)===0&&(Gs&134217727)===0||zt===null||Pr(zt,tt,ca,!1)}function Rg(n,r,o){var u=dt;dt|=2;var f=W_(),g=Z_();(zt!==n||tt!==r)&&(uf=null,rl(n,r)),r=!1;var _=qt;e:do try{if(yt!==0&&Ze!==null){var E=Ze,x=ua;switch(yt){case 8:zg(),_=6;break e;case 3:case 2:case 9:case 6:oa.current===null&&(r=!0);var Y=yt;if(yt=0,ua=null,sl(n,E,x,Y),o&&nl){_=0;break e}break;default:Y=yt,yt=0,ua=null,sl(n,E,x,Y)}}Y3(),_=qt;break}catch(ee){$_(n,ee)}while(!0);return r&&n.shellSuspendCounter++,Oi=Ps=null,dt=u,L.H=f,L.A=g,Ze===null&&(zt=null,tt=0,Ch()),_}function Y3(){for(;Ze!==null;)ev(Ze)}function q3(n,r){var o=dt;dt|=2;var u=W_(),f=Z_();zt!==n||tt!==r?(uf=null,lf=Kt()+500,rl(n,r)):nl=zn(n,r);e:do try{if(yt!==0&&Ze!==null){r=Ze;var g=ua;t:switch(yt){case 1:yt=0,ua=null,sl(n,r,g,1);break;case 2:case 9:if(c0(g)){yt=0,ua=null,tv(r);break}r=function(){yt!==2&&yt!==9||zt!==n||(yt=7),hi(n)},g.then(r,r);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:c0(g)?(yt=0,ua=null,tv(r)):(yt=0,ua=null,sl(n,r,g,7));break;case 5:var _=null;switch(Ze.tag){case 26:_=Ze.memoizedState;case 5:case 27:var E=Ze;if(_?jv(_):E.stateNode.complete){yt=0,ua=null;var x=E.sibling;if(x!==null)Ze=x;else{var Y=E.return;Y!==null?(Ze=Y,ff(Y)):Ze=null}break t}}yt=0,ua=null,sl(n,r,g,5);break;case 6:yt=0,ua=null,sl(n,r,g,6);break;case 8:zg(),qt=6;break e;default:throw Error(a(462))}}G3();break}catch(ee){$_(n,ee)}while(!0);return Oi=Ps=null,L.H=u,L.A=f,dt=o,Ze!==null?0:(zt=null,tt=0,Ch(),qt)}function G3(){for(;Ze!==null&&!lr();)ev(Ze)}function ev(n){var r=A_(n.alternate,n,qi);n.memoizedProps=n.pendingProps,r===null?ff(n):Ze=r}function tv(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=__(o,r,r.pendingProps,r.type,void 0,tt);break;case 11:r=__(o,r,r.pendingProps,r.type.render,r.ref,tt);break;case 5:Ym(r);default:I_(o,r),r=Ze=Zy(r,qi),r=A_(o,r,qi)}n.memoizedProps=n.pendingProps,r===null?ff(n):Ze=r}function sl(n,r,o,u){Oi=Ps=null,Ym(r),Jo=null,zu=0;var f=r.return;try{if(k3(n,f,r,o,tt)){qt=1,Wh(n,Ia(o,n.current)),Ze=null;return}}catch(g){if(f!==null)throw Ze=f,g;qt=1,Wh(n,Ia(o,n.current)),Ze=null;return}r.flags&32768?(st||u===1?n=!0:nl||(tt&536870912)!==0?n=!1:(xr=n=!0,(u===2||u===9||u===3||u===6)&&(u=oa.current,u!==null&&u.tag===13&&(u.flags|=16384))),nv(r,n)):ff(r)}function ff(n){var r=n;do{if((r.flags&32768)!==0){nv(r,xr);return}n=r.return;var o=P3(r.alternate,r,qi);if(o!==null){Ze=o;return}if(r=r.sibling,r!==null){Ze=r;return}Ze=r=n}while(r!==null);qt===0&&(qt=5)}function nv(n,r){do{var o=L3(n.alternate,n);if(o!==null){o.flags&=32767,Ze=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Ze=n;return}Ze=n=o}while(n!==null);qt=6,Ze=null}function av(n,r,o,u,f,g,_,E,x){n.cancelPendingCommit=null;do df();while(mn!==0);if((dt&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(g=r.lanes|r.childLanes,g|=ym,Ss(n,o,g,_,E,x),n===zt&&(Ze=zt=null,tt=0),il=r,Vr=n,Gi=o,wg=g,Ig=f,G_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,$3(Pa,function(){return lv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=L.T,L.T=null,f=re.p,re.p=2,_=dt,dt|=4;try{B3(n,r,o)}finally{dt=_,re.p=f,L.T=u}}mn=1,iv(),rv(),sv()}}function iv(){if(mn===1){mn=0;var n=Vr,r=il,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=L.T,L.T=null;var u=re.p;re.p=2;var f=dt;dt|=4;try{L_(r,n);var g=Ug,_=Yy(n.containerInfo),E=g.focusedElem,x=g.selectionRange;if(_!==E&&E&&E.ownerDocument&&Fy(E.ownerDocument.documentElement,E)){if(x!==null&&fm(E)){var Y=x.start,ee=x.end;if(ee===void 0&&(ee=Y),"selectionStart"in E)E.selectionStart=Y,E.selectionEnd=Math.min(ee,E.value.length);else{var ie=E.ownerDocument||document,G=ie&&ie.defaultView||window;if(G.getSelection){var J=G.getSelection(),we=E.textContent.length,Be=Math.min(x.start,we),It=x.end===void 0?Be:Math.min(x.end,we);!J.extend&&Be>It&&(_=It,It=Be,Be=_);var P=Hy(E,Be),V=Hy(E,It);if(P&&V&&(J.rangeCount!==1||J.anchorNode!==P.node||J.anchorOffset!==P.offset||J.focusNode!==V.node||J.focusOffset!==V.offset)){var F=ie.createRange();F.setStart(P.node,P.offset),J.removeAllRanges(),Be>It?(J.addRange(F),J.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),J.addRange(F))}}}}for(ie=[],J=E;J=J.parentNode;)J.nodeType===1&&ie.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var ae=ie[E];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}wf=!!jg,Ug=jg=null}finally{dt=f,re.p=u,L.T=o}}n.current=r,mn=2}}function rv(){if(mn===2){mn=0;var n=Vr,r=il,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=L.T,L.T=null;var u=re.p;re.p=2;var f=dt;dt|=4;try{x_(n,r.alternate,r)}finally{dt=f,re.p=u,L.T=o}}mn=3}}function sv(){if(mn===4||mn===3){mn=0,ys();var n=Vr,r=il,o=Gi,u=G_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?mn=5:(mn=0,il=Vr=null,ov(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Or=null),Ba(o),r=r.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ta,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=L.T,f=re.p,re.p=2,L.T=null;try{for(var g=n.onRecoverableError,_=0;_<u.length;_++){var E=u[_];g(E.value,{componentStack:E.stack})}}finally{L.T=r,re.p=f}}(Gi&3)!==0&&df(),hi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Dg?qu++:(qu=0,Dg=n):qu=0,Gu(0)}}function ov(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Iu(r)))}function df(){return iv(),rv(),sv(),lv()}function lv(){if(mn!==5)return!1;var n=Vr,r=wg;wg=0;var o=Ba(Gi),u=L.T,f=re.p;try{re.p=32>o?32:o,L.T=null,o=Ig,Ig=null;var g=Vr,_=Gi;if(mn=0,il=Vr=null,Gi=0,(dt&6)!==0)throw Error(a(331));var E=dt;if(dt|=4,F_(g.current),j_(g,g.current,_,o),dt=E,Gu(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ta,g)}catch{}return!0}finally{re.p=f,L.T=u,ov(n,r)}}function uv(n,r,o){r=Ia(o,r),r=rg(n.stateNode,r,2),n=Rr(n,r,2),n!==null&&(ba(n,2),hi(n))}function _t(n,r,o){if(n.tag===3)uv(n,n,o);else for(;r!==null;){if(r.tag===3){uv(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Or===null||!Or.has(u))){n=Ia(o,n),o=c_(2),u=Rr(r,o,2),u!==null&&(h_(o,u,r,n),ba(u,2),hi(u));break}}r=r.return}}function Cg(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new H3;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(Tg=!0,f.add(o),n=K3.bind(null,n,r,o),r.then(n,n))}function K3(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,zt===n&&(tt&o)===o&&(qt===4||qt===3&&(tt&62914560)===tt&&300>Kt()-of?(dt&2)===0&&rl(n,0):Eg|=o,al===tt&&(al=0)),hi(n)}function cv(n,r){r===0&&(r=Ao()),n=ks(n,r),n!==null&&(ba(n,r),hi(n))}function Q3(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),cv(n,o)}function J3(n,r){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(r),cv(n,o)}function $3(n,r){return Bt(n,r)}var mf=null,ol=null,Ng=!1,gf=!1,Mg=!1,Lr=0;function hi(n){n!==ol&&n.next===null&&(ol===null?mf=ol=n:ol=ol.next=n),gf=!0,Ng||(Ng=!0,W3())}function Gu(n,r){if(!Mg&&gf){Mg=!0;do for(var o=!1,u=mf;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var _=u.suspendedLanes,E=u.pingedLanes;g=(1<<31-kt(42|n)+1)-1,g&=f&~(_&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,mv(u,g))}else g=tt,g=Yn(u,u===zt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||zn(u,g)||(o=!0,mv(u,g));u=u.next}while(o);Mg=!1}}function X3(){hv()}function hv(){gf=Ng=!1;var n=0;Lr!==0&&l4()&&(n=Lr);for(var r=Kt(),o=null,u=mf;u!==null;){var f=u.next,g=fv(u,r);g===0?(u.next=null,o===null?mf=f:o.next=f,f===null&&(ol=o)):(o=u,(n!==0||(g&3)!==0)&&(gf=!0)),u=f}mn!==0&&mn!==5||Gu(n),Lr!==0&&(Lr=0)}function fv(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var _=31-kt(g),E=1<<_,x=f[_];x===-1?((E&o)===0||(E&u)!==0)&&(f[_]=Eo(E,r)):x<=r&&(n.expiredLanes|=E),g&=~E}if(r=zt,o=tt,o=Yn(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(yt===2||yt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Za(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||zn(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&Za(u),Ba(o)){case 2:case 8:o=cr;break;case 32:o=Pa;break;case 268435456:o=_s;break;default:o=Pa}return u=dv.bind(null,n),o=Bt(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&Za(u),n.callbackPriority=2,n.callbackNode=null,2}function dv(n,r){if(mn!==0&&mn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(df()&&n.callbackNode!==o)return null;var u=tt;return u=Yn(n,n===zt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Q_(n,u,r),fv(n,Kt()),n.callbackNode!=null&&n.callbackNode===o?dv.bind(null,n):null)}function mv(n,r){if(df())return null;Q_(n,r,!0)}function W3(){c4(function(){(dt&6)!==0?Bt(ur,X3):hv()})}function xg(){if(Lr===0){var n=Go;n===0&&(n=na,na<<=1,(na&261888)===0&&(na=256)),Lr=n}return Lr}function gv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:No(""+n)}function pv(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function Z3(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var g=gv((f[Qt]||null).action),_=u.submitter;_&&(r=(r=_[Qt]||null)?gv(r.formAction):_.getAttribute("formAction"),r!==null&&(g=r,_=null));var E=new ii("action","action",null,u,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Lr!==0){var x=_?pv(f,_):new FormData(f);Zm(o,{pending:!0,data:x,method:f.method,action:g},null,x)}}else typeof g=="function"&&(E.preventDefault(),x=_?pv(f,_):new FormData(f),Zm(o,{pending:!0,data:x,method:f.method,action:g},g,x))},currentTarget:f}]})}}for(var kg=0;kg<pm.length;kg++){var Og=pm[kg],e4=Og.toLowerCase(),t4=Og[0].toUpperCase()+Og.slice(1);qa(e4,"on"+t4)}qa(Ky,"onAnimationEnd"),qa(Qy,"onAnimationIteration"),qa(Jy,"onAnimationStart"),qa("dblclick","onDoubleClick"),qa("focusin","onFocus"),qa("focusout","onBlur"),qa(y3,"onTransitionRun"),qa(_3,"onTransitionStart"),qa(v3,"onTransitionCancel"),qa($y,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),Tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function yv(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(r)for(var _=u.length-1;0<=_;_--){var E=u[_],x=E.instance,Y=E.currentTarget;if(E=E.listener,x!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=Y;try{g(f)}catch(ee){Rh(ee)}f.currentTarget=null,g=x}else for(_=0;_<u.length;_++){if(E=u[_],x=E.instance,Y=E.currentTarget,E=E.listener,x!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=Y;try{g(f)}catch(ee){Rh(ee)}f.currentTarget=null,g=x}}}}function et(n,r){var o=r[dr];o===void 0&&(o=r[dr]=new Set);var u=n+"__bubble";o.has(u)||(_v(r,n,2,!1),o.add(u))}function Vg(n,r,o){var u=0;r&&(u|=4),_v(o,n,u,r)}var pf="_reactListening"+Math.random().toString(36).slice(2);function Pg(n){if(!n[pf]){n[pf]=!0,gt.forEach(function(o){o!=="selectionchange"&&(n4.has(o)||Vg(o,!1,n),Vg(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[pf]||(r[pf]=!0,Vg("selectionchange",!1,r))}}function _v(n,r,o,u){switch(Kv(r)){case 2:var f=C4;break;case 8:f=N4;break;default:f=Wg}o=f.bind(null,r,o,n),f=void 0,!Is||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function Lg(n,r,o,u,f){var g=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var E=u.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=u.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=ce(E),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){u=g=_;continue e}E=E.parentNode}}u=u.return}vr(function(){var Y=g,ee=Ta(o),ie=[];e:{var G=Xy.get(n);if(G!==void 0){var J=ii,we=n;switch(n){case"keypress":if(zs(o)===0)break e;case"keydown":case"keyup":J=Ih;break;case"focusin":we="focus",J=Cs;break;case"focusout":we="blur",J=Cs;break;case"beforeblur":case"afterblur":J=Cs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=y;break;case Ky:case Qy:case Jy:J=vh;break;case $y:J=w;break;case"scroll":case"scrollend":J=yu;break;case"wheel":J=K;break;case"copy":case"cut":case"paste":J=bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Mi;break;case"toggle":case"beforetoggle":J=Ke}var Be=(r&4)!==0,It=!Be&&(n==="scroll"||n==="scrollend"),P=Be?G!==null?G+"Capture":null:G;Be=[];for(var V=Y,F;V!==null;){var ae=V;if(F=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||F===null||P===null||(ae=Ua(V,P),ae!=null&&Be.push(Qu(V,ae,F))),It)break;V=V.return}0<Be.length&&(G=new J(G,we,null,o,ee),ie.push({event:G,listeners:Be}))}}if((r&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",G&&o!==mu&&(we=o.relatedTarget||o.fromElement)&&(ce(we)||we[Sa]))break e;if((J||G)&&(G=ee.window===ee?ee:(G=ee.ownerDocument)?G.defaultView||G.parentWindow:window,J?(we=o.relatedTarget||o.toElement,J=Y,we=we?ce(we):null,we!==null&&(It=l(we),Be=we.tag,we!==It||Be!==5&&Be!==27&&Be!==6)&&(we=null)):(J=null,we=Y),J!==we)){if(Be=_u,ae="onMouseLeave",P="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Be=Mi,ae="onPointerLeave",P="onPointerEnter",V="pointer"),It=J==null?G:Se(J),F=we==null?G:Se(we),G=new Be(ae,V+"leave",J,o,ee),G.target=It,G.relatedTarget=F,ae=null,ce(ee)===Y&&(Be=new Be(P,V+"enter",we,o,ee),Be.target=F,Be.relatedTarget=It,ae=Be),It=ae,J&&we)t:{for(Be=a4,P=J,V=we,F=0,ae=P;ae;ae=Be(ae))F++;ae=0;for(var ke=V;ke;ke=Be(ke))ae++;for(;0<F-ae;)P=Be(P),F--;for(;0<ae-F;)V=Be(V),ae--;for(;F--;){if(P===V||V!==null&&P===V.alternate){Be=P;break t}P=Be(P),V=Be(V)}Be=null}else Be=null;J!==null&&vv(ie,G,J,Be,!1),we!==null&&It!==null&&vv(ie,It,we,Be,!0)}}e:{if(G=Y?Se(Y):window,J=G.nodeName&&G.nodeName.toLowerCase(),J==="select"||J==="input"&&G.type==="file")var ut=Vy;else if(ky(G))if(Py)ut=m3;else{ut=f3;var ze=h3}else J=G.nodeName,!J||J.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?Y&&Co(Y.elementType)&&(ut=Vy):ut=d3;if(ut&&(ut=ut(n,Y))){Oy(ie,ut,o,ee);break e}ze&&ze(n,G,Y),n==="focusout"&&Y&&G.type==="number"&&Y.memoizedProps.value!=null&&hu(G,"number",G.value)}switch(ze=Y?Se(Y):window,n){case"focusin":(ky(ze)||ze.contentEditable==="true")&&(Lo=ze,dm=Y,Eu=null);break;case"focusout":Eu=dm=Lo=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,qy(ie,o,ee);break;case"selectionchange":if(p3)break;case"keydown":case"keyup":qy(ie,o,ee)}var Je;if(ft)e:{switch(n){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Po?Ns(n,o)&&(nt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(nt="onCompositionStart");nt&&(oi&&o.locale!=="ko"&&(Po||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Po&&(Je=pu()):(ai=ee,gu="value"in ai?ai.value:ai.textContent,Po=!0)),ze=yf(Y,nt),0<ze.length&&(nt=new si(nt,n,null,o,ee),ie.push({event:nt,listeners:ze}),Je?nt.data=Je:(Je=Vo(o),Je!==null&&(nt.data=Je)))),(Je=Aa?o3(n,o):l3(n,o))&&(nt=yf(Y,"onBeforeInput"),0<nt.length&&(ze=new si("onBeforeInput","beforeinput",null,o,ee),ie.push({event:ze,listeners:nt}),ze.data=Je)),Z3(ie,n,Y,o,ee)}yv(ie,r)})}function Qu(n,r,o){return{instance:n,listener:r,currentTarget:o}}function yf(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Ua(n,o),f!=null&&u.unshift(Qu(n,f,g)),f=Ua(n,r),f!=null&&u.push(Qu(n,f,g))),n.tag===3)return u;n=n.return}return[]}function a4(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function vv(n,r,o,u,f){for(var g=r._reactName,_=[];o!==null&&o!==u;){var E=o,x=E.alternate,Y=E.stateNode;if(E=E.tag,x!==null&&x===u)break;E!==5&&E!==26&&E!==27||Y===null||(x=Y,f?(Y=Ua(o,g),Y!=null&&_.unshift(Qu(o,Y,x))):f||(Y=Ua(o,g),Y!=null&&_.push(Qu(o,Y,x)))),o=o.return}_.length!==0&&n.push({event:r,listeners:_})}var i4=/\r\n?/g,r4=/\u0000|\uFFFD/g;function bv(n){return(typeof n=="string"?n:""+n).replace(i4,`
`).replace(r4,"")}function Sv(n,r){return r=bv(r),bv(n)===r}function wt(n,r,o,u,f,g){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Gn(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Gn(n,""+u);break;case"className":ia(n,"class",u);break;case"tabIndex":ia(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ia(n,o,u);break;case"style":du(n,u,g);break;case"data":if(r!=="object"){ia(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=No(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&wt(n,r,"name",f.name,f,null),wt(n,r,"formEncType",f.formEncType,f,null),wt(n,r,"formMethod",f.formMethod,f,null),wt(n,r,"formTarget",f.formTarget,f,null)):(wt(n,r,"encType",f.encType,f,null),wt(n,r,"method",f.method,f,null),wt(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=No(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ja);break;case"onScroll":u!=null&&et("scroll",n);break;case"onScrollEnd":u!=null&&et("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=No(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":et("beforetoggle",n),et("toggle",n),zo(n,"popover",u);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zo(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ph.get(o)||o,zo(n,o,u))}}function Bg(n,r,o,u,f,g){switch(o){case"style":du(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Gn(n,u):(typeof u=="number"||typeof u=="bigint")&&Gn(n,""+u);break;case"onScroll":u!=null&&et("scroll",n);break;case"onScrollEnd":u!=null&&et("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ja);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jt.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),g=n[Qt]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(r,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):zo(n,o,u)}}}function wn(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",n),et("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var _=o[g];if(_!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:wt(n,r,g,_,o,null)}}f&&wt(n,r,"srcSet",o.srcSet,o,null),u&&wt(n,r,"src",o.src,o,null);return;case"input":et("invalid",n);var E=g=_=f=null,x=null,Y=null;for(u in o)if(o.hasOwnProperty(u)){var ee=o[u];if(ee!=null)switch(u){case"name":f=ee;break;case"type":_=ee;break;case"checked":x=ee;break;case"defaultChecked":Y=ee;break;case"value":g=ee;break;case"defaultValue":E=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,r));break;default:wt(n,r,u,ee,o,null)}}dh(n,g,E,x,Y,_,f,!1);return;case"select":et("invalid",n),u=_=g=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":g=E;break;case"defaultValue":_=E;break;case"multiple":u=E;default:wt(n,r,f,E,o,null)}r=g,o=_,n.multiple=!!u,r!=null?gr(n,!!u,r,!1):o!=null&&gr(n,!!u,o,!0);return;case"textarea":et("invalid",n),g=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(E=o[_],E!=null))switch(_){case"value":u=E;break;case"defaultValue":f=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:wt(n,r,_,E,o,null)}pr(n,u,f,g);return;case"option":for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null)&&(x==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":wt(n,r,x,u,o,null));return;case"dialog":et("beforetoggle",n),et("toggle",n),et("cancel",n),et("close",n);break;case"iframe":case"object":et("load",n);break;case"video":case"audio":for(u=0;u<Ku.length;u++)et(Ku[u],n);break;case"image":et("error",n),et("load",n);break;case"details":et("toggle",n);break;case"embed":case"source":case"link":et("error",n),et("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:wt(n,r,Y,u,o,null)}return;default:if(Co(r)){for(ee in o)o.hasOwnProperty(ee)&&(u=o[ee],u!==void 0&&Bg(n,r,ee,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&wt(n,r,E,u,o,null))}function s4(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,_=null,E=null,x=null,Y=null,ee=null;for(J in o){var ie=o[J];if(o.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":x=ie;default:u.hasOwnProperty(J)||wt(n,r,J,null,u,ie)}}for(var G in u){var J=u[G];if(ie=o[G],u.hasOwnProperty(G)&&(J!=null||ie!=null))switch(G){case"type":g=J;break;case"name":f=J;break;case"checked":Y=J;break;case"defaultChecked":ee=J;break;case"value":_=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,r));break;default:J!==ie&&wt(n,r,G,J,u,ie)}}Ro(n,_,E,x,Y,ee,g,f);return;case"select":J=_=E=G=null;for(g in o)if(x=o[g],o.hasOwnProperty(g)&&x!=null)switch(g){case"value":break;case"multiple":J=x;default:u.hasOwnProperty(g)||wt(n,r,g,null,u,x)}for(f in u)if(g=u[f],x=o[f],u.hasOwnProperty(f)&&(g!=null||x!=null))switch(f){case"value":G=g;break;case"defaultValue":E=g;break;case"multiple":_=g;default:g!==x&&wt(n,r,f,g,u,x)}r=E,o=_,u=J,G!=null?gr(n,!!o,G,!1):!!u!=!!o&&(r!=null?gr(n,!!o,r,!0):gr(n,!!o,o?[]:"",!1));return;case"textarea":J=G=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:wt(n,r,E,null,u,f)}for(_ in u)if(f=u[_],g=o[_],u.hasOwnProperty(_)&&(f!=null||g!=null))switch(_){case"value":G=f;break;case"defaultValue":J=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==g&&wt(n,r,_,f,u,g)}mh(n,G,J);return;case"option":for(var we in o)G=o[we],o.hasOwnProperty(we)&&G!=null&&!u.hasOwnProperty(we)&&(we==="selected"?n.selected=!1:wt(n,r,we,null,u,G));for(x in u)G=u[x],J=o[x],u.hasOwnProperty(x)&&G!==J&&(G!=null||J!=null)&&(x==="selected"?n.selected=G&&typeof G!="function"&&typeof G!="symbol":wt(n,r,x,G,u,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in o)G=o[Be],o.hasOwnProperty(Be)&&G!=null&&!u.hasOwnProperty(Be)&&wt(n,r,Be,null,u,G);for(Y in u)if(G=u[Y],J=o[Y],u.hasOwnProperty(Y)&&G!==J&&(G!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(a(137,r));break;default:wt(n,r,Y,G,u,J)}return;default:if(Co(r)){for(var It in o)G=o[It],o.hasOwnProperty(It)&&G!==void 0&&!u.hasOwnProperty(It)&&Bg(n,r,It,void 0,u,G);for(ee in u)G=u[ee],J=o[ee],!u.hasOwnProperty(ee)||G===J||G===void 0&&J===void 0||Bg(n,r,ee,G,u,J);return}}for(var P in o)G=o[P],o.hasOwnProperty(P)&&G!=null&&!u.hasOwnProperty(P)&&wt(n,r,P,null,u,G);for(ie in u)G=u[ie],J=o[ie],!u.hasOwnProperty(ie)||G===J||G==null&&J==null||wt(n,r,ie,G,u,J)}function Tv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o4(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],g=f.transferSize,_=f.initiatorType,E=f.duration;if(g&&E&&Tv(_)){for(_=0,E=f.responseEnd,u+=1;u<o.length;u++){var x=o[u],Y=x.startTime;if(Y>E)break;var ee=x.transferSize,ie=x.initiatorType;ee&&Tv(ie)&&(x=x.responseEnd,_+=ee*(x<E?1:(E-Y)/(x-Y)))}if(--u,r+=8*(g+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var jg=null,Ug=null;function _f(n){return n.nodeType===9?n:n.ownerDocument}function Ev(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Av(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Hg(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Fg=null;function l4(){var n=window.event;return n&&n.type==="popstate"?n===Fg?!1:(Fg=n,!0):(Fg=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,u4=typeof clearTimeout=="function"?clearTimeout:void 0,Iv=typeof Promise=="function"?Promise:void 0,c4=typeof queueMicrotask=="function"?queueMicrotask:typeof Iv<"u"?function(n){return Iv.resolve(null).then(n).catch(h4)}:wv;function h4(n){setTimeout(function(){throw n})}function Br(n){return n==="head"}function Dv(n,r){var o=r,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),hl(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ju(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Ju(o);for(var g=o.firstChild;g;){var _=g.nextSibling,E=g.nodeName;g[X]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=_}}else o==="body"&&Ju(n.ownerDocument.body);o=f}while(o);hl(r)}function zv(n,r){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Yg(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Yg(o),be(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function f4(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[X])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Na(n.nextSibling),n===null)break}return null}function d4(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Na(n.nextSibling),n===null))return null;return n}function Rv(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Na(n.nextSibling),n===null))return null;return n}function qg(n){return n.data==="$?"||n.data==="$~"}function Gg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function m4(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Na(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Kg=null;function Cv(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Na(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function Nv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function Mv(n,r,o){switch(r=_f(o),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Ju(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);be(n)}var Ma=new Map,xv=new Set;function vf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ki=re.d;re.d={f:g4,r:p4,D:y4,C:_4,L:v4,m:b4,X:T4,S:S4,M:E4};function g4(){var n=Ki.f(),r=cf();return n||r}function p4(n){var r=Me(n);r!==null&&r.tag===5&&r.type==="form"?$0(r):Ki.r(n)}var ll=typeof document>"u"?null:document;function kv(n,r,o){var u=ll;if(u&&typeof r=="string"&&r){var f=qn(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),xv.has(f)||(xv.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),wn(r,"link",n),ot(r),u.head.appendChild(r)))}}function y4(n){Ki.D(n),kv("dns-prefetch",n,null)}function _4(n,r){Ki.C(n,r),kv("preconnect",n,r)}function v4(n,r,o){Ki.L(n,r,o);var u=ll;if(u&&n&&r){var f='link[rel="preload"][as="'+qn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+qn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+qn(o.imageSizes)+'"]')):f+='[href="'+qn(n)+'"]';var g=f;switch(r){case"style":g=ul(n);break;case"script":g=cl(n)}Ma.has(g)||(n=S({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Ma.set(g,n),u.querySelector(f)!==null||r==="style"&&u.querySelector($u(g))||r==="script"&&u.querySelector(Xu(g))||(r=u.createElement("link"),wn(r,"link",n),ot(r),u.head.appendChild(r)))}}function b4(n,r){Ki.m(n,r);var o=ll;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+qn(u)+'"][href="'+qn(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=cl(n)}if(!Ma.has(g)&&(n=S({rel:"modulepreload",href:n},r),Ma.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Xu(g)))return}u=o.createElement("link"),wn(u,"link",n),ot(u),o.head.appendChild(u)}}}function S4(n,r,o){Ki.S(n,r,o);var u=ll;if(u&&n){var f=qe(u).hoistableStyles,g=ul(n);r=r||"default";var _=f.get(g);if(!_){var E={loading:0,preload:null};if(_=u.querySelector($u(g)))E.loading=5;else{n=S({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Ma.get(g))&&Qg(n,o);var x=_=u.createElement("link");ot(x),wn(x,"link",n),x._p=new Promise(function(Y,ee){x.onload=Y,x.onerror=ee}),x.addEventListener("load",function(){E.loading|=1}),x.addEventListener("error",function(){E.loading|=2}),E.loading|=4,bf(_,r,u)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(g,_)}}}function T4(n,r){Ki.X(n,r);var o=ll;if(o&&n){var u=qe(o).hoistableScripts,f=cl(n),g=u.get(f);g||(g=o.querySelector(Xu(f)),g||(n=S({src:n,async:!0},r),(r=Ma.get(f))&&Jg(n,r),g=o.createElement("script"),ot(g),wn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function E4(n,r){Ki.M(n,r);var o=ll;if(o&&n){var u=qe(o).hoistableScripts,f=cl(n),g=u.get(f);g||(g=o.querySelector(Xu(f)),g||(n=S({src:n,async:!0,type:"module"},r),(r=Ma.get(f))&&Jg(n,r),g=o.createElement("script"),ot(g),wn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function Ov(n,r,o,u){var f=(f=Ne.current)?vf(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=ul(o.href),o=qe(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ul(o.href);var g=qe(f).hoistableStyles,_=g.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,_),(g=f.querySelector($u(n)))&&!g._p&&(_.instance=g,_.state.loading=5),Ma.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ma.set(n,o),g||A4(f,n,o,_.state))),r&&u===null)throw Error(a(528,""));return _}if(r&&u!==null)throw Error(a(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=cl(o),o=qe(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function ul(n){return'href="'+qn(n)+'"'}function $u(n){return'link[rel="stylesheet"]['+n+"]"}function Vv(n){return S({},n,{"data-precedence":n.precedence,precedence:null})}function A4(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),wn(r,"link",o),ot(r),n.head.appendChild(r))}function cl(n){return'[src="'+qn(n)+'"]'}function Xu(n){return"script[async]"+n}function Pv(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+qn(o.href)+'"]');if(u)return r.instance=u,ot(u),u;var f=S({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ot(u),wn(u,"style",f),bf(u,o.precedence,n),r.instance=u;case"stylesheet":f=ul(o.href);var g=n.querySelector($u(f));if(g)return r.state.loading|=4,r.instance=g,ot(g),g;u=Vv(o),(f=Ma.get(f))&&Qg(u,f),g=(n.ownerDocument||n).createElement("link"),ot(g);var _=g;return _._p=new Promise(function(E,x){_.onload=E,_.onerror=x}),wn(g,"link",u),r.state.loading|=4,bf(g,o.precedence,n),r.instance=g;case"script":return g=cl(o.src),(f=n.querySelector(Xu(g)))?(r.instance=f,ot(f),f):(u=o,(f=Ma.get(g))&&(u=S({},o),Jg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),ot(f),wn(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,bf(u,o.precedence,n));return r.instance}function bf(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,_=0;_<u.length;_++){var E=u[_];if(E.dataset.precedence===r)g=E;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Qg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Jg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Sf=null;function Lv(n,r,o){if(Sf===null){var u=new Map,f=Sf=new Map;f.set(o,u)}else f=Sf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[X]||g[Ft]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var _=g.getAttribute(r)||"";_=n+_;var E=u.get(_);E?E.push(g):u.set(_,[g])}}return u}function Bv(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function w4(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function I4(n,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ul(u.href),g=r.querySelector($u(f));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Tf.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=g,ot(g);return}g=r.ownerDocument||r,u=Vv(u),(f=Ma.get(f))&&Qg(u,f),g=g.createElement("link"),ot(g);var _=g;_._p=new Promise(function(E,x){_.onload=E,_.onerror=x}),wn(g,"link",u),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Tf.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var $g=0;function D4(n,r){return n.stylesheets&&n.count===0&&Af(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Af(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+r);0<n.imgBytes&&$g===0&&($g=62500*o4());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Af(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>$g?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ef=null;function Af(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ef=new Map,r.forEach(z4,n),Ef=null,Tf.call(n))}function z4(n,r){if(!(r.state.loading&4)){var o=Ef.get(n);if(o)var u=o.get(null);else{o=new Map,Ef.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var _=f[g];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=r.instance,_=f.getAttribute("data-precedence"),g=o.get(_)||u,g===u&&o.set(null,f),o.set(_,f),this.count++,u=Tf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Wu={$$typeof:Q,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function R4(n,r,o,u,f,g,_,E,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.hiddenUpdates=va(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Uv(n,r,o,u,f,g,_,E,x,Y,ee,ie){return n=new R4(n,r,o,_,x,Y,ee,ie,E),r=1,g===!0&&(r|=24),g=sa(3,null,null,r),n.current=g,g.stateNode=n,r=Rm(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:r},xm(g),n}function Hv(n){return n?(n=Uo,n):Uo}function Fv(n,r,o,u,f,g){f=Hv(f),u.context===null?u.context=f:u.pendingContext=f,u=zr(r),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Rr(n,u,r),o!==null&&(Xn(o,n,r),Cu(o,n,r))}function Yv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Xg(n,r){Yv(n,r),(n=n.alternate)&&Yv(n,r)}function qv(n){if(n.tag===13||n.tag===31){var r=ks(n,67108864);r!==null&&Xn(r,n,67108864),Xg(n,67108864)}}function Gv(n){if(n.tag===13||n.tag===31){var r=ha();r=zi(r);var o=ks(n,r);o!==null&&Xn(o,n,r),Xg(n,r)}}var wf=!0;function C4(n,r,o,u){var f=L.T;L.T=null;var g=re.p;try{re.p=2,Wg(n,r,o,u)}finally{re.p=g,L.T=f}}function N4(n,r,o,u){var f=L.T;L.T=null;var g=re.p;try{re.p=8,Wg(n,r,o,u)}finally{re.p=g,L.T=f}}function Wg(n,r,o,u){if(wf){var f=Zg(u);if(f===null)Lg(n,r,u,If,o),Qv(n,u);else if(x4(f,n,r,o,u))u.stopPropagation();else if(Qv(n,u),r&4&&-1<M4.indexOf(n)){for(;f!==null;){var g=Me(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var _=Fn(g.pendingLanes);if(_!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var x=1<<31-kt(_);E.entanglements[1]|=x,_&=~x}hi(g),(dt&6)===0&&(lf=Kt()+500,Gu(0))}}break;case 31:case 13:E=ks(g,2),E!==null&&Xn(E,g,2),cf(),Xg(g,2)}if(g=Zg(u),g===null&&Lg(n,r,u,If,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else Lg(n,r,u,null,o)}}function Zg(n){return n=Ta(n),ep(n)}var If=null;function ep(n){if(If=null,n=ce(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===31){if(n=d(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return If=n,null}function Kv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ei()){case ur:return 2;case cr:return 8;case Pa:case To:return 32;case _s:return 268435456;default:return 32}default:return 32}}var tp=!1,jr=null,Ur=null,Hr=null,Zu=new Map,ec=new Map,Fr=[],M4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qv(n,r){switch(n){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":Zu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(r.pointerId)}}function tc(n,r,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Me(r),r!==null&&qv(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function x4(n,r,o,u,f){switch(r){case"focusin":return jr=tc(jr,n,r,o,u,f),!0;case"dragenter":return Ur=tc(Ur,n,r,o,u,f),!0;case"mouseover":return Hr=tc(Hr,n,r,o,u,f),!0;case"pointerover":var g=f.pointerId;return Zu.set(g,tc(Zu.get(g)||null,n,r,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,ec.set(g,tc(ec.get(g)||null,n,r,o,u,f)),!0}return!1}function Jv(n){var r=ce(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,Vn(n.priority,function(){Gv(o)});return}}else if(r===31){if(r=d(o),r!==null){n.blockedOn=r,Vn(n.priority,function(){Gv(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Df(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Zg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);mu=u,o.target.dispatchEvent(u),mu=null}else return r=Me(o),r!==null&&qv(r),n.blockedOn=o,!1;r.shift()}return!0}function $v(n,r,o){Df(n)&&o.delete(r)}function k4(){tp=!1,jr!==null&&Df(jr)&&(jr=null),Ur!==null&&Df(Ur)&&(Ur=null),Hr!==null&&Df(Hr)&&(Hr=null),Zu.forEach($v),ec.forEach($v)}function zf(n,r){n.blockedOn===r&&(n.blockedOn=null,tp||(tp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,k4)))}var Rf=null;function Xv(n){Rf!==n&&(Rf=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Rf===n&&(Rf=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(ep(u||o)===null)continue;break}var g=Me(o);g!==null&&(n.splice(r,3),r-=3,Zm(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function hl(n){function r(x){return zf(x,n)}jr!==null&&zf(jr,n),Ur!==null&&zf(Ur,n),Hr!==null&&zf(Hr,n),Zu.forEach(r),ec.forEach(r);for(var o=0;o<Fr.length;o++){var u=Fr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Fr.length&&(o=Fr[0],o.blockedOn===null);)Jv(o),o.blockedOn===null&&Fr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],_=f[Qt]||null;if(typeof g=="function")_||Xv(o);else if(_){var E=null;if(g&&g.hasAttribute("formAction")){if(f=g,_=g[Qt]||null)E=_.formAction;else if(ep(f)!==null)continue}else E=_.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),Xv(o)}}}function Wv(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function np(n){this._internalRoot=n}Cf.prototype.render=np.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var o=r.current,u=ha();Fv(o,u,n,r,null,null)},Cf.prototype.unmount=np.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Fv(n.current,2,null,n,null,null),cf(),r[Sa]=null}};function Cf(n){this._internalRoot=n}Cf.prototype.unstable_scheduleHydration=function(n){if(n){var r=wo();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Fr.length&&r!==0&&r<Fr[o].priority;o++);Fr.splice(o,0,n),o===0&&Jv(n)}};var Zv=e.version;if(Zv!=="19.2.3")throw Error(a(527,Zv,"19.2.3"));re.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var O4={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{ta=Nf.inject(O4),tn=Nf}catch{}}return ac.createRoot=function(n,r){if(!s(n))throw Error(a(299));var o=!1,u="",f=s_,g=o_,_=l_;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Uv(n,1,!1,null,null,o,u,null,f,g,_,Wv),n[Sa]=r.current,Pg(n),new np(r)},ac.hydrateRoot=function(n,r,o){if(!s(n))throw Error(a(299));var u=!1,f="",g=s_,_=o_,E=l_,x=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(x=o.formState)),r=Uv(n,1,!0,r,o??null,u,f,x,g,_,E,Wv),r.context=Hv(null),o=r.current,u=ha(),u=zi(u),f=zr(u),f.callback=null,Rr(o,f,u),o=u,r.current.lanes=o,ba(r,o),hi(r),n[Sa]=r.current,Pg(n),new Cf(r)},ac.version="19.2.3",ac}var u2;function q4(){if(u2)return rp.exports;u2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),rp.exports=Y4(),rp.exports}var G4=q4();const K4=SS(G4);var Ks={},ic={},c2;function TS(){if(c2)return ic;c2=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.distance=void 0;var i=function(e,t){var a;if(e.length===0)return t.length;if(t.length===0)return e.length;e.length>t.length&&(a=[t,e],e=a[0],t=a[1]);for(var s=[],l=0;l<=e.length;l++)s[l]=l;for(var l=1;l<=t.length;l++){for(var c=l,d=1;d<=e.length;d++){var m=void 0;t.charAt(l-1)===e.charAt(d-1)?m=s[d-1]:m=Math.min(s[d-1]+1,c+1,s[d]+1),s[d-1]=c,c=m}s[e.length]=c}return s[e.length]};return ic.distance=i,ic}var rc={},h2;function Q4(){if(h2)return rc;h2=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.closestMatch=void 0;var i=TS(),e=function(t,a,s){if(s===void 0&&(s=!1),a.length===0)return null;for(var l=[],c=[],d=0;d<a.length;d++)l.push((0,i.distance)(t,a[d]));for(var m=Math.min.apply(Math,l),d=0;d<l.length;d++)l[d]===m&&c.push(a[d]);return s?c:c[0]};return rc.closestMatch=e,rc}var f2;function J4(){if(f2)return Ks;f2=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.closestMatch=Ks.distance=void 0;var i=TS(),e=Q4();return Ks.distance=i.distance,Ks.closestMatch=e.closestMatch,Ks}J4();function Np(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=i[t];return a}function $4(i){if(Array.isArray(i))return Np(i)}function X4(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function W4(i,e,t){return e=ld(e),sw(i,AS()?Reflect.construct(e,t||[],ld(i).constructor):e.apply(i,t))}function Ei(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function d2(i,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function Ai(i,e,t){return e&&d2(i.prototype,e),t&&d2(i,t),i}function Z4(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ld(i){return ld=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ld(i)}function ew(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e&&Mp(i,e)}function mi(i,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](i):i instanceof e}function tw(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function nw(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function aw(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),a.forEach(function(s){Z4(i,s,t[s])})}return i}function iw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t.push.apply(t,a)}return t}function rw(i,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):iw(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))}),i}function sw(i,e){return e&&(ES(e)==="object"||typeof e=="function")?e:X4(i)}function Mp(i,e){return Mp=Object.setPrototypeOf||function(a,s){return a.__proto__=s,a},Mp(i,e)}function m2(i){return $4(i)||tw(i)||ow(i)||nw()}function ES(i){"@swc/helpers - typeof";return i&&typeof Symbol<"u"&&i.constructor===Symbol?"symbol":typeof i}function ow(i,e){if(i){if(typeof i=="string")return Np(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Np(i,e)}}function AS(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AS=function(){return!!i})()}var g2=864e5,p2=719163,lw=new Date(0).getTimezoneOffset(),Xe=(function(){function i(){Ei(this,i)}return Ai(i,null,[{key:"toInt",value:(function(t){return Math.floor(t)})},{key:"toSuffixed",value:(function(t){var a=t.toString(),s="th";if(a.length===1||a[a.length-2]!=="1")switch(a[a.length-1]){case"1":s="st";break;case"2":s="nd";break;case"3":s="rd";break}return a+s})},{key:"absSd",value:(function(t){var a=t.valueOf()-t.getTimezoneOffset()*6e4,s=Math.floor(a/g2);return p2+s})},{key:"sdFromAbs",value:(function(t){var a=lw>0?1:0,s=t-p2+a;return new Date(s*g2)})},{key:"totalMinutes",value:(function(t){return t?t.hour*60+t.minute:0})},{key:"totalSeconds",value:(function(t){return t?i.totalMinutes(t)*60+(t.second||0):0})},{key:"fixTime",value:(function(t){for(var a={hour:t.hour,minute:t.minute,second:t.second||0};a.second>=60;)a.minute+=1,a.second-=60;for(;a.second<0;)a.minute-=1,a.second+=60;for(;a.minute<0;)a.minute+=60,a.hour--;for(;a.minute>=60;)a.minute-=60,a.hour++;return a.hour<0&&(a.hour=24+a.hour%24),a.hour>23&&(a.hour=a.hour%24),a})},{key:"addMinutes",value:(function(t,a){return t&&i.fixTime({hour:t.hour,minute:t.minute+(a||0),second:t.second})})},{key:"addSeconds",value:(function(t,a){return i.fixTime({hour:t.hour,minute:t.minute,second:(t.second||0)+a})})},{key:"timeDiff",value:(function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=i.totalSeconds(t),c=i.totalSeconds(a),d=i.fixTime({hour:0,minute:0,second:l<=c?c-l:s?l-c:86400-l+c});return rw(aw({},d),{sign:l<=c||!s?1:-1})})},{key:"currUtcOffset",value:(function(){var t=new Date,a=new Date(t.getFullYear(),0,1),s=new Date(t.getFullYear(),6,1);return-i.toInt(Math.max(a.getTimezoneOffset(),s.getTimezoneOffset())/60)})},{key:"isDateDST",value:(function(t){return-i.toInt(t.getTimezoneOffset()/60)!==i.currUtcOffset()})},{key:"isUSA_DST",value:function(t){var a=t.getFullYear(),s=t.getMonth()+1,l=t.getDate(),c=t.getHours();if(s<3||s==12)return!1;if(s>3&&s<11)return!0;if(s===3){var d=new Date(a,2,1).getDay(),m=d==0?8:7-(d+7)%7+8;return l>m||l===m&&c>=2}else{var p=new Date(a,10,1).getDay(),v=p===0?1:7-(p+7)%7+1;return l<v||l===v&&c<2}}},{key:"isIsrael_DST",value:function(t){var a=t.getFullYear(),s=t.getMonth()+1,l=t.getDate(),c=t.getHours();if(s>10||s<3)return!1;if(s>3&&s<10)return!0;if(s===3){var d=31-new Date(a,2,31).getDay()-2;return l>d||l===d&&c>=2}else{var m=31-new Date(a,9,31).getDay();return l<m||l===m&&c<2}}},{key:"isDST",value:(function(t,a){return t.UTCOffset===i.currUtcOffset()?i.isDateDST(a):t.Israel?i.isIsrael_DST(a):i.isUSA_DST(a)})},{key:"has",value:(function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return s.length===1&&(Array.isArray(s[0])||typeof s[0]=="string"||mi(s[0],String))?s[0].includes(t):s.includes(t)})},{key:"isSecularLeapYear",value:function(t){return!(t%400)||!!(t%100)&&!(t%4)}},{key:"isValidDate",value:function(t){return mi(t,Date)&&!isNaN(t.valueOf())}},{key:"isString",value:function(t){return typeof t=="string"||mi(t,String)}},{key:"isNumber",value:function(t){return typeof t=="number"||mi(t,Number)}}]),i})(),wS=(function(){function i(){Ei(this,i)}return Ai(i,null,[{key:"getSunTimes",value:(function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l;if(t.Abs)l=t.Abs,t=t.getDate();else{if((typeof t=="string"||mi(t,String))&&(t=new Date(t)),!Xe.isValidDate(t))throw"Zmanim.getSunTimes: supplied date parameter cannot be converted to a Date";l=Xe.absSd(t)}var c="".concat(l,"|").concat(a.Name,"|").concat(a.Latitude,"|").concat(a.Longitude,"|").concat(a.Elevation,"|").concat(s);if(i._sunTimesCache.has(c))return i._sunTimesCache.get(c);var d,m,p=90,v=50,S=0,D=0,k=0,H=0,q=0,$=0,W=0,le=0,Q=0,fe=0,he=0,ne=0,A=0,I=0,z=0,C=0,N=0,O=0,R=0,xe=0,We=0,L=0,re=i.dayOfYear(t),de=6356900,je=i.degToDec(p,v)+i.radToDeg(Math.acos(de/(de+(s?a.Elevation:0))));if(p=Math.floor(je),v=(je-p)*60,$=Math.cos(.01745*i.degToDec(p,v)),D=a.Longitude,S=D/15,k=a.Latitude,H=Math.cos(.01745*k),q=Math.sin(.01745*k),R=re+(6+S)/24,xe=re+(18+S)/24,Q=i.M(R),he=i.L(Q),fe=i.M(xe),ne=i.L(fe),A=57.29578*Math.atan(.91746*Math.tan(.01745*he)),I=57.29578*Math.atan(.91746*Math.tan(.01745*ne)),Math.abs(A+360-he)>90&&(A+=180),A>360&&(A-=360),Math.abs(I+360-ne)>90&&(I+=180),I>360&&(I-=360),z=A/15,W=.39782*Math.sin(.01745*he),le=Math.sqrt(1-W*W),N=($-W*q)/(le*H),C=I/15,W=.39782*Math.sin(.01745*ne),le=Math.sqrt(1-W*W),O=($-W*q)/(le*H),Math.abs(N)<=1&&(N=57.29578*Math.acos(N),We=(360-N)/15+z+i.adj(R)+S,d=i.timeAdj(We+a.UTCOffset,t,a),d.hour>12&&(d.hour-=12)),Math.abs(O)<=1&&(O=57.29578*Math.acos(O),L=N/15+C+i.adj(xe)+S,m=i.timeAdj(L+a.UTCOffset,t,a),m.hour>0&&m.hour<12&&(m.hour+=12)),!d||!m){var Ee=typeof t.toDateString=="function"?t.toDateString():t.toString();throw new Error('Zmanim Calculation Error: The sun does not rise or set at location "'.concat(a.Name,'" (Lat: ').concat(a.Latitude,") on ").concat(Ee,". The location may be in a Polar region (Polar Night/Day)."))}var M={sunrise:d,sunset:m};return i._sunTimesCache.set(c,M),i._sunTimesCache.size>2e3&&i._sunTimesCache.clear(),M})},{key:"getChatzos",value:(function(t,a){return i.getChatzosFromSuntimes(i.getSunTimes(t,a,!1))})},{key:"getChatzosFromSuntimes",value:(function(t){var a=t.sunrise,s=t.sunset;if(a===void 0||isNaN(a.hour)||s===void 0||isNaN(s.hour))return{hour:NaN,minute:NaN};var l=Xe.toInt((Xe.totalSeconds(s)-Xe.totalSeconds(a))/2);return Xe.addSeconds(a,l)})},{key:"getShaaZmanis",value:(function(t,a,s){return i.getShaaZmanisFromSunTimes(i.getSunTimes(t,a,!1),s)})},{key:"getShaaZmanisFromSunTimes",value:(function(t,a){if(!t||!t.sunrise||!t.sunset)return 0;var s=t.sunrise,l=t.sunset;return!s||isNaN(s.hour)||!l||isNaN(l.hour)?NaN:(a&&(s=Xe.addMinutes(s,-a),l=Xe.addMinutes(l,a)),(Xe.totalSeconds(l)-Xe.totalSeconds(s))/720)})},{key:"getShaaZmanisMga",value:(function(t,a){var s=a?90:72,l=t.sunrise&&Xe.addMinutes(t.sunrise,-s),c=t.sunset&&Xe.addMinutes(t.sunset,s);return!l||isNaN(l.hour)||!c||isNaN(c.hour)?NaN:(Xe.totalSeconds(c)-Xe.totalSeconds(l))/720})},{key:"getCandleLighting",value:(function(t,a){return i.getCandleLightingFromSunTimes(i.getSunTimes(t,a),a)})},{key:"getCandleLightingFromSunTimes",value:(function(t,a){return t.sunset&&i.getCandleLightingFromSunset(t.sunset,a)})},{key:"getCandleLightingFromSunset",value:(function(t,a){return Xe.addMinutes(t,-(a.CandleLighting||0))})},{key:"dayOfYear",value:(function(t){var a=t.getMonth(),s=function(){return Xe.isSecularLeapYear(t.getFullYear())},l=[0,1,32,60,91,121,152,182,213,244,274,305,335];return l[a+1]+t.getDate()+(a>1&&s()?1:0)})},{key:"degToDec",value:(function(t,a){return t+a/60})},{key:"M",value:(function(t){return .9856*t-3.251})},{key:"L",value:(function(t){return t+1.916*Math.sin(.01745*t)+.02*Math.sin(2*.01745*t)+282.565})},{key:"adj",value:(function(t){return-.06571*t-6.62})},{key:"radToDeg",value:(function(t){return 57.29578*t})},{key:"timeAdj",value:(function(t,a,s){t<0&&(t+=24);var l=Xe.toInt(t),c=(t-l)*60+.5,d=Xe.toInt(c),m=Math.round(60*(c-d));return Xe.isDST(s,a)&&l++,Xe.fixTime({hour:l,minute:d,second:m})})}]),i})();wS._sunTimesCache=new Map;var Ja=wS,bn=(function(){function i(e,t){if(Ei(this,i),e.Month===7&&e.Day>=15&&e.Day<(t?23:24)){this.sedras=[i.sedraList[53]];return}var a=[],s=i.getSedraOrder(e.Year,t),l=e.Abs,c,d;if(l=i.getDayOnOrBefore(6,l+6),d=(l-s.firstSatInYear)/7,s.sedraArray&&d>=s.sedraArray.length){var m=s.sedraArray[s.sedraArray.length-1];m<0?c=-m+2:c=m+1}else c=s.sedraArray?s.sedraArray[d]:-1;if(c>=0)a=[i.sedraList[c]];else{var p=-c;a=[i.sedraList[p],i.sedraList[p+1]]}this.sedras=a}return Ai(i,[{key:"toString",value:function(){return this.sedras.length>0&&this.sedras.map(function(t){return t.eng}).join(" - ")}},{key:"toStringHeb",value:function(){return this.sedras.length>0&&this.sedras.map(function(t){return t.heb}).join(" - ")}}],[{key:"getDayOnOrBefore",value:function(t,a){return a-(a-t)%7}},{key:"getSedraOrder",value:function(t,a){if(i.lastCalculatedYear!=null&&i.lastCalculatedYear.year===t&&i.lastCalculatedYear.israel===a)return i.lastCalculatedYear;var s=Te.isLongCheshvan(t),l=Te.isShortKislev(t),c=Te.absJd(t,7,1),d=Math.abs(c%7),m=i.getDayOnOrBefore(6,c+6),p,v;if(s&&!l?p="complete":!s&&l?p="incomplete":p="regular",Te.isJdLeapY(t))switch(d){case 6:p==="incomplete"?v=i.shabbos_short_leap:p==="complete"&&(v=a?i.shabbos_short_leap:i.shabbos_long_leap);break;case 1:p==="incomplete"?v=a?i.mon_short_leap_Israel:i.mon_short_leap:p==="complete"&&(v=a?i.mon_long_leap_Israel:i.mon_long_leap);break;case 2:p==="regular"&&(v=a?i.mon_long_leap_Israel:i.mon_long_leap);break;case 4:p==="incomplete"?v=i.thu_short_leap:p==="complete"&&(v=i.thu_long_leap);break;default:throw"improper sedra year type calculated."}else switch(d){case 6:p==="incomplete"?v=i.shabbos_short:p==="complete"&&(v=i.shabbos_long);break;case 1:p==="incomplete"?v=i.mon_short:p==="complete"&&(v=a?i.mon_short:i.mon_long);break;case 2:p==="regular"&&(v=a?i.mon_short:i.mon_long);break;case 4:p==="regular"?v=a?i.thu_normal_Israel:i.thu_normal:p==="complete"&&(v=i.thu_long);break;default:throw"improper sedra year type calculated."}var S={firstSatInYear:m,sedraArray:v,year:t,israel:a};return i.lastCalculatedYear=S,S}}]),i})();bn.lastCalculatedYear=null;bn.sedraList=[{eng:"Bereshis",heb:""},{eng:"Noach",heb:""},{eng:"Lech-Lecha",heb:" "},{eng:"Vayera",heb:""},{eng:"Chayei Sara",heb:" "},{eng:"Toldos",heb:""},{eng:"Vayetzei",heb:""},{eng:"Vayishlach",heb:""},{eng:"Vayeishev",heb:""},{eng:"Mikeitz",heb:""},{eng:"Vayigash",heb:""},{eng:"Vayechi",heb:""},{eng:"Shemos",heb:""},{eng:"Va'era",heb:""},{eng:"Bo",heb:""},{eng:"Beshalach",heb:""},{eng:"Yisro",heb:""},{eng:"Mishpatim",heb:""},{eng:"Terumah",heb:""},{eng:"Tetzaveh",heb:""},{eng:"Ki Sisa",heb:" "},{eng:"Vayakhel",heb:""},{eng:"Pekudei",heb:""},{eng:"Vayikra",heb:""},{eng:"Tzav",heb:""},{eng:"Shmini",heb:""},{eng:"Tazria",heb:""},{eng:"Metzora",heb:""},{eng:"Achrei Mos",heb:" "},{eng:"Kedoshim",heb:""},{eng:"Emor",heb:""},{eng:"Behar",heb:""},{eng:"Bechukosai",heb:""},{eng:"Bamidbar",heb:""},{eng:"Nasso",heb:""},{eng:"Beha'aloscha",heb:""},{eng:"Sh'lach",heb:""},{eng:"Korach",heb:""},{eng:"Chukas",heb:""},{eng:"Balak",heb:""},{eng:"Pinchas",heb:""},{eng:"Matos",heb:""},{eng:"Masei",heb:""},{eng:"Devarim",heb:""},{eng:"Va'eschanan",heb:""},{eng:"Eikev",heb:""},{eng:"Re'eh",heb:""},{eng:"Shoftim",heb:""},{eng:"Ki Seitzei",heb:" "},{eng:"Ki Savo",heb:" "},{eng:"Nitzavim",heb:""},{eng:"Vayeilech",heb:""},{eng:"Ha'Azinu",heb:""},{eng:"Vezos Habracha",heb:" "}];bn.shabbos_short=[52,52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,-21,23,24,25,25,-26,-28,30,-31,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,50];bn.shabbos_long=[52,52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,-21,23,24,25,25,-26,-28,30,-31,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,-50];bn.mon_short=[51,52,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,-21,23,24,25,25,-26,-28,30,-31,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,-50];bn.mon_long=[51,52,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,-21,23,24,25,25,-26,-28,30,-31,33,34,34,35,36,37,-38,40,-41,43,44,45,46,47,48,49,-50];bn.thu_normal=[52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,-21,23,24,25,25,25,-26,-28,30,-31,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,50];bn.thu_normal_Israel=[52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,-21,23,24,25,25,-26,-28,30,31,32,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,50];bn.thu_long=[52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,25,-26,-28,30,-31,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,50];bn.shabbos_short_leap=[52,52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,28,29,30,31,32,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,-50];bn.shabbos_long_leap=[52,52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,28,29,30,31,32,33,34,34,35,36,37,-38,40,-41,43,44,45,46,47,48,49,-50];bn.mon_short_leap=[51,52,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,28,29,30,31,32,33,34,34,35,36,37,-38,40,-41,43,44,45,46,47,48,49,-50];bn.mon_short_leap_Israel=[51,52,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,28,29,30,31,32,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,-50];bn.mon_long_leap=[51,52,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,28,28,29,30,31,32,33,34,35,36,37,38,39,40,-41,43,44,45,46,47,48,49,50];bn.mon_long_leap_Israel=[51,52,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];bn.thu_short_leap=[52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];bn.thu_long_leap=[52,53,53,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,-50];var uw=bn,ud=(function(){function i(){Ei(this,i)}return Ai(i,null,[{key:"getPrakim",value:function(t,a){if(t.getDayOfWeek()!==6)return[];var s=t.Month,l=t.Day;return s===1&&l>(a?21:22)||s>1&&s<6&&!(s===3&&l===6||!a&&s===3&&l===7)&&!(s===5&&l===9)?[i._get1stPerek(t,a)]:s===6?i._ellul(t,a):[]}}]),i})();ud._get1stPerek=function(i,e){var t=i.Year,a=i.Month,s=i.Day,l=new Te(t,1,15),c=(e?7:8)+(6-l.getDayOfWeek()),d=a===1&&s===c+15?1:pe.toInt((i.Abs-(l.Abs+c))/7)+1,m=d%6;return m===0&&(m=6),!e&&l.getDayOfWeek()===4&&(a>3||a===3&&s>6)&&(m=m===1?6:m-1),l.getDayOfWeek()===6&&(a>5||a===5&&s>9)&&(m=m===1?6:m-1),m};ud._ellul=function(i,e){var t,a=i.Year,s=i.Day,l=new Te(a,6,1,i.Abs-i.Day+1),c=l.getDayOfWeek(),d=c===6?1:6-(c+6)%6+1,m=new Te(a,6,d,l.Abs+d-1),p=s===d?1:pe.toInt((s-d)/7)+1;switch(ud._get1stPerek(m,e)){case 1:switch(p){case 1:t=[1];break;case 2:t=[2];break;case 3:t=[3,4];break;case 4:t=[5,6];break}break;case 2:switch(p){case 1:t=[2];break;case 2:t=[3];break;case 3:t=[4];break;case 4:t=[5,6];break}break;case 3:switch(p){case 1:t=[3];break;case 2:t=[4];break;case 3:t=[5];break;case 4:t=[6];break}break;case 4:switch(p){case 1:t=[4,5];break;case 2:t=[6,1];break;case 3:t=[2,3];break;case 4:t=[4,5,6];break}break;case 5:switch(p){case 1:t=[5,6];break;case 2:t=[1,2];break;case 3:t=[3,4];break;case 4:t=[5,6];break}break;case 6:switch(p){case 1:t=[6];break;case 2:t=[1,2];break;case 3:t=[3,4];break;case 4:t=[5,6];break}break}return t||[]};var IS=ud,DS=(function(){function i(){Ei(this,i)}return Ai(i,null,[{key:"getDaf",value:function(t){var a=t.Abs,s=40,l,c,d,m,p,v,S,D;if(d=Te.absSd(new Date(1923,8,11)),m=Te.absSd(new Date(1975,5,24)),a<d)return null;for(a>=m?(l=8+pe.toInt((a-m)/2711),c=(a-m)%2711):(l=1+pe.toInt((a-d)/2702),c=pe.toInt((a-d)/2702)),p=D=0,v=-1,l<=7?i.masechtaList[4].daf=13:i.masechtaList[4].daf=22,S=0;S<s;){if(v++,p=p+i.masechtaList[S].daf-1,c<p){switch(D=i.masechtaList[S].daf+1-(p-c),v){case 36:D=D+21;break;case 37:D=D+24;break;case 38:D=D+33;break}S=1+s}S++}return{masechet:i.masechtaList[v],daf:D}}},{key:"toString",value:(function(t){var a=i.getDaf(t);if(a!==null)return a.masechet.eng+", Daf "+a.daf.toString()})},{key:"toStringHeb",value:(function(t){var a=i.getDaf(t);if(a!==null)return a.masechet.heb+"  "+pe.toJewishNumber(a.daf)})}]),i})();DS.masechtaList=[{eng:"Berachos",heb:"",daf:64},{eng:"Shabbos",heb:"",daf:157},{eng:"Eruvin",heb:"",daf:105},{eng:"Pesachim",heb:"",daf:121},{eng:"Shekalim",heb:"",daf:22},{eng:"Yoma",heb:"",daf:88},{eng:"Sukkah",heb:"",daf:56},{eng:"Beitzah",heb:"",daf:40},{eng:"Rosh Hashana",heb:" ",daf:35},{eng:"Taanis",heb:"",daf:31},{eng:"Megillah",heb:"",daf:32},{eng:"Moed Katan",heb:" ",daf:29},{eng:"Chagigah",heb:"",daf:27},{eng:"Yevamos",heb:"",daf:122},{eng:"Kesubos",heb:"",daf:112},{eng:"Nedarim",heb:"",daf:91},{eng:"Nazir",heb:"",daf:66},{eng:"Sotah",heb:"",daf:49},{eng:"Gitin",heb:"",daf:90},{eng:"Kiddushin",heb:"",daf:82},{eng:"Baba Kamma",heb:" ",daf:119},{eng:"Baba Metzia",heb:" ",daf:119},{eng:"Baba Basra",heb:" ",daf:176},{eng:"Sanhedrin",heb:"",daf:113},{eng:"Makkot",heb:"",daf:24},{eng:"Shevuot",heb:"",daf:49},{eng:"Avodah Zarah",heb:" ",daf:76},{eng:"Horayot",heb:"",daf:14},{eng:"Zevachim",heb:"",daf:120},{eng:"Menachos",heb:"",daf:110},{eng:"Chullin",heb:"",daf:142},{eng:"Bechoros",heb:"",daf:61},{eng:"Arachin",heb:"",daf:34},{eng:"Temurah",heb:"",daf:34},{eng:"Kerisos",heb:"",daf:28},{eng:"Meilah",heb:"",daf:22},{eng:"Kinnim",heb:"",daf:4},{eng:"Tamid",heb:"",daf:10},{eng:"Midos",heb:"",daf:4},{eng:"Niddah",heb:"",daf:73}];var vc=DS,cw=[{isLeapYear:!1,dow:5,isLongCheshvan:!1,isLongKislev:!0,daysInYear:354},{isLeapYear:!1,dow:7,isLongCheshvan:!0,isLongKislev:!0,daysInYear:355},{isLeapYear:!1,dow:2,isLongCheshvan:!0,isLongKislev:!0,daysInYear:355},{isLeapYear:!1,dow:3,isLongCheshvan:!1,isLongKislev:!0,daysInYear:354},{isLeapYear:!1,dow:7,isLongCheshvan:!1,isLongKislev:!1,daysInYear:353},{isLeapYear:!1,dow:2,isLongCheshvan:!1,isLongKislev:!1,daysInYear:353},{isLeapYear:!1,dow:5,isLongCheshvan:!0,isLongKislev:!0,daysInYear:355},{isLeapYear:!0,dow:5,isLongCheshvan:!0,isLongKislev:!0,daysInYear:385},{isLeapYear:!0,dow:2,isLongCheshvan:!1,isLongKislev:!1,daysInYear:383},{isLeapYear:!0,dow:5,isLongCheshvan:!1,isLongKislev:!1,daysInYear:383},{isLeapYear:!0,dow:7,isLongCheshvan:!1,isLongKislev:!1,daysInYear:383},{isLeapYear:!0,dow:2,isLongCheshvan:!0,isLongKislev:!0,daysInYear:385},{isLeapYear:!0,dow:7,isLongCheshvan:!0,isLongKislev:!0,daysInYear:385},{isLeapYear:!0,dow:3,isLongCheshvan:!1,isLongKislev:!0,daysInYear:384}],hw=[8,0,1,7,0,8,1,0,8,1,0,7,4,1,13,1,8,0,1,7,4,0,7,1,8,0,1,7,0,4,7,0,1,8,0,7,4,0,7,1,4,13,1,8,1,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,7,4,1,13,1,4,13,1,1,8,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,1,7,4,13,1,1,8,0,1,8,0,7,1,0,8,1,0,7,4,0,7,1,8,0,1,8,0,1,7,4,13,1,1,8,0,1,7,0,4,7,0,8,1,0,7,4,1,13,1,8,0,1,8,1,0,7,1,0,8,1,8,0,1,7,0,4,7,0,8,1,0,7,4,1,13,1,4,13,1,7,4,0,7,1,0,8,1,8,0,1,7,0,4,7,0,1,8,0,7,1,4,13,1,1,8,0,7,4,0,7,1,0,8,1,0,7,4,7,0,1,8,0,1,8,1,13,1,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7,4,7,0,1,8,0,1,8,1,0,7,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7,4,1,13,1,8,0,1,7,4,0,7,1,8,0,1,7,0,4,7,0,1,8,0,7,4,0,7,1,4,13,1,8,1,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,7,4,1,13,1,4,13,1,1,8,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,1,8,1,13,1,4,13,1,1,8,0,7,1,0,8,1,0,7,4,0,7,1,8,0,1,8,0,1,7,4,13,1,1,8,0,1,7,0,4,7,0,8,1,0,7,4,0,7,1,8,0,1,8,1,0,7,1,0,8,1,8,0,1,7,0,4,7,0,8,1,0,7,4,1,13,1,4,13,1,7,4,0,7,1,0,8,1,8,0,1,7,0,4,7,0,1,8,0,7,1,4,13,1,1,8,0,7,4,0,7,1,0,8,1,0,7,4,7,0,1,8,0,1,8,1,13,1,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7,4,7,0,1,8,0,1,8,1,0,7,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7,4,1,13,1,8,0,1,7,4,0,7,1,8,0,1,8,0,1,7,0,4,7,0,7,4,0,7,1,4,13,1,8,1,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,7,4,1,13,1,4,13,1,1,8,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,1,8,1,13,1,4,13,1,1,8,0,7,1,0,8,1,0,7,4,0,7,1,8,0,1,8,0,1,7,4,13,1,1,8,0,1,7,0,4,7,0,8,1,0,7,4,0,7,1,8,0,1,8,1,0,7,1,0,8,1,8,0,1,7,0,4,7,0,8,1,0,7,4,1,13,1,4,13,1,8,1,0,7,1,0,8,1,8,0,1,7,0,4,7,0,1,8,0,7,1,4,13,1,1,8,0,7,4,0,7,1,0,8,1,0,7,4,7,0,1,8,0,1,8,0,7,1,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7,4,7,0,1,8,0,1,8,1,0,7,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7,4,1,13,1,8,0,1,7,4,0,7,1,8,0,1,8,0,1,7,0,4,7,0,7,4,0,7,1,4,13,1,8,1,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,7,4,1,13,1,4,13,1,1,8,0,7,1,0,8,1,0,8,1,7,0,4,7,0,1,8,0,1,8,1,13,1,4,13,1,1,8,0,7,1,0,8,1,0,8,1,0,7,4,7,0,1,8,0,1,7,4,13,1,1,8,0,1,7,0,4,7,0,8,1,0,7,4,0,7,1,8,0,1,8,1,0,7,1,0,8,1,8,0,1,7,0,4,7,0,8,1,0,7,4,1,13,1,4,13,1,8,1,0,7,1,0,8,1,8,0,1,7,0,4,7,0,1,8,0,7,4,1,13,1,4,13,1,7,4,0,7,1,0,8,1,0,7,4,7,0,1,8,0,1,8,0,7,1,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7,4,7,0,1,8,0,1,8,1,0,7,4,13,1,1,8,0,1,7,0,8,1,0,8,1,0,7],up=new Map,Ff=function(i){if(up.has(i))return up.get(i);var e=0,t=Xe.toInt(235*Xe.toInt((i-1)/19)+12*((i-1)%19)+(7*((i-1)%19)+1)/19),a=204+793*(t%1080),s=5+12*t+793*Xe.toInt(t/1080)+Xe.toInt(a/1080),l=Xe.toInt(1+29*t+s/24),c=1080*(s%24)+a%1080;return c>=19440||l%7===2&&c>=9924&&!Te.isJdLeapY(i)||l%7===1&&c>=16789&&Te.isJdLeapY(i-1)?e=l+1:e=l,Xe.has(e%7,0,3,5)&&(e+=1),up.set(i,e),e},zS=(function(){function i(e,t,a,s){if(Ei(this,i),this.Day=NaN,this.Month=NaN,this.Year=NaN,this.Abs=NaN,arguments.length===0)this.fromAbs(i.absSd(new Date));else if(mi(e,Date))if(Xe.isValidDate(e))this.fromAbs(i.absSd(e));else throw"jDate constructor: The given Date is not a valid javascript Date";else if(Array.isArray(e)&&e.length>=3)this.Day=e[0],this.Month=e[1],this.Year=e[2],this.Abs=e.length>3&&e[3]||i.absJd(this.Year,this.Month,this.Day);else if(e&&Xe.isString(e)){var l=new Date(e);if(Xe.isValidDate(l))this.fromAbs(i.absSd(l));else throw'jDate constructor: The given string "'+e+'" cannot be parsed into a Date'}else if(Xe.isNumber(e))arguments.length===1?this.fromAbs(e):(this.Year=e,this.Month=t||7,this.Day=a||1,this.Abs=s||i.absJd(this.Year,this.Month,this.Day));else if((typeof e>"u"?"undefined":ES(e))==="object"){var c=e;Xe.isNumber(c.year)&&(this.Day=c.day||1,this.Month=c.month||7,this.Year=c.year,this.Abs=c.abs||i.absJd(this.Year,this.Month,this.Day))}}return Ai(i,[{key:"fromAbs",value:function(t){var a=i.fromAbs(t);this.Year=a.year,this.Month=a.month,this.Day=a.day,this.Abs=t}},{key:"getDate",value:function(){return i.sdFromAbs(this.Abs)}},{key:"getDayOfWeek",value:function(){return Math.abs(this.Abs%7)}},{key:"DayOfWeek",get:(function(){return this.getDayOfWeek()})},{key:"addDays",value:function(t){return new i(this.Abs+t)}},{key:"addMonths",value:function(t){for(var a=this.Year,s=this.Month,l=this.Day,c=i.monthsJYear(a),d=0;d<Math.abs(t);d++)t>0?(s+=1,s>c&&(s=1),s===7&&(a+=1,c=i.monthsJYear(a))):t<0&&(s-=1,s===0&&(s=c),s===6&&(a-=1,c=i.monthsJYear(a)));return l===30&&i.daysJMonth(a,s)===29&&(l=29),new i(a,s,l)}},{key:"addYears",value:function(t){var a=this.Year+t,s=this.Month,l=this.Day;return s===13&&!i.isJdLeapY(a)?s=12:s===8&&l===30&&!i.isLongCheshvan(a)?(s=9,l=1):s===9&&l===30&&i.isShortKislev(a)&&(s=10,l=1),l===30&&i.daysJMonth(a,s)===29&&(l=29),new i(a,s,l)}},{key:"addSecularMonths",value:function(t){var a=new Date(this.getDate().valueOf());return a.setMonth(a.getMonth()+t),new i(a)}},{key:"addSecularYears",value:function(t){var a=new Date(this.getDate().valueOf());return a.setFullYear(a.getFullYear()+t),new i(a)}},{key:"diffDays",value:function(t){return t.Abs-this.Abs}},{key:"diffMonths",value:function(t){for(var a=t.Month,s=t.Year,l=0;!(s===this.Year&&a===this.Month);)this.Abs>t.Abs?(l--,a++,a>i.monthsJYear(s)?a=1:a===7&&s++):(l++,a--,a<1?a=i.monthsJYear(s):a===6&&s--);return l}},{key:"diffFullMonths",value:function(t){var a=this.diffMonths(t);return a>=0&&this.Day>t.Day?a--:a<0&&this.Day<t.Day&&a++,a}},{key:"diffYears",value:function(t){var a=t.Year-this.Year;return(this.Month<t.Month||this.Month===t.Month&&this.Day<t.Day)&&a--,a}},{key:"diffFullYears",value:function(t){var a=t.Year-this.Year;return a>=0&&(this.Month>t.Month||this.Month===t.Month&&this.Day>t.Day)?a--:a<0&&(this.Month<t.Month||this.Month===t.Month&&this.Day<t.Day)&&a++,a}},{key:"toString",value:function(t,a,s,l){var c=this.getSedra(!!l),d=s&&c?.sedras.length>0?" of Parshas ".concat(c.toString()):"",m=t?"":"".concat(Mc[this.getDayOfWeek()]).concat(d,", "),p=a||!t?"the ":"The ";return"".concat(m).concat(p).concat(pe.toSuffixed(this.Day)," of ").concat(this.monthName())}},{key:"toShortstring",value:function(t){return(t?Mc[this.getDayOfWeek()]+" ":"")+Dl[this.Month]+" "+this.Day.toString()+", "+this.Year.toString()}},{key:"monthName",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return Dl[this.Month]+(this.Month===12&&i.isJdLeapY(this.Year)?" Rishon ":" ")+(t?this.Year.toString():"")}},{key:"toStringHeb",value:function(t,a,s){var l=t?"":"".concat(RS[this.getDayOfWeek()]," "),c=this.getSedra(!!s),d=a&&c?.sedras.length>0?" ".concat(c.toStringHeb(),", "):"",m="".concat(bc[this.Month]).concat(this.Month===12&&i.isJdLeapY(this.Year)?"  ":" ");return"".concat(l).concat(d).concat(pe.toJewishNumber(this.Day)," ").concat(m).concat(pe.toJewishNumber(this.Year%1e3))}},{key:"getDayOfOmer",value:function(){var t=0;if(this.Month===1&&this.Day>15||this.Month===2||this.Month===3&&this.Day<6){var a=new i(this.Year,1,15);t=a.diffDays(this)}return t}},{key:"isYomTovOrCholHamoed",value:function(t){return this.isYomTov(t)||this.Month===1&&[16,17,18,19,20].includes(this.Day)||this.Month===7&&[16,17,18,19,20,21].includes(this.Day)}},{key:"isYomTov",value:function(t){var a=this.Day;switch(this.Month){case 1:if(a===15||a===21||!t&&(a===16||a===22))return!0;break;case 3:if(a===6||!t&&a===7)return!0;break;case 7:if([1,2,10,15,22].includes(a)||!t&&(a===16||a===23))return!0;break}return!1}},{key:"isErevYomTov",value:function(){return this.Month===1&&Xe.has(this.Day,14,20)||this.Month===3&&this.Day===5||this.Month===6&&this.Day===29||this.Month===7&&Xe.has(this.Day,9,14,21)}},{key:"hasCandleLighting",value:function(){var t=this.getDayOfWeek();return t===5?!0:t===6?!1:this.isErevYomTov()}},{key:"hasEiruvTavshilin",value:function(t){var a=this.getDayOfWeek();return[3,4].includes(a)&&this.isErevYomTov()&&(a===4||a===3&&(!t||this.Month===6))&&this.Day!==9}},{key:"getCandleLighting",value:function(t,a){if(!t)throw"To get sunrise and sunset, the location needs to be supplied";if(this.hasCandleLighting())return Ja.getCandleLighting(this,t);if(a)return null;throw"No candle lighting on "+this.toString()}},{key:"getSedra",value:function(t){return new uw(this,t)}},{key:"getPirkeiAvos",value:function(t){return IS.getPrakim(this,t)}},{key:"getSunriseSunset",value:function(t,a){if(!t)throw"To get sunrise and sunset, the location needs to be supplied";return Ja.getSunTimes(this,t,!a)}},{key:"getChatzos",value:function(t){if(!t)throw"To get Chatzos, the location needs to be supplied";return Ja.getChatzos(this,t)}},{key:"getShaaZmanis",value:function(t,a){if(!t)throw"To get the Shaa Zmanis, the location needs to be supplied";return Ja.getShaaZmanis(this,t,a)}},{key:"getDafYomi",value:function(){return vc.toString(this)||""}},{key:"getDafyomiHeb",value:function(){return vc.toStringHeb(this)||""}}],[{key:"toJDate",value:(function(t,a,s,l){return arguments.length===0?new i:Xe.isNumber(t)&&arguments.length===1?new i(t,7,1):new i(t,a,s,l)})},{key:"now",value:function(){return new i}},{key:"fromAbs",value:(function(t){for(var a=3761+Xe.toInt(t/(t>0?366:300)),s,l;t>=i.absJd(a+1,7,1);)a++;for(s=t<i.absJd(a,1,1)?7:1;t>i.absJd(a,s,i.daysJMonth(a,s));)s++;return l=t-i.absJd(a,s,1)+1,{year:a,month:s,day:l}})},{key:"absSd",value:(function(t){return Xe.absSd(t)})},{key:"absJd",value:(function(t,a,s){var l=s;if(a<7){for(var c=7;c<=i.monthsJYear(t);)l+=i.daysJMonth(t,c),c++;for(c=1;c<a;)l+=i.daysJMonth(t,c),c++}else for(var d=7;d<a;)l+=i.daysJMonth(t,d),d++;return l+(Ff(t)+-1373429)})},{key:"sdFromAbs",value:(function(t){return Xe.sdFromAbs(t)})},{key:"daysJMonth",value:(function(t,a){switch(a){case 1:case 3:case 5:case 7:case 11:return 30;case 2:case 4:case 6:case 10:case 13:return 29;case 8:return i.isLongCheshvan(t)?30:29;case 9:return i.isShortKislev(t)?29:30;case 12:return i.isJdLeapY(t)?30:29}return 0})},{key:"yearType",value:(function(t){return cw[hw[t-5e3]]})},{key:"daysJYear",value:(function(t){return!t||t<0?0:t>=5e3?i.yearType(t).daysInYear:Ff(t+1)-Ff(t)})},{key:"isLongCheshvan",value:(function(t){return!t||t<0?!1:t>=5e3?i.yearType(t).isLongCheshvan:i.daysJYear(t)%10===5})},{key:"isShortKislev",value:(function(t){return!t||t<0?!1:t>=5e3?!i.yearType(t).isLongKislev:i.daysJYear(t)%10===3})},{key:"isJdLeapY",value:(function(t){return(7*t+1)%19<7})},{key:"monthsJYear",value:(function(t){return i.isJdLeapY(t)?13:12})}]),i})();zS.getElapsedDays=Ff;var Te=zS,se=Object.freeze({SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SHABBOS:6}),Re=Object.freeze({NISSAN:1,IYAR:2,SIVAN:3,TAMUZ:4,AV:5,ELLUL:6,TISHREI:7,CHESHVAN:8,KISLEV:9,TEVES:10,SHVAT:11,ADAR:12,ADAR_SHEINI:13}),Dl=["","Nissan","Iyar","Sivan","Tamuz","Av","Ellul","Tishrei","Cheshvan","Kislev","Teves","Shvat","Adar","Adar Sheini"],bc=["","","","","","","","","","","","",""," "],fw=["January","February","March","April","May","June","July","August","September","October","November","December"],Mc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Erev Shabbos","Shabbos Kodesh"],RS=[" "," "," "," "," ","  "," "],Zl=(function(i){ew(e,i);function e(){return Ei(this,e),W4(this,e,arguments)}return Ai(e,null,[{key:"toJewishNumber",value:(function(a){if(a<1)throw"Min value is 1";if(a>9999)throw"Max value is 9999";var s=a,l="";for(s>=1e3&&(l+=e.jsd[e.toInt((s-s%1e3)/1e3)-1]+"'",s=s%1e3);s>=400;)l+="",s-=400;return s>=100&&(l+=e.jhd[e.toInt((s-s%100)/100)-1],s=s%100),s==15?l+="":s==16?l+="":(s>9&&(l+=e.jtd[e.toInt((s-s%10)/10)-1]),s%10>0&&(l+=e.jsd[s%10-1])),a>999&&a%1e3<10?l="'"+l:l.length>1&&(l=l.slice(0,-1)+'"'+l[l.length-1]),l})},{key:"toStringDate",value:(function(a,s,l){if(a)return(s?l?"t":"T":Mc[a.getDay()]+", t")+"he "+e.toSuffixed(a.getDate())+" of "+fw[a.getMonth()]+" "+a.getFullYear().toString()})},{key:"toShortStringDate",value:(function(a,s){if(a){var l=a.getDate(),c=a.getMonth()+1;return(s?"".concat(c,"/").concat(l):"".concat(l<10?"0":"").concat(l,"/").concat(c<10?"0":"").concat(c))+"/"+a.getFullYear().toString()}})},{key:"getSdDOW",value:(function(a,s,l){return new Date(a,s-1,l).getDay()})},{key:"timeFromDate",value:(function(a){return{hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds()}})},{key:"isTimeAfter",value:(function(a,s){return!a||!s?!1:e.totalSeconds(s)>=e.totalSeconds(a)})},{key:"getTimeIntervalTextStringHeb",value:(function(a){var s="";return a.hour>0&&(s+="".concat(a.hour.toString()," ").concat(a.hour===1?"":"","")),a.minute>0&&(s.length&&(s+=" "),s+="".concat(a.minute.toString()," ").concat(a.minute===1?"":"","")),(a.second||0)>0&&(s.length&&(s+=" "),s+="".concat(Math.trunc(a.second||0).toString()," ").concat(a.second===1?"":"","")),s})},{key:"getTimeIntervalTextString",value:(function(a){var s="";return a.hour>0&&(s+="".concat(a.hour.toString()," ").concat(a.hour===1?"hour":"hours","")),a.minute>0&&(s.length&&(s+=" "),s+="".concat(a.minute.toString()," ").concat(a.minute===1?"minute":"minutes","")),(a.second||0)>0&&(s.length&&(s+=" "),s+="".concat(Math.trunc(a.second||0).toString()," ").concat(a.second===1?"second":"seconds","")),s})},{key:"getOmerNusach",value:(function(a,s){var l=e.toInt(a/7),c=a%7,d=" ";return a===1?d+="  ":(a===2?d+=" ":a===10?d+=" ":(d+=e.jsnum[e.toInt(a%10)]+" ",a>10&&(a>20&&a%10>0&&(d+=""),d+=e.jtnum[e.toInt(a/10)]+" ")),d+=(a>=11?"":"")+" ",s==="sefardi"&&(d+=" "),a>=7&&(d+=" ",l===1?d+="  ":l===2?d+="  ":l>0&&(d+=e.jsnum[e.toInt(l)]+"  "),c===1?d+="  ":c===2?d+="  ":c>0&&(d+=""+e.jsnum[c]+"  "))),s==="sefard"?d+="":s==="ashkenaz"&&(d+=""),d})},{key:"getTimeString",value:(function(a,s,l,c){var d=c?Math.ceil:Math.floor;return a={hour:d(a.hour),minute:d(a.minute),second:d(a.second||0)},l?(s&&s<0?"-":"")+(a.hour.toString()+":"+(a.minute<10?"0"+a.minute.toString():a.minute.toString())+":"+((a.second||0)<10?"0"+(a.second||0).toString():(a.second||0).toString())):(s&&s<0?"-":"")+(a.hour<=12?a.hour==0?12:a.hour:a.hour-12).toString()+":"+(a.minute<10?"0"+a.minute.toString():a.minute.toString())+":"+((a.second||0)<10?"0"+(a.second||0).toString():(a.second||0).toString())+(a.hour<12?" AM":" PM")})},{key:"getSdNowInIsrael",value:(function(){var a=new Date,s=2+-e.currUtcOffset();return a.setHours(a.getHours()+s),a})},{key:"addDaysToSdate",value:(function(a,s){return new Date(a.valueOf()+864e5*s)})},{key:"isSameSdate",value:(function(a,s){return a&&s&&a.toDateString()===s.toDateString()})},{key:"isSameJdate",value:(function(a,s){return a&&s&&a.Abs&&s.Abs&&a.Abs===s.Abs})},{key:"isSameJMonth",value:(function(a,s){return a.Month===s.Month&&a.Year===s.Year})},{key:"isSameSMonth",value:(function(a,s){return a.getMonth()===s.getMonth()&&a.getFullYear()===s.getFullYear()})},{key:"isAfterSunset",value:(function(a,s){var l=Ja.getSunTimes(a,s).sunset,c=e.timeFromDate(a);return l&&e.isTimeAfter(l,c)})},{key:"nowAtLocation",value:(function(a){var s=new Date;return e.isAfterSunset(s,a)&&s.setDate(s.getDate()+1),new Te(s)})},{key:"bothDates",value:(function(a){var s=mi(a,Date)?new Te(a):a,l=mi(a,Date)?a:s.getDate();return{sdate:l,jdate:s}})},{key:"isString",value:(function(a){return typeof a=="string"||mi(a,String)})},{key:"isNumber",value:(function(a){return typeof a=="number"||mi(a,Number)})},{key:"setDefault",value:(function(a,s){return typeof a>"u"||a===null||isNaN(a)?s:a})},{key:"range",value:(function(a,s){var l=typeof s>"u"?1:a,c=typeof s>"u"?a:s;return Array.from({length:c-l+1},function(d,m){return l+m})})},{key:"log",value:(function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c]})},{key:"warn",value:(function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c]})},{key:"error",value:(function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c]})}]),e})(Xe);Zl.jsd=["","","","","","","","",""];Zl.jtd=["","","","","","","","",""];Zl.jhd=["","","",""];Zl.jsnum=["","","","","","","","","",""];Zl.jtnum=["","","","",""];var pe=Zl,xp=(function(){function i(e,t,a,s,l,c,d,m){Ei(this,i),(typeof a>"u"||a===null)&&(a=s>29.45&&s<33&&l<-34.23&&l>-35.9),a?c=2:(typeof c>"u"||c===null)&&(c=-Math.round(l/15)),this.Name=e||"Unknown Location",this.NameHebrew=t,this.Israel=!!a,this.Latitude=s,this.Longitude=l,this.UTCOffset=c||0,this.Elevation=d||0,this.CandleLighting=m||i.getCandles(this)}return Ai(i,null,[{key:"clone",value:function(t){return new i(t.Name,t.NameHebrew,t.Israel,t.Latitude,t.Longitude,t.UTCOffset,t.Elevation,t.CandleLighting||0)}},{key:"getCandles",value:function(t){if(t.CandleLighting)return t.CandleLighting;if(t.Israel){var a=[{names:["jerusalem","yerush","petach","petah","petak","beit shemesh",""," "," "],min:40},{names:["haifa","chaifa","be'er sheva","beersheba",""," "],min:22}],s=t.Name.toLowerCase(),l=a.find(function(c){return c.names.find(function(d){return s.indexOf(d)>-1})});return l?l.min:30}else return 18}},{key:"getJerusalem",value:(function(){return new i("Jerusalem","",!0,31.78,-35.22,2,800,40)})},{key:"getLakewood",value:(function(){return new i("Lakewood NJ",void 0,!1,40.1,74.23,-5,0,18)})}]),i})(),dw=[{name:"Ofakim",heb:"",il:!0,tz:2,el:170,lat:31.32,lon:-34.62},{name:"Eilat",heb:"",il:!0,tz:2,lat:29.55,lon:-34.95},{name:"Elad",heb:"",il:!0,tz:2,el:150,lat:32.05,lon:-34.95},{name:"Ashdod",heb:"",il:!0,tz:2,lat:31.78,lon:-34.63},{name:"Ashkelon",heb:"",il:!0,tz:2,lat:31.65,lon:-34.57},{name:"Be'er Ya'akov",heb:" ",il:!0,tz:2,lat:31.93,lon:-34.83},{name:"Bersheba",heb:" ",il:!0,tz:2,el:270,lat:31.23,lon:-34.78},{name:"Beit She'an",heb:" ",il:!0,tz:2,el:0,lat:32.5,lon:-35.5},{name:"Beit Shemesh",heb:" ",il:!0,tz:2,el:300,lat:31.73,lon:-34.98},{name:"Beitar Illit",heb:" ",il:!0,tz:2,el:800,lat:31.68,lon:-35.12},{name:"Bnei Brak",heb:" ",il:!0,tz:2,el:70,lat:32.08,lon:-34.82,cl:21},{name:"Binyamina",heb:"",il:!0,tz:2,lat:32.52,lon:-34.95},{name:"Bat Yam",heb:" ",il:!0,tz:2,lat:32.02,lon:-34.73},{name:"Givat Zeev",heb:" ",il:!0,tz:2,lat:31.87,lon:-35.17},{name:"Givatayim",heb:"",il:!0,tz:2,lat:32.05,lon:-34.8},{name:"Dimona",heb:"",il:!0,tz:2,lat:31.07,lon:-35.03},{name:"Hertzeliya",heb:"",il:!0,tz:2,lat:32.17,lon:-34.83},{name:"Zichron Ya'akov",heb:" ",il:!0,tz:2,el:170,lat:32.57,lon:-34.95},{name:"Hebron",heb:"",il:!0,tz:2,el:950,lat:31.53,lon:-35.08},{name:"Hadera",heb:"",il:!0,tz:2,lat:32.43,lon:-34.92},{name:"Holon",heb:"",il:!0,tz:2,lat:32.02,lon:-34.75},{name:"Chispin",heb:"",il:!0,tz:2,lat:32.85,lon:-35.77},{name:"Haifa",heb:"",il:!0,tz:2,el:370,lat:32.8,lon:-34.98},{name:"Chafetz Chaim",heb:" ",il:!0,tz:2,el:80,lat:31.48,lon:-34.47},{name:"Tiberius",heb:"",il:!0,tz:2,lat:32.78,lon:-35.53},{name:"Telz Stone",heb:" ",il:!0,tz:2,el:720,lat:31.78,lon:-35.1},{name:"Yerucham",heb:"",il:!0,tz:2,lat:30.98,lon:-34.92},{name:"Jerusalem",heb:"",il:!0,tz:2,el:775,lat:31.77,lon:-35.23,cl:40},{name:"Kfar Chabad",heb:" ",il:!0,tz:2,lat:31.97,lon:-34.8},{name:"Kfar Chasidim",heb:" ",il:!0,tz:2,el:154,lat:32.73,lon:-35.08},{name:"Kfar Mimon",heb:" ",il:!0,tz:2,lat:31.42,lon:-34.58},{name:"Karmiel",heb:"",il:!0,tz:2,lat:32.92,lon:-35.3},{name:"Lod",heb:"",il:!0,tz:2,lat:31.95,lon:-34.88},{name:"Migdal Ha'Emek",heb:" ",il:!0,tz:2,lat:32.67,lon:-35.23},{name:"Meron",heb:"",il:!0,tz:2,el:900,lat:32.98,lon:-35.43},{name:"Ma'agalim",heb:"",il:!0,tz:2,el:150,lat:31.48,lon:-34.67},{name:"Ma'aleh Adumim",heb:" ",il:!0,tz:2,lat:31.77,lon:-35.3},{name:"Mitzpeh Ramon",heb:" ",il:!0,tz:2,el:892,lat:30.62,lon:-34.8},{name:"Ne'halel",heb:"",il:!0,tz:2,lat:32.67,lon:-35.23},{name:"Nahariya",heb:"",il:!0,tz:2,el:25,lat:33.02,lon:-35.1},{name:"Nir Eztyon",heb:" ",il:!0,tz:2,el:220,lat:32.7,lon:-34.98},{name:"Nesher",heb:"",il:!0,tz:2,lat:32.73,lon:-35.08},{name:"Netivot",heb:"",il:!0,tz:2,el:142,lat:31.42,lon:-34.58},{name:"Netanya",heb:"",il:!0,tz:2,lat:32.33,lon:-34.87},{name:"Ein Bokek",heb:" ",il:!0,tz:2,lat:31.2,lon:-35.37},{name:"Acre",heb:"",il:!0,tz:2,lat:32.93,lon:-35.08},{name:"Eli",heb:"",il:!0,tz:2,el:720,lat:32.07,lon:-35.27},{name:"Afula",heb:"",il:!0,tz:2,el:60,lat:32.6,lon:-35.28},{name:"Etzyon Gaver",heb:" ",il:!0,tz:2,el:5,lat:29.53,lon:-34.95},{name:"Arad",heb:"",il:!0,tz:2,el:640,lat:31.27,lon:-35.22},{name:"Pardes Chana",heb:" ",il:!0,tz:2,lat:32.47,lon:-34.97},{name:"Petach Tikvah",heb:" ",il:!0,tz:2,lat:32.08,lon:-34.88,cl:40},{name:"Safed",heb:"",il:!0,tz:2,el:850,lat:32.97,lon:-35.5},{name:"Kedumim",heb:"",il:!0,tz:2,el:487,lat:32.22,lon:-35.15},{name:"Komemiyut",heb:"",il:!0,tz:2,el:76,lat:31.65,lon:-34.73},{name:"Kiryat Arba",heb:" ",il:!0,tz:2,el:987,lat:31.52,lon:-35.1},{name:"Kiryat Gat",heb:" ",il:!0,tz:2,el:159,lat:31.62,lon:-34.77},{name:"Kityat Tivon",heb:" ",il:!0,tz:2,el:39,lat:32.73,lon:-35.08},{name:"Kiryat Yam",heb:" ",il:!0,tz:2,lat:32.83,lon:-35.07},{name:"Kiryat Malachi",heb:" ",il:!0,tz:2,lat:31.73,lon:-34.75},{name:"Modi'in Illit",heb:" ",il:!0,tz:2,el:240,lat:31.93,lon:-35.04,cl:30},{name:"Kiryat Shmona",heb:" ",il:!0,tz:2,lat:33.2,lon:-35.57},{name:"Rosh Ha'ayin",heb:" ",il:!0,tz:2,el:90,lat:32.08,lon:-34.95},{name:"Rosh Pina",heb:" ",il:!0,tz:2,el:131,lat:32.97,lon:-35.48},{name:"Rishon Le'Tzion",heb:" ",il:!0,tz:2,lat:31.97,lon:-34.8},{name:"Rehovot",heb:"",il:!0,tz:2,el:76,lat:31.88,lon:-34.82},{name:"Ramla",heb:"",il:!0,tz:2,lat:31.92,lon:-34.87},{name:"Ramat Hasharon",heb:" ",il:!0,tz:2,el:85,lat:32.17,lon:-34.85},{name:"Ramat Magshimim",heb:" ",il:!0,tz:2,el:450,lat:32.83,lon:-35.82},{name:"Ra'anana",heb:"",il:!0,tz:2,el:71,lat:32.17,lon:-34.85},{name:"Shvi tzion",heb:" ",il:!0,tz:2,lat:33.02,lon:-35.1},{name:"Nablus",heb:"",il:!0,tz:2,el:667,lat:32.22,lon:-35.27},{name:"Shalavim",heb:"",il:!0,tz:2,el:194,lat:31.87,lon:34.98},{name:"Tushiya",heb:"",il:!0,tz:2,lat:31.42,lon:-34.58},{name:"Tel Aviv",heb:" ",il:!0,tz:2,el:20,lat:32.07,lon:-34.77,cl:21},{name:"Tifrach",heb:"",il:!0,tz:2,el:173,lat:31.32,lon:-34.67},{name:"Nazereth",heb:"",il:!0,tz:2,lat:32.7,lon:-35.32},{name:"Menachemya",heb:"",il:!0,tz:2,lat:32.6,lon:-35.55},{name:"Ramot",heb:"",il:!0,tz:2,el:800,lat:31.82,lon:-35.18},{name:"Katzrin",heb:"",il:!0,tz:2,lat:32.98,lon:-35.68},{name:"Hashmonaim",heb:"",il:!0,tz:2,el:255,lat:31.93,lon:-35.02},{name:"Laniado",heb:" / ",il:!0,tz:2,el:26,lat:32.33,lon:-34.87},{name:"Melbourne",tz:10,el:35,lat:-37.82,lon:-144.97},{name:"Aukland",tz:12,lat:-36.87,lon:-174.77},{name:"Boisbriand",tz:-5,lat:45.62,lon:73.85},{name:"Ottawa",tz:-5,lat:45.42,lon:75.7},{name:"Winnipeg",tz:-6,lat:49.88,lon:97.13},{name:"Toronto",tz:-5,el:175,lat:43.68,lon:79.43},{name:"Montreal",tz:-5,el:30,lat:45.52,lon:73.57},{name:"Eidenburg",tz:0,el:134,lat:55.92,lon:3.18},{name:"Algeria",tz:1,lat:36.82,lon:2.98},{name:"Bogota",tz:-5,lat:4.77,lon:74.1},{name:"Brasilia",tz:-3,lat:15.77,lon:48.02},{name:"Goteborg",tz:1,el:100,lat:57.7,lon:-11.95},{name:"Victoria",tz:8,lat:22.25,lon:-114.23},{name:"Touson",tz:-7,lat:32.22,lon:110.97},{name:"Tunville",tz:1,lat:49.4,lon:-6.17},{name:"Tkuarembo",tz:-3,lat:-31.7,lon:55.98},{name:"Trumso",tz:1,lat:69.67,lon:-18.97},{name:"Johannesburg",tz:2,el:1655,lat:-26.3,lon:-28.18},{name:"Montevideo",tz:-3,el:22,lat:-34.83,lon:56.23},{name:"Meedan Columbia",tz:-5,lat:6.23,lon:75.58},{name:"Mexico City",tz:-6,lat:19.45,lon:98.95},{name:"New Delhi",tz:5,lat:28.58,lon:-77.22},{name:"Narwik",tz:1,lat:68.43,lon:-17.42},{name:"San Jose De Mayo",tz:-3,lat:-34.35,lon:56.72},{name:"San Paulo",tz:-3,el:790,lat:-23.6,lon:46.67},{name:"Sunderland",tz:0,lat:54.93,lon:1.43},{name:"Salford",tz:0,lat:53.5,lon:2.25},{name:"San Jusinto Uruguay",tz:-3,lat:-34.55,lon:55.87},{name:"New Square",tz:-5,lat:41.1,lon:74.07},{name:"Palm Springs",tz:-8,el:125,lat:33.83,lon:116.67},{name:"Formosa",tz:-3,lat:-26.18,lon:58.17},{name:"Panama",tz:-5,lat:9.92,lon:79.93},{name:"Perta",tz:8,lat:-32,lon:-115.83},{name:"Peking",tz:8,lat:39.97,lon:-116.45},{name:"Zandiger (India)",tz:5,lat:30.73,lon:-76.78},{name:"The Equator",tz:0,lat:0,lon:0},{name:"South Pole",tz:0,lat:-90,lon:0},{name:"North Pole",tz:0,lat:90,lon:0},{name:"Caracas, Venezuela",tz:-4,lat:10.37,lon:66.88},{name:"Robonimi",tz:1,lat:66.48,lon:-25.7},{name:"Rio De Jinero",tz:-3,lat:-22.85,lon:43.68},{name:"Phoenix",tz:-7,lat:33.43,lon:112.07},{name:"Lucerne",tz:1,lat:47.05,lon:-8.32},{name:"Odessa",tz:2,lat:46.48,lon:-30.72},{name:"Uman",tz:2,lat:48.73,lon:-30.23},{name:"Ifran",tz:0,lat:33.53,lon:5.1},{name:"Alsund Norway",tz:1,lat:62.47,lon:-6.18},{name:"Athens",tz:2,lat:37.97,lon:-23.72},{name:"Bad",tz:1,lat:50.2,lon:-10.08},{name:"Bucharest",tz:2,lat:44.38,lon:-26.4},{name:"Gomel",tz:2,lat:52.38,lon:-30.83},{name:"Gibraltar",tz:1,lat:36.13,lon:5.35},{name:"Gateside",tz:0,lat:54.95,lon:1.6},{name:"Vienna",tz:1,lat:48.22,lon:-16.37},{name:"Venice",tz:1,lat:45.38,lon:-12.47},{name:"Warsaw",tz:1,lat:52.23,lon:-21},{name:"Toulon",tz:1,lat:43.15,lon:-5.87},{name:"Torberey Scotland",tz:0,lat:55.3,lon:4.82},{name:"Lusan",tz:1,el:375,lat:46.53,lon:-6.62},{name:"London",tz:0,el:45,lat:51.6,lon:.1},{name:"Luxenbourg",tz:1,lat:49.67,lon:-6.17},{name:"Liverpool",tz:0,lat:53.42,lon:2.98},{name:"Leeds",tz:0,lat:53.8,lon:1.57},{name:"Medisimo Italy",tz:1,el:1500,lat:46.43,lon:-9.33},{name:"Madrid",tz:1,lat:40.4,lon:3.7},{name:"Monterrey, Mexico",tz:1,lat:46.4,lon:-6.87},{name:"Moscow",tz:3,el:154,lat:55.75,lon:-37.62},{name:"Milano",tz:1,el:122,lat:45.45,lon:-9.18},{name:"Minsk",tz:2,lat:53.87,lon:-27.82},{name:"Malaga",tz:1,lat:36.7,lon:4.42},{name:"Manchester",tz:0,lat:53.5,lon:2.23},{name:"Meknes",tz:0,lat:33.9,lon:5.57},{name:"Marseille",tz:1,lat:43.3,lon:-5.32},{name:"Marrakech",tz:0,lat:31.6,lon:7.98},{name:"New Castle",tz:0,lat:54.95,lon:1.62},{name:"Nice France",tz:1,lat:43.7,lon:-7.18},{name:"Fes",tz:0,lat:34.03,lon:4.98},{name:"Prague",tz:1,el:180,lat:50.08,lon:-14.42},{name:"Frankfurt",tz:1,lat:50.12,lon:-8.65},{name:"Frankfurt On Maine",tz:1,lat:50.1,lon:-8.68},{name:"Zurich",tz:1,el:410,lat:47.37,lon:-8.53},{name:"Copenhagen",tz:1,lat:55.77,lon:-12.33},{name:"Casablanca",tz:0,lat:33.58,lon:7.58},{name:"Kiev",tz:2,lat:50.43,lon:-30.52},{name:"Colon",tz:1,el:46,lat:50.9,lon:-6.93},{name:"Robet",tz:0,lat:34.02,lon:6.8},{name:"Rodes",tz:2,lat:36.4,lon:-28.18},{name:"Rome",tz:1,lat:41.9,lon:-12.5},{name:"Shpolgen",tz:1,lat:46.55,lon:-9.32},{name:"Baku",tz:2,lat:40.4,lon:-49.82},{name:"Tarvisio",tz:1,lat:46.5,lon:-13.58},{name:"windischgarsten",tz:1,lat:47.72,lon:-14.32},{name:"Nesslau",tz:1,lat:47.2,lon:-9.2},{name:"Deerfield Beach",tz:-5,lat:26.32,lon:80.08},{name:"Hartford CT",tz:-5,lat:41.75,lon:72.7},{name:"Boro Park, Brooklyn NY",tz:-5,lat:40.63,lon:74},{name:"Brooklyn NY",tz:-5,lat:40.63,lon:73.95},{name:"Denver",tz:-7,el:1601,lat:39.75,lon:104.93},{name:"Houston",tz:-6,el:29,lat:29.83,lon:95.35},{name:"Hollywood",tz:-5,el:8,lat:26.1,lon:80.2},{name:"Washington DC",tz:-5,lat:38.9,lon:77.03},{name:"Los Angeles",tz:-8,lat:34.05,lon:118.23},{name:"Lakewood NJ",tz:-5,lat:40.1,lon:74.23},{name:"Monticello NY",tz:-5,lat:41.65,lon:74.73},{name:"Monsey NY",tz:-5,lat:41.1,lon:74.07},{name:"Miami",tz:-5,el:2,lat:25.83,lon:80.27},{name:"Miami Beach",tz:-5,el:3,lat:25.78,lon:80.28},{name:"Milwaukee",tz:-6,lat:43.03,lon:87.92},{name:"Miniappolis",tz:-6,el:253,lat:44.88,lon:93.22},{name:"Memphis TN",tz:-6,lat:35.13,lon:90.03},{name:"New Orleans",tz:-6,el:1,lat:30,lon:90.12},{name:"New Square NY",tz:-5,lat:41.1,lon:74.07},{name:"San Juan",tz:-8,lat:37.33,lon:121.88},{name:"San Diego",tz:-8,lat:32.72,lon:117.13},{name:"Saint Louis",tz:-6,lat:38.65,lon:90.32},{name:"Pittsburgh",tz:-5,lat:40.4,lon:80.03},{name:"Philadelphia",tz:-5,lat:39.93,lon:75.17},{name:"Providence RI",tz:-5,lat:41.82,lon:71.4},{name:"Kansas City",tz:-6,el:225,lat:39.1,lon:94.6},{name:"Kiryas Joel NY",tz:-5,lat:41.33,lon:74.17},{name:"Cali",tz:-5,lat:3.45,lon:76.52},{name:"Medellin",tz:-5,lat:6.25,lon:75.57},{name:"Honolulu",tz:-10,lat:21.32,lon:157.83},{name:"Santiago de Chile",tz:-4,lat:-33.45,lon:70.67},{name:"Nairobi",tz:3,lat:-1.28,lon:-36.82},{name:"Taipei",tz:8,lat:25.05,lon:-121.5},{name:"Rangun (GMT+6)",tz:6,lat:16.78,lon:-96.17},{name:"Rangun (GMT+7)",tz:7,lat:16.78,lon:-96.17},{name:"Rio de Janeiro",tz:-3,lat:-22.9,lon:43.25},{name:"Kapstadt (Capetown)",tz:2,lat:-33.9,lon:-18.37},{name:"San Juan (P.R.)",tz:-4,lat:18.47,lon:66.1},{name:"Elizabeth, N.J, US",tz:-5,lat:40.67,lon:74.18},{name:"Aach",tz:1,lat:47.83,lon:-8.85},{name:"Adelsheim",tz:1,lat:49.4,lon:-9.38},{name:"Altlandsberg",tz:1,lat:52.55,lon:-13.72},{name:"Angermnde",tz:1,lat:53.02,lon:-14},{name:"Anklam",tz:1,lat:53.85,lon:-13.68},{name:"Annaberg",tz:1,lat:57.52,lon:-13.43},{name:"Ansbach",tz:1,lat:49.28,lon:-10.57},{name:"Apolda",tz:1,lat:51.02,lon:-11.52},{name:"Arnstadt",tz:1,lat:50.83,lon:-10.95},{name:"Aschersleben",tz:1,lat:51.75,lon:-11.45},{name:"Bad Berka",tz:1,lat:50.9,lon:-11.28},{name:"Bad Cannstatt",tz:1,lat:48.8,lon:-9.18},{name:"Bad Freienwalde",tz:1,lat:52.78,lon:-14.02},{name:"Bad Gottleuba",tz:1,lat:50.85,lon:-13.93},{name:"Bad Krozingen",tz:1,lat:47.92,lon:-7.72},{name:"Bad Mergenheim",tz:1,lat:49.5,lon:-9.77},{name:"Bad Mingolsheim",tz:1,lat:49.23,lon:-8.65},{name:"Bad Rappenau",tz:1,lat:49.32,lon:-9.1},{name:"Bad Salzungen",tz:1,lat:50.8,lon:-10.22},{name:"Bad Wilznack",tz:1,lat:52.95,lon:-11.95},{name:"Bad Wimpfen",tz:1,lat:49.23,lon:-9.15},{name:"Baiersdorf",tz:1,lat:49.65,lon:-11.02},{name:"Ballenstedt",tz:1,lat:51.72,lon:-11.23},{name:"Barby",tz:1,lat:51.97,lon:-11.88},{name:"Bautzen",tz:1,lat:51.18,lon:-14.43},{name:"Beelitz",tz:1,lat:52.23,lon:-12.97},{name:"Beeskow",tz:1,lat:52.17,lon:-14.23},{name:"Bernau",tz:1,lat:47.8,lon:-12.37},{name:"Bernburg",tz:1,lat:51.8,lon:-11.73},{name:"Biesenthal",tz:1,lat:52.77,lon:-13.62},{name:"Bleicherode",tz:1,lat:51.43,lon:-10.57},{name:"Boizenburg",tz:1,lat:53.37,lon:-10.72},{name:"Borna",tz:1,lat:51.32,lon:-13.18},{name:"Breisach",tz:1,lat:48.02,lon:-7.67},{name:"Brel",tz:1,lat:53.73,lon:-11.72},{name:"Burg",tz:1,lat:52.27,lon:-11.85},{name:"Btzow",tz:1,lat:53.83,lon:-11.98},{name:"Calbe",tz:1,lat:51.9,lon:-11.77},{name:"Calvrde",tz:1,lat:52.38,lon:-11.28},{name:"Caputh",tz:1,lat:52.35,lon:-13},{name:"Coesfeld",tz:1,lat:51.93,lon:-7.17},{name:"Coswig",tz:1,lat:51.88,lon:-12.43},{name:"Crivitz",tz:1,lat:53.58,lon:-11.63},{name:"Dargun",tz:1,lat:53.9,lon:-12.85},{name:"Deggendorf",tz:1,lat:48.85,lon:-12.98},{name:"Delitzsch",tz:1,lat:51.52,lon:-12.33},{name:"Aachen",tz:1,lat:50.78,lon:-6.08},{name:"Altensteig",tz:1,lat:48.58,lon:-8.6},{name:"Amberg",tz:1,lat:49.45,lon:-11.87},{name:"Augsburg",tz:1,lat:48.38,lon:-10.88},{name:"Aurich",tz:1,lat:53.47,lon:-7.48},{name:"Bad Kissingen",tz:1,lat:50.2,lon:-10.05},{name:"Bad Kreuznach",tz:1,lat:49.87,lon:-7.85},{name:"Bad Nauheim",tz:1,lat:50.37,lon:-8.73},{name:"Baden-Baden",tz:1,lat:48.77,lon:-8.23},{name:"Bamberg",tz:1,lat:49.88,lon:-10.88},{name:"Bayreuth",tz:1,lat:49.95,lon:-11.58},{name:"Berlin",tz:1,lat:52.52,lon:-13.38},{name:"Bielefeld",tz:1,lat:52.02,lon:-8.52},{name:"Bonn",tz:1,lat:50.73,lon:-7.1},{name:"Brandenburg",tz:1,lat:52.4,lon:-12.53},{name:"Braunschweig",tz:1,lat:52.27,lon:-10.52},{name:"Bremen",tz:1,lat:53.07,lon:-8.82},{name:"Bremerhaven",tz:1,lat:53.55,lon:-8.57},{name:"Calw",tz:1,lat:48.72,lon:-8.73},{name:"Celle",tz:1,lat:52.62,lon:-10.08},{name:"Chemnitz",tz:1,lat:50.83,lon:-12.92},{name:"Cottbus",tz:1,lat:51.75,lon:-14.32},{name:"Dachau",tz:1,lat:48.25,lon:-11.45},{name:"Darmstadt",tz:1,lat:49.88,lon:-8.67},{name:"Dessau",tz:1,lat:51.83,lon:-12.23},{name:"Dortmund",tz:1,lat:51.52,lon:-7.47},{name:"Dresden",tz:1,lat:51.05,lon:-13.73},{name:"Duisburg",tz:1,lat:51.42,lon:-6.77},{name:"Dsseldorf",tz:1,lat:51.2,lon:-6.78},{name:"Emmendingen",tz:1,lat:48.12,lon:-7.83},{name:"Erfurt",tz:1,lat:50.97,lon:-11.02},{name:"Essen/Ruhr",tz:1,lat:51.47,lon:-7.02},{name:"Frankfurt/Main",tz:1,lat:50.12,lon:-8.67},{name:"Frankfurt/Oder",tz:1,lat:52.33,lon:-14.55},{name:"Freiburg i. Br.",tz:1,lat:47.98,lon:-7.85},{name:"Frth",tz:1,lat:49.47,lon:-10.98},{name:"Fulda",tz:1,lat:50.55,lon:-9.68},{name:"Gelsenkirchen",tz:1,lat:51.52,lon:-7.12},{name:"Gieen",tz:1,lat:50.58,lon:-8.67},{name:"Gttingen",tz:1,lat:51.53,lon:-9.92},{name:"Grabow",tz:1,lat:53.27,lon:-11.57},{name:"Hagen (Westf)",tz:1,lat:51.37,lon:-7.47},{name:"Halle/Saale",tz:1,lat:51.48,lon:-11.97},{name:"Hamburg",tz:1,lat:53.55,lon:-9.98},{name:"Hameln",tz:1,lat:52.1,lon:-9.35},{name:"Hannover",tz:1,lat:52.4,lon:-9.73},{name:"Havelberg",tz:1,lat:52.83,lon:-12.07},{name:"Heidelberg",tz:1,lat:49.42,lon:-8.72},{name:"Herford",tz:1,lat:52.1,lon:-8.67},{name:"Hessisch Oldendorf",tz:1,lat:52.17,lon:-9.25},{name:"Hildesheim",tz:1,lat:52.15,lon:-9.95},{name:"Hof",tz:1,lat:50.3,lon:-11.92},{name:"Idar-Oberstein",tz:1,lat:49.7,lon:-7.32},{name:"Kaiserslautern",tz:1,lat:49.43,lon:-7.77},{name:"Karlsruhe",tz:1,lat:49.05,lon:-8.4},{name:"Kassel",tz:1,lat:51.32,lon:-9.47},{name:"Kiel",tz:1,lat:54.33,lon:-10.13},{name:"Kleinmachnow",tz:1,lat:52.4,lon:-13.25},{name:"Koblenz",tz:1,lat:50.35,lon:-7.58},{name:"Kln",tz:1,lat:50.93,lon:-6.98},{name:"Krefeld",tz:1,lat:51.33,lon:-6.57},{name:"Leipzig",tz:1,lat:51.32,lon:-12.33},{name:"Lrrach",tz:1,lat:47.62,lon:-7.67},{name:"Lbeck",tz:1,lat:53.87,lon:-10.67},{name:"Ludwigshafen",tz:1,lat:49.48,lon:-8.43},{name:"Ludwigslust",tz:1,lat:53.32,lon:-11.5},{name:"Magdeburg",tz:1,lat:52.12,lon:-11.63},{name:"Mainz",tz:1,lat:50.02,lon:-8.27},{name:"Mannheim",tz:1,lat:49.48,lon:-8.47},{name:"Marburg",tz:1,lat:50.82,lon:-8.77},{name:"Minden",tz:1,lat:52.28,lon:-8.92},{name:"Mnchengladbach",tz:1,lat:51.2,lon:-6.47},{name:"Mnchen",tz:1,lat:48.13,lon:-11.57},{name:"Nagold",tz:1,lat:48.55,lon:-8.72},{name:"Neumnster",tz:1,lat:54.07,lon:-9.98},{name:"Neuruppin",tz:1,lat:52.92,lon:-12.8},{name:"Neustadt/Weinstrae",tz:1,lat:49.35,lon:-8.13},{name:"Neustrelitz",tz:1,lat:53.35,lon:-13.07},{name:"Nrnberg",tz:1,lat:49.45,lon:-11.07},{name:"Offenbach",tz:1,lat:50.13,lon:-8.78},{name:"Oldenburg",tz:1,lat:53.13,lon:-8.22},{name:"Oldenburg in Holstein",tz:1,lat:54.28,lon:-10.87},{name:"Osnabrck",tz:1,lat:52.27,lon:-8.03},{name:"Paderborn",tz:1,lat:51.72,lon:-8.73},{name:"Perleberg",tz:1,lat:53.07,lon:-11.85},{name:"Pforzheim",tz:1,lat:48.9,lon:-8.7},{name:"Potsdam",tz:1,lat:52.4,lon:-13.07},{name:"Pritzwalk",tz:1,lat:53.15,lon:-12.17},{name:"Rathenow",tz:1,lat:52.6,lon:-12.33},{name:"Recklinghausen",tz:1,lat:51.6,lon:-7.22},{name:"Regensburg",tz:1,lat:49.02,lon:-12.1},{name:"Rinteln",tz:1,lat:52.18,lon:-9.05},{name:"Rostock",tz:1,lat:54.08,lon:-12.12},{name:"Saarbrcken",tz:1,lat:49.23,lon:-6.98},{name:"Salzgitter",tz:1,lat:52.17,lon:-10.42},{name:"Schwerin",tz:1,lat:53.63,lon:-11.42},{name:"Sobernheim",tz:1,lat:49.78,lon:-7.63},{name:"Stendal",tz:1,lat:52.6,lon:-11.85},{name:"Straubing",tz:1,lat:48.88,lon:-12.57},{name:"Strausberg",tz:1,lat:52.58,lon:-13.88},{name:"Stuttgart",tz:1,lat:48.77,lon:-9.18},{name:"Trier",tz:1,lat:49.75,lon:-6.63},{name:"Tbingen",tz:1,lat:48.52,lon:-9.03},{name:"Weiden in der Oberpfalz",tz:1,lat:49.68,lon:-12.17},{name:"Wiesbaden",tz:1,lat:50.08,lon:-8.23},{name:"Wismar",tz:1,lat:53.88,lon:-11.47},{name:"Wittenberg",tz:1,lat:51.87,lon:-12.65},{name:"Wittenberge",tz:1,lat:53,lon:-11.73},{name:"Wittstock",tz:1,lat:53.17,lon:-12.48},{name:"Wrlitz",tz:1,lat:51.83,lon:-12.42},{name:"Wuppertal",tz:1,lat:51.27,lon:-7.18},{name:"Wrzburg",tz:1,lat:49.8,lon:-9.93},{name:"Basel",tz:1,lat:47.63,lon:-7.67},{name:"Bern",tz:1,lat:46.95,lon:-7.43},{name:"Bremgarten",tz:1,lat:47.35,lon:-8.35},{name:"Geneve",tz:1,lat:46.2,lon:-6.15},{name:"Mnsingen",tz:1,lat:46.88,lon:-7.57},{name:"Sankt Gallen",tz:1,lat:47.42,lon:-9.38},{name:"Vevey",tz:1,lat:46.47,lon:-6.85},{name:"Winterthur",tz:1,lat:47.5,lon:-8.72},{name:"Zug",tz:1,lat:47.17,lon:-8.52},{name:"Zrich",tz:1,lat:47.38,lon:-8.53},{name:"Graz",tz:1,lat:47.08,lon:-15.45},{name:"Innsbruck",tz:1,lat:47.27,lon:-11.4},{name:"Linz",tz:1,lat:48.3,lon:-14.3},{name:"Salzburg",tz:1,lat:47.8,lon:-13.03},{name:"Wien",tz:1,lat:48.22,lon:-16.33},{name:"Antwerpen",tz:1,lat:51.22,lon:-4.42},{name:"Arlon",tz:1,lat:49.68,lon:-5.82},{name:"Brssel",tz:1,lat:50.83,lon:-4.33},{name:"Charleroi",tz:1,lat:50.42,lon:-4.43},{name:"Gent",tz:1,lat:51.05,lon:-3.72},{name:"Knokke",tz:1,lat:51.35,lon:-3.28},{name:"Lige",tz:1,lat:50.63,lon:-5.57},{name:"Mons",tz:1,lat:50.45,lon:-3.93},{name:"Ostende",tz:1,lat:51.22,lon:-2.9},{name:"Amersfoort",tz:1,lat:52.15,lon:-5.4},{name:"Amsterdam",tz:1,lat:52.37,lon:-4.9},{name:"Arnheim",tz:1,lat:52.02,lon:-5.88},{name:"Bussum",tz:1,lat:52.27,lon:-5.15},{name:"Den Haag",tz:1,lat:52.1,lon:-4.3},{name:"Eindhoven",tz:1,lat:51.43,lon:-5.47},{name:"Enschede",tz:1,lat:52.2,lon:-6.88},{name:"Groningen",tz:1,lat:53.22,lon:-6.55},{name:"Hilversum",tz:1,lat:52.23,lon:-5.15},{name:"Leiden",tz:1,lat:52.15,lon:-4.5},{name:"Maastricht",tz:1,lat:50.87,lon:-5.72},{name:"Rotterdam",tz:1,lat:51.92,lon:-4.47},{name:"Tilburg",tz:1,lat:51.57,lon:-5.08},{name:"Utrecht",tz:1,lat:52.08,lon:-5.13},{name:"Zwolle",tz:1,lat:52.5,lon:-6.08},{name:"Crossen",tz:1,lat:50.75,lon:-12.48},{name:"Krakau",tz:1,lat:50.05,lon:-19.95},{name:"Lodz",tz:1,lat:51.77,lon:-19.22},{name:"Tarnw",tz:1,lat:52.78,lon:-14.97},{name:"Warschau",tz:1,lat:52.25,lon:-21},{name:"Wroczlaw (Breslau)",tz:1,lat:51.1,lon:-17},{name:"Birobidzan",tz:9,lat:48.8,lon:-132.95},{name:"Irkutsk",tz:8,lat:52.27,lon:-104.33},{name:"Kiew",tz:2,lat:50.43,lon:-30.52},{name:"Moskau",tz:3,lat:55.75,lon:-37.58},{name:"St. Petersburg",tz:3,lat:59.92,lon:-30.25},{name:"Taschkent",tz:6,lat:41.33,lon:-69.3},{name:"Tblisi",tz:3,lat:41.72,lon:-44.82},{name:"Montreal, Fr.",tz:1,lat:47.53,lon:-4.02},{name:"Lausanne",tz:1,lat:46.52,lon:-6.63},{name:"Nice",tz:1,lat:43.7,lon:-7.25},{name:"Paris",tz:1,lat:48.87,lon:-2.33},{name:"Birmingham",tz:0,lat:52.5,lon:1.83},{name:"Bradford",tz:0,lat:53.8,lon:1.75},{name:"Bristol",tz:0,lat:51.45,lon:2.58},{name:"Edinburgh",tz:0,lat:55.95,lon:3.22},{name:"Gateshead",tz:0,lat:54.97,lon:1.62},{name:"Glasgow",tz:0,lat:55.88,lon:4.25},{name:"Sheffield",tz:0,lat:53.38,lon:1.5},{name:"Belfast",tz:0,lat:54.58,lon:5.92},{name:"Dublin",tz:0,lat:53.33,lon:6.25},{name:"Tralee",tz:0,lat:52.27,lon:9.7},{name:"Atlanta (Ga., US)",tz:-5,lat:33.75,lon:84.38},{name:"Baltimore, MD",tz:-5,lat:39.28,lon:76.62},{name:"Bentonville, Arkansas",tz:-6,lat:36.37,lon:94.22},{name:"Boston, MA",tz:-5,lat:42.35,lon:71.07},{name:"Buffalo",tz:-5,lat:42.9,lon:78.88},{name:"Burlington (VT, US)",tz:-5,lat:44.48,lon:73.22},{name:"Canton, Ohio",tz:-5,lat:40.78,lon:81.37},{name:"Charleston (S.C., US)",tz:-5,lat:32.78,lon:79.93},{name:"Charlotte (N.C., US)",tz:-5,lat:35.23,lon:80.83},{name:"Chicago",tz:-6,lat:41.88,lon:87.63},{name:"Cincinnati, OH",tz:-5,lat:39.1,lon:84.63},{name:"Cleveland (Ohio, US)",tz:-5,lat:41.5,lon:81.68},{name:"Columbus, OH",tz:-5,lat:39.95,lon:83},{name:"Dallas, TX",tz:-6,lat:32.78,lon:96.8},{name:"Denver (Colo., US)",tz:-7,lat:39.72,lon:105.02},{name:"Detroit, MI",tz:-5,lat:42.33,lon:83.05},{name:"Essexville, MI",tz:-5,lat:43.62,lon:83.83},{name:"Fairbanks, AK",tz:-10,lat:64.85,lon:147.72},{name:"Flagstaff, Arizona",tz:-7,lat:35.18,lon:111.65},{name:"Hartford (Conn., US)",tz:-5,lat:41.77,lon:72.68},{name:"Houston, TX",tz:-6,lat:29.77,lon:95.37},{name:"Indianapolis, Indiana",tz:-6,lat:-19.03,lon:47.92},{name:"Kansas City (Kans., US)",tz:-6,lat:39.12,lon:94.65},{name:"Little Rock",tz:-6,lat:34.73,lon:92.25},{name:"Los Angeles (LA)",tz:-8,lat:34.05,lon:118.25},{name:"Louisville (Ky., US)",tz:-5,lat:38.25,lon:85.75},{name:"Madison (Wis., US)",tz:-6,lat:43.08,lon:89.37},{name:"Memphis (Tenn., US)",tz:-6,lat:35.13,lon:90.05},{name:"Miami, FL",tz:-5,lat:25.77,lon:80.2},{name:"Miami Beach, FL",tz:-5,lat:25.78,lon:80.13},{name:"Milwaukee (Wis., US)",tz:-6,lat:43.03,lon:87.92},{name:"Minneapolis, Minnesota",tz:-6,lat:44.98,lon:93.22},{name:"Mobile",tz:-6,lat:30.7,lon:88.08},{name:"Monticello",tz:-5,lat:41.65,lon:74.7},{name:"Naples (Fla., US)",tz:-5,lat:26.13,lon:81.8},{name:"Nashville (Tenn., US)",tz:-6,lat:36.15,lon:86.8},{name:"New Brunswick",tz:-5,lat:40.48,lon:74.45},{name:"New Haven (Conn., US)",tz:-5,lat:41.3,lon:72.93},{name:"New Orleans, Louisiana",tz:-6,lat:29.97,lon:90.12},{name:"New York, NY",tz:-5,lat:40.72,lon:74.02},{name:"New York, Brooklyn",tz:-5,lat:40.7,lon:74},{name:"Newark (N.J., US)",tz:-5,lat:40.73,lon:74.15},{name:"Newport (R.I., US)",tz:-5,lat:41.22,lon:71.3},{name:"Omaha, Nebraska",tz:-6,lat:41.27,lon:95.95},{name:"Orlando, FL",tz:-5,lat:28.53,lon:81.38},{name:"Philadelphia, Pennsylvania",tz:-5,lat:39.95,lon:75.1},{name:"Phoenix, Arizona",tz:-7,lat:33.45,lon:112.08},{name:"Pittsburgh, Pennsylvania",tz:-5,lat:40.43,lon:80},{name:"Portland (Maine, US)",tz:-5,lat:43.65,lon:70.28},{name:"Portland (Oreg, US)",tz:-8,lat:45.55,lon:112.6},{name:"Providence, RI",tz:-5,lat:41.83,lon:71.42},{name:"Salt Lake City, Utah",tz:-7,lat:40.77,lon:111.88},{name:"San Antonio, TX",tz:-6,lat:29.47,lon:98.52},{name:"San Francisco",tz:-8,lat:37.78,lon:122.4},{name:"Santa Fe (N.Mex., US)",tz:-7,lat:35.7,lon:106.95},{name:"Seattle, WA",tz:-8,lat:47.6,lon:122.33},{name:"Silver Spring",tz:-5,lat:39.03,lon:77.05},{name:"Springfield (Mass., US)",tz:-5,lat:42.12,lon:72.6},{name:"Stamford, CA",tz:-5,lat:41.05,lon:73.55},{name:"St. Louis",tz:-6,lat:38.63,lon:90.18},{name:"Tampa, FL",tz:-5,lat:27.95,lon:82.45},{name:"Topeka (KS, US)",tz:-6,lat:39.05,lon:95.68},{name:"Tucson",tz:-7,lat:32.22,lon:110.97},{name:"Washington, DC",tz:-5,lat:38.9,lon:77.02},{name:"Wichita, TX",tz:-6,lat:37.67,lon:97.33},{name:"Yellowstone Lake",tz:-7,lat:44.42,lon:110.37},{name:"Ancona",tz:1,lat:43.63,lon:-13.5},{name:"Asti",tz:1,lat:44.9,lon:-8.18},{name:"Bologna",tz:1,lat:44.48,lon:-11.33},{name:"Ferrara",tz:1,lat:44.83,lon:-11.58},{name:"Florenz",tz:1,lat:43.77,lon:-11.25},{name:"Genua",tz:1,lat:44.42,lon:-8.95},{name:"Livorno",tz:1,lat:43.55,lon:-10.32},{name:"Mantova",tz:1,lat:45.15,lon:-10.8},{name:"Meran",tz:1,lat:46.67,lon:-11.15},{name:"Mailand",tz:1,lat:45.47,lon:-9.18},{name:"Modena",tz:1,lat:44.67,lon:-10.92},{name:"Neapel",tz:1,lat:40.85,lon:-14.28},{name:"Padova",tz:1,lat:45.42,lon:-11.88},{name:"Parma",tz:1,lat:44.8,lon:-10.32},{name:"Perugia",tz:1,lat:43.13,lon:-12.37},{name:"Pisa",tz:1,lat:43.72,lon:-10.38},{name:"Rom",tz:1,lat:41.9,lon:-12.48},{name:"Siena",tz:1,lat:43.32,lon:-11.35},{name:"Spiazzo",tz:1,lat:46.12,lon:-10.67},{name:"Trieste",tz:1,lat:45.67,lon:-13.77},{name:"Turin",tz:1,lat:45.07,lon:-7.67},{name:"Venedig",tz:1,lat:45.45,lon:-12.35},{name:"Verona",tz:1,lat:45.45,lon:-11},{name:"Alburquerque",tz:1,lat:39.22,lon:7},{name:"Alicante",tz:1,lat:38.35,lon:.47},{name:"Barcelona",tz:1,lat:41.38,lon:-2.18},{name:"Mallorca",tz:1,lat:39.48,lon:-3},{name:"Marbella",tz:1,lat:36.52,lon:4.88},{name:"Sevilla",tz:1,lat:37.37,lon:5.98},{name:"Torremolinos",tz:1,lat:36.6,lon:4.5},{name:"Valencia",tz:1,lat:39.47,lon:.37},{name:"Belmonte",tz:0,lat:40.37,lon:7.37},{name:"Lissabon",tz:0,lat:38.72,lon:9.13},{name:"Porto",tz:0,lat:41.18,lon:8.6},{name:"Athen",tz:2,lat:37.97,lon:-23.72},{name:"Korfu",tz:2,lat:39.6,lon:-19.92},{name:"Rhodos",tz:2,lat:36.17,lon:-28},{name:"Saloniki",tz:2,lat:40.65,lon:-23.02},{name:"Trikala",tz:2,lat:39.57,lon:-21.77},{name:"Volos",tz:2,lat:39.35,lon:-22.93},{name:"Ankara",tz:2,lat:39.93,lon:-32.87},{name:"Bursa",tz:2,lat:40.18,lon:-29.07},{name:"Istanbul",tz:2,lat:41.02,lon:-28.97},{name:"Izmir",tz:2,lat:38.42,lon:-27.15},{name:"Esch-sur-Alzette",tz:1,lat:49.5,lon:-5.98},{name:"Luxemburg",tz:1,lat:49.6,lon:-6.15},{name:"Kopenhagen",tz:1,lat:55.67,lon:-12.58},{name:"Boras",tz:1,lat:57.72,lon:-12.92},{name:"Gteborg",tz:1,lat:57.72,lon:-11.97},{name:"Lund",tz:1,lat:55.7,lon:-13.18},{name:"Malm",tz:1,lat:55.6,lon:-13},{name:"Stockholm",tz:1,lat:59.33,lon:-18.05},{name:"Oslo",tz:1,lat:59.92,lon:-10.75},{name:"Trondheim",tz:1,lat:63.42,lon:-10.42},{name:"Helsinki",tz:2,lat:60.17,lon:-24.97},{name:"Turku",tz:2,lat:60.45,lon:-22.28},{name:"Pazardjik",tz:2,lat:42.2,lon:-24.33},{name:"Plovdiv",tz:2,lat:42.15,lon:-24.75},{name:"Ruse",tz:2,lat:43.83,lon:-25.95},{name:"Sofia",tz:2,lat:42.68,lon:-23.32},{name:"Bacau",tz:2,lat:46.57,lon:-26.92},{name:"Botosani",tz:2,lat:47.75,lon:-26.67},{name:"Brasov",tz:2,lat:45.65,lon:-25.62},{name:"Cluj",tz:2,lat:46.78,lon:-23.6},{name:"Constanta",tz:2,lat:44.18,lon:-28.65},{name:"Dorohoi",tz:2,lat:47.95,lon:-26.4},{name:"Galati",tz:2,lat:45.43,lon:-28.05},{name:"Iasi",tz:2,lat:47.17,lon:-27.58},{name:"Oradea",tz:2,lat:47.05,lon:-21.95},{name:"Piatra Neamt",tz:2,lat:46.93,lon:-26.37},{name:"Radauti",tz:2,lat:47.85,lon:-25.92},{name:"Satu Mare",tz:2,lat:47.8,lon:-22.88},{name:"Sighetul Marmatiei",tz:2,lat:47.93,lon:-23.9},{name:"Suceava",tz:2,lat:47.65,lon:-26.32},{name:"Timisoara",tz:2,lat:45.75,lon:-21.22},{name:"Tirgu Mures",tz:2,lat:46.55,lon:-24.55},{name:"Budapest",tz:1,lat:47.5,lon:-19.08},{name:"Sopron",tz:1,lat:47.68,lon:-16.6},{name:"Brnn",tz:1,lat:49.2,lon:-16.62},{name:"Karlsbad",tz:1,lat:50.18,lon:-12.87},{name:"Liberec",tz:1,lat:50.77,lon:-15.05},{name:"Olomouc",tz:1,lat:49.6,lon:-17.27},{name:"Ostrava",tz:1,lat:49.83,lon:-18.28},{name:"Pilsen",tz:1,lat:49.75,lon:-13.38},{name:"Prag",tz:1,lat:50.08,lon:-14.43},{name:"Teplice",tz:1,lat:50.65,lon:-13.8},{name:"Usti nad Labem",tz:1,lat:50.67,lon:-14.03},{name:"Bratislava",tz:1,lat:48.15,lon:-17.12},{name:"Galanta",tz:1,lat:48.2,lon:-17.72},{name:"Kosice",tz:1,lat:48.72,lon:-21.25},{name:"Piestany",tz:1,lat:48.6,lon:-17.83},{name:"Presov",tz:1,lat:49,lon:-21.25},{name:"Trnava",tz:1,lat:48.38,lon:-17.58},{name:"Belgrad",tz:1,lat:44.83,lon:-20.5},{name:"Novi Sad",tz:1,lat:45.25,lon:-19.83},{name:"Subotica",tz:1,lat:46.1,lon:-19.65},{name:"Dubrovnik",tz:1,lat:42.63,lon:-18.12},{name:"Rijeka",tz:1,lat:45.33,lon:-14.45},{name:"Split",tz:1,lat:43.52,lon:-16.45},{name:"Zagreb",tz:1,lat:45.8,lon:-15.97},{name:"Skopje",tz:1,lat:41.98,lon:-21.43},{name:"Sarajevo",tz:1,lat:43.87,lon:-18.42},{name:"Ljubljana",tz:1,lat:46.05,lon:-14.52},{name:"Teheran (GMT+3)",tz:3,lat:35.67,lon:-51.43},{name:"Teheran (GMT+4)",tz:4,lat:35.67,lon:-51.43},{name:"Tokyo",tz:9,lat:35.7,lon:-139.77},{name:"Asuncion",tz:-4,lat:-25.27,lon:57.67},{name:"Sao Paulo",tz:-3,lat:-23.53,lon:46.62},{name:"Buenos Aires",tz:-3,lat:-34.6,lon:58.45},{name:"Guangzhou (Canton)",tz:8,lat:23.1,lon:-113.27},{name:"Hong Kong",tz:8,lat:25.25,lon:-114.17},{name:"Peking (Beijing)",tz:8,lat:39.9,lon:-116.42},{name:"Shanghai",tz:8,lat:31.23,lon:-121.47},{name:"Shenyang",tz:8,lat:41.8,lon:-123.45},{name:"Bangkok",tz:7,lat:13.58,lon:-100.48},{name:"Neu Dehli (GMT+5)",tz:5,lat:28.3,lon:-77.47},{name:"Neu Dehli (GMT+6)",tz:6,lat:28.3,lon:-77.47},{name:"Kairo",tz:2,lat:29.67,lon:-31.02},{name:"Damaskus",tz:3,lat:33.13,lon:-36.43},{name:"Amman",tz:2,lat:31.7,lon:-35.88},{name:"Ar-Rijad (Riyadh)",tz:3,lat:24.63,lon:-46.72},{name:"Beirut",tz:2,lat:33.33,lon:-35.37},{name:"Pjongjang (Pyongyang)",tz:9,lat:39.02,lon:-125.75},{name:"Seoul (Soul)",tz:9,lat:37.55,lon:-126.97},{name:"Singapur",tz:8,lat:11.37,lon:-103.8},{name:"Lima",tz:-5,lat:-12.05,lon:77.05},{name:"Havana",tz:-5,lat:23.13,lon:82.37},{name:"Brisbane",tz:10,lat:-27.47,lon:-153.03},{name:"Canberra",tz:10,lat:-35.28,lon:-149.13},{name:"Sydney",tz:10,lat:-33.87,lon:-151.22},{name:"Halifax, N.S., Can.",tz:-4,lat:44.65,lon:63.6},{name:"Montreal, Quebec, Can.",tz:-5,lat:45.52,lon:73.57},{name:"Quebec",tz:-5,lat:46.82,lon:71.23},{name:"Vancouver",tz:-8,lat:49.27,lon:123.12},{name:"Demmin",tz:1,lat:53.9,lon:-13.03},{name:"Dieburg",tz:1,lat:49.9,lon:-8.83},{name:"Dmitz",tz:1,lat:53.13,lon:-11.23},{name:"Durlach",tz:1,lat:49,lon:-8.45},{name:"Landau",tz:1,lat:49.2,lon:-8.12},{name:"Landau an der Isar",tz:1,lat:48.67,lon:-12.72},{name:"Parchim",tz:1,lat:53.42,lon:-11.85},{name:"Suhl",tz:1,lat:50.62,lon:-10.68},{name:"Worms",tz:1,lat:49.63,lon:-8.37},{name:"Strasbourg",tz:1,lat:48.58,lon:-7.75},{name:"Kaunas",tz:2,lat:54.9,lon:-23.9},{name:"Knigsberg",tz:2,lat:54.72,lon:-20.5},{name:"Riga",tz:2,lat:56.95,lon:-24.1},{name:"Tallinn",tz:2,lat:59.42,lon:-24.75},{name:"Vilnius",tz:2,lat:54.68,lon:-25.32},{name:"Blackpool",tz:0,lat:53.83,lon:3.05},{name:"Bournemouth",tz:0,lat:50.72,lon:1.9},{name:"Brighton",tz:0,lat:50.83,lon:.13},{name:"Cambridge",tz:0,lat:52.22,lon:-.13},{name:"Coventry",tz:0,lat:52.42,lon:1.5},{name:"Croydon",tz:0,lat:51.38,lon:.1},{name:"Eastbourne",tz:0,lat:50.77,lon:-.28},{name:"Exeter",tz:0,lat:50.72,lon:3.52},{name:"Grimsby",tz:0,lat:53.58,lon:.08},{name:"Guildford",tz:0,lat:51.23,lon:.58},{name:"Harlow",tz:0,lat:51.78,lon:-.13},{name:"Harrogate",tz:0,lat:54,lon:1.55},{name:"Hemel Hempstead",tz:0,lat:51.77,lon:.47},{name:"Hove",tz:0,lat:50.82,lon:.17},{name:"Leicester",tz:0,lat:52.63,lon:1.08},{name:"Luton",tz:0,lat:51.88,lon:.42},{name:"Newcastle",tz:0,lat:54.2,lon:5.75},{name:"Norwich",tz:0,lat:52.63,lon:-1.3},{name:"Nottingham",tz:0,lat:52.97,lon:1.17},{name:"Oxford",tz:0,lat:51.77,lon:1.23},{name:"Plymouth",tz:0,lat:50.38,lon:4.15},{name:"Portsmouth",tz:0,lat:50.8,lon:1.08},{name:"Ramsgate",tz:0,lat:51.33,lon:-1.42},{name:"Reading",tz:0,lat:51.47,lon:.98},{name:"Rochester",tz:0,lat:51.4,lon:-.5},{name:"Saint Anne's",tz:0,lat:53.75,lon:3.03},{name:"Solihull",tz:0,lat:52.42,lon:1.75},{name:"Southend-on-SEA",tz:0,lat:51.55,lon:-.72},{name:"Southport",tz:0,lat:53.65,lon:3.02},{name:"Watford",tz:0,lat:51.67,lon:.42},{name:"Agen",tz:1,lat:44.2,lon:-.62},{name:"Aix-en-Provence",tz:1,lat:43.53,lon:-5.43},{name:"Aix-les-Bains",tz:1,lat:45.7,lon:-5.75},{name:"Annecy",tz:1,lat:45.9,lon:-6.12},{name:"Antibes",tz:1,lat:43.58,lon:-7.12},{name:"Arcachon",tz:1,lat:44.62,lon:1.2},{name:"Bayonne",tz:1,lat:43.48,lon:1.48},{name:"Belfort",tz:1,lat:47.63,lon:-6.87},{name:"Benfeld",tz:1,lat:48.37,lon:-7.6},{name:"Besancon",tz:1,lat:47.25,lon:-6.03},{name:"Biarritz",tz:1,lat:43.48,lon:1.57},{name:"Bordeuax",tz:1,lat:44.83,lon:.57},{name:"Boulay-Moselle",tz:1,lat:49.18,lon:-6.5},{name:"Boulogne-Sur-Mer",tz:1,lat:50.72,lon:-1.62},{name:"Brest, Fr.",tz:1,lat:48.4,lon:4.48},{name:"Caen",tz:1,lat:49.18,lon:.35},{name:"Caluire et Cuire",tz:1,lat:45.8,lon:-4.85},{name:"Cannes",tz:1,lat:43.55,lon:-7.02},{name:"Carpentras",tz:1,lat:44.05,lon:-5.05},{name:"Cavaillon",tz:1,lat:43.83,lon:-5.02},{name:"Chalons-Sur-Marne",tz:1,lat:48.95,lon:-4.37},{name:"Chalons-Sur-Saone",tz:1,lat:46.78,lon:-4.85},{name:"Clermont-Ferrand",tz:1,lat:45.78,lon:-3.08},{name:"Colmar",tz:1,lat:58.08,lon:-7.37},{name:"Dijon",tz:1,lat:47.32,lon:-5.02},{name:"Evian-Les-Bains",tz:1,lat:46.38,lon:-6.58},{name:"Grasse",tz:1,lat:43.67,lon:-6.92},{name:"Grenoble",tz:1,lat:45.17,lon:-5.72},{name:"Haguenau",tz:1,lat:48.82,lon:-7.78},{name:"La Rochelle",tz:1,lat:46.17,lon:1.17},{name:"La Seyne-Sur-Mer",tz:1,lat:43.1,lon:-5.88},{name:"Le Havre",tz:1,lat:49.5,lon:-.13},{name:"Lille",tz:1,lat:50.63,lon:-3.07},{name:"Limoges",tz:1,lat:45.83,lon:-1.25},{name:"Lyon",tz:1,lat:45.75,lon:-4.85},{name:"Mcon, Fr.",tz:1,lat:46.3,lon:-4.83},{name:"Menton",tz:1,lat:43.78,lon:-7.5},{name:"Metz",tz:1,lat:49.13,lon:-6.17},{name:"Montpellier",tz:1,lat:43.6,lon:-3.88},{name:"Mlhausen im Tle",tz:1,lat:48.57,lon:-9.65},{name:"Nancy",tz:1,lat:48.68,lon:-6.2},{name:"Nmes",tz:1,lat:43.83,lon:-4.35},{name:"Nizza Monferrato",tz:1,lat:44.77,lon:-8.35},{name:"Orlans, Fr.",tz:1,lat:47.92,lon:-1.9},{name:"Perpignan",tz:1,lat:42.68,lon:-2.87},{name:"Reims",tz:1,lat:49.25,lon:-4.02},{name:"Rouen",tz:1,lat:49.43,lon:-1.08},{name:"Saint-Louis, Fr.",tz:1,lat:47.58,lon:-7.57},{name:"Sens",tz:1,lat:48.2,lon:-3.28},{name:"Toulouse",tz:1,lat:43.6,lon:-1.43},{name:"Tours",tz:1,lat:47.38,lon:-.68},{name:"Troyes",tz:1,lat:48.3,lon:-4.08},{name:"Versailles, Fr.",tz:1,lat:48.8,lon:-2.13},{name:"Vittel",tz:1,lat:48.2,lon:-5.95},{name:"Wasselonne",tz:1,lat:48.63,lon:-7.45},{name:"Rothenburg ob der Tauber",tz:1,lat:49.38,lon:-10.17},{name:"Rothenburg",tz:1,lat:51.33,lon:-14.97},{name:"Rothenburg an der Oder",tz:1,lat:52.02,lon:-15.42},{name:"Alexandria, Egypt",tz:2,lat:31.18,lon:-29.93},{name:"Anchorage, AK",tz:-9,lat:61.22,lon:149.88},{name:"Ann Arbor, MI",tz:-5,lat:42.3,lon:83.75},{name:"Augusta, GA",tz:-5,lat:33.48,lon:81.93},{name:"Baghdad, Iraq",tz:3,lat:33.35,lon:-44.42},{name:"Birmingham, AL",tz:-6,lat:33.52,lon:86.82},{name:"Bombay, India (GMT+5)",tz:5,lat:18.95,lon:-72.83},{name:"Bombay, India (GMT+6)",tz:6,lat:18.95,lon:-72.83},{name:"Casablanca, Marokko",tz:0,lat:33.65,lon:7.58},{name:"Djakarta, Indonesia",tz:7,lat:-6.17,lon:-106.8},{name:"Desmoines, IA",tz:-6,lat:41.58,lon:93.62},{name:"Dubayy",tz:4,lat:25.3,lon:-55.3},{name:"Fort Lauderdale, FL",tz:-5,lat:26.12,lon:80.13},{name:"Jacksonsville, FL",tz:-5,lat:30.33,lon:81.67},{name:"Karachi",tz:5,lat:24.87,lon:-67.05},{name:"Kuala Lumpur, Malaysia",tz:8,lat:3.15,lon:-101.72},{name:"Kuwait, Kuwait",tz:3,lat:29.5,lon:-47.75},{name:"Lagos, Nigeria",tz:1,lat:6.45,lon:-3.4},{name:"Las Vegas, NV",tz:-8,lat:36.18,lon:115.13},{name:"Mauritius",tz:4,lat:-20.28,lon:-57.55},{name:"Panama, Panama",tz:-5,lat:8.97,lon:79.52},{name:"Peoria, IL",tz:-6,lat:40.7,lon:89.6},{name:"Raleigh, NC",tz:-5,lat:35.78,lon:78.65},{name:"Redmond, WA",tz:-8,lat:47.4,lon:122.07},{name:"Sacramento, CA",tz:-8,lat:38.58,lon:121.5},{name:"Tenerife, Spain",tz:1,lat:28.03,lon:-16.57},{name:"Durres, Albania",tz:1,lat:41.32,lon:-19.43},{name:"Lushnje, Albania",tz:1,lat:40.93,lon:-19.7},{name:"Lugoj, Romania",tz:2,lat:45.68,lon:-21.9},{name:"Shkoder, Albania",tz:1,lat:42.08,lon:-19.5},{name:"Addis Abeba",tz:3,lat:9.15,lon:-38.77},{name:"Aden, Jemen",tz:3,lat:12.78,lon:-45.03},{name:"Boca Raton, FL",tz:-5,lat:26.35,lon:80.08},{name:"Buchara",tz:5,lat:39.77,lon:-64.42},{name:"Gondar, Ethiopia",tz:3,lat:12.6,lon:-37.48},{name:"Jekaterinburg",tz:5,lat:56.83,lon:-60.5},{name:"Kaifeng, China",tz:8,lat:34.78,lon:-114.43},{name:"Krasnojarsk",tz:7,lat:56,lon:-92.98},{name:"Mbale, Uganda",tz:3,lat:1.07,lon:-34.18},{name:"New Bedfort, MA",tz:-5,lat:41.63,lon:70.93},{name:"Nicosia, Cyprus",tz:2,lat:34.78,lon:-33.48},{name:"Nowgorod",tz:3,lat:58.58,lon:-31.23},{name:"Omsk",tz:6,lat:54.95,lon:-73.33},{name:"Plano, TX",tz:-6,lat:33.03,lon:96.7},{name:"Perm",tz:5,lat:57.92,lon:-56.05},{name:"Sana, Jemen",tz:3,lat:15.18,lon:-44.02},{name:"Skokie, IL",tz:-6,lat:42.03,lon:87.77},{name:"Woronesch, Russia",tz:3,lat:51.7,lon:-39.25},{name:"Allentown, PA",tz:-5,lat:40.6,lon:75.48},{name:"Capetown, South Africa",tz:2,lat:-33.9,lon:-18.37},{name:"Chapel Hill, NC",tz:-5,lat:35.9,lon:79.07},{name:"Ft. Walton Beach, FL",tz:-5,lat:30.4,lon:86.52},{name:"Greenwich Meridian",tz:0,lat:0,lon:0},{name:"Monsey, NY",tz:-5,lat:41.12,lon:74.07},{name:"Ramat Gan",tz:2,lat:32.07,lon:-34.82},{name:"Lugano",tz:1,lat:46.02,lon:-8.97},{name:"Baden, Austria",tz:1,lat:48,lon:-16.23},{name:"Gadsten, AL",tz:-6,lat:34.02,lon:86.02},{name:"Huntsville, AL",tz:-6,lat:34.73,lon:86.58},{name:"Montgomery, AL",tz:-6,lat:32.37,lon:86.32},{name:"Juneau, AK",tz:-10,lat:58.3,lon:134.42},{name:"Nome, AK",tz:-10,lat:64.5,lon:165.42},{name:"Algiers",tz:1,lat:36.48,lon:-3},{name:"Luanda",tz:1,lat:-8.5,lon:-13.15},{name:"Yuma, Arizona",tz:-7,lat:32.72,lon:114.62},{name:"Ft Smith, Arkansas",tz:-6,lat:35.37,lon:94.43},{name:"Perth",tz:8,lat:-31.83,lon:-116.17},{name:"Porto Novo",tz:1,lat:6.3,lon:-2.45},{name:"Ouagadougou",tz:0,lat:12.2,lon:1.4},{name:"Bujumbura",tz:2,lat:-3.22,lon:-29.18},{name:"Bakersfield, CA",tz:-8,lat:35.37,lon:119.02},{name:"Berkeley, CA",tz:-8,lat:37.87,lon:122.27},{name:"Eureka, CA",tz:-8,lat:40.78,lon:124.17},{name:"Fresno, CA",tz:-8,lat:36.73,lon:119.78},{name:"Long Beach, CA",tz:-8,lat:33.77,lon:118.18},{name:"Oakland, CA",tz:-8,lat:37.78,lon:122.27},{name:"Pasadena, CA",tz:-8,lat:34.15,lon:118.15},{name:"San Bernardino, CA",tz:-8,lat:34.12,lon:117.47},{name:"San Jose, CA",tz:-8,lat:37.33,lon:121.88},{name:"Santa Barbara, CA",tz:-8,lat:34.42,lon:119.7},{name:"Santa Cruz, CA",tz:-8,lat:36.97,lon:122.02},{name:"Stockton, CA",tz:-8,lat:37.97,lon:121.28},{name:"Yaounde",tz:1,lat:3.52,lon:-11.32},{name:"Calgary",tz:-7,lat:51.05,lon:114.05},{name:"Edmondton",tz:-7,lat:53.55,lon:113.48},{name:"Lethbridge",tz:-7,lat:49.7,lon:112.83},{name:"Prince Rupert, British Columbia",tz:-8,lat:54.32,lon:130.32},{name:"Victoria, British Columbia",tz:-8,lat:48.43,lon:123.37},{name:"Brandon",tz:-6,lat:49.85,lon:99.95},{name:"Churchill",tz:-6,lat:58.75,lon:94.17},{name:"Fredericton",tz:-4,lat:45.97,lon:66.65},{name:"Moncton",tz:-4,lat:46.08,lon:64.78},{name:"St John",tz:-4,lat:45.27,lon:66.07},{name:"St John's",tz:-4,lat:47.57,lon:52.72},{name:"Yellowknife",tz:-7,lat:62.45,lon:114.38},{name:"Sydney, Canada",tz:-4,lat:46.13,lon:60.2},{name:"Belleville",tz:-5,lat:44.17,lon:77.38},{name:"Brantford",tz:-5,lat:43.15,lon:80.27},{name:"Burlington",tz:-5,lat:43.33,lon:79.8},{name:"Guelph",tz:-5,lat:43.55,lon:80.25},{name:"Hamilton",tz:-5,lat:43.25,lon:79.88},{name:"Kingston",tz:-5,lat:44.23,lon:76.48},{name:"Kitchener",tz:-5,lat:43.45,lon:80.48},{name:"London, Ontario",tz:-5,lat:42.98,lon:81.23},{name:"Mississauga",tz:-5,lat:43.55,lon:79.57},{name:"North Bay",tz:-5,lat:46.32,lon:79.47},{name:"Oshawa",tz:-5,lat:43.9,lon:78.87},{name:"Peterborough",tz:-5,lat:44.32,lon:78.32},{name:"St Catherines",tz:-5,lat:43.17,lon:79.25},{name:"Sault St Marie",tz:-5,lat:46.5,lon:84.33},{name:"Sudbury",tz:-5,lat:46.48,lon:80.98},{name:"Thunder Bay",tz:-5,lat:48.38,lon:89.25},{name:"Windsor",tz:-5,lat:42.32,lon:83.03},{name:"Hull",tz:-5,lat:45.43,lon:75.72},{name:"La Salle",tz:-5,lat:45.43,lon:73.67},{name:"Laval",tz:-5,lat:45.22,lon:73.75},{name:"Sherbrooke",tz:-5,lat:45.4,lon:71.85},{name:"Trois Riveres",tz:-5,lat:46.35,lon:72.55},{name:"Dawson",tz:-8,lat:64.07,lon:139.43},{name:"Whitehorse",tz:-8,lat:60.72,lon:135.05},{name:"Moose Jaw",tz:-6,lat:50.4,lon:105.53},{name:"Regina",tz:-6,lat:50.45,lon:104.62},{name:"Saskatoon",tz:-6,lat:52.13,lon:106.67},{name:"Bangui",tz:1,lat:4.22,lon:-18.37},{name:"N'Djamena",tz:1,lat:12.1,lon:-14.58},{name:"Grand Junction",tz:-7,lat:39.07,lon:108.57},{name:"Pueblo",tz:-7,lat:38.25,lon:104.62},{name:"Brazzaville",tz:1,lat:-4.13,lon:-15.13},{name:"Bridgeport",tz:-5,lat:41.18,lon:73.18},{name:"Abidjan",tz:0,lat:5.18,lon:4.02},{name:"Wilmington, Delaware",tz:-5,lat:39.75,lon:75.55},{name:"Quito",tz:-5,lat:-.28,lon:78.52},{name:"Daytona Beach, FL",tz:-5,lat:29.22,lon:81.02},{name:"Gainesville, FL",tz:-5,lat:29.65,lon:82.32},{name:"Key West, FL",tz:-5,lat:24.57,lon:81.8},{name:"Pensacola, FL",tz:-5,lat:30.42,lon:87.22},{name:"St. Petersburg, FL",tz:-5,lat:27.78,lon:82.63},{name:"Sarasota, FL",tz:-5,lat:27.33,lon:82.55},{name:"Tallahassee, FL",tz:-5,lat:30.45,lon:84.45},{name:"W. Palm Beach, FL",tz:-5,lat:26.72,lon:80.05},{name:"Libreville",tz:1,lat:.23,lon:-9.25},{name:"Banjul",tz:0,lat:13.28,lon:16.38},{name:"Augusta, Georgia",tz:-5,lat:33.47,lon:81.97},{name:"Columbus, Georgia",tz:-5,lat:32.47,lon:84.98},{name:"Macon, Georgia",tz:-5,lat:32.83,lon:83.63},{name:"Savannah, Georgia",tz:-5,lat:32.07,lon:81.1},{name:"Accra",tz:0,lat:5.33,lon:.15},{name:"Conakry",tz:0,lat:9.32,lon:-13.17},{name:"Hilo",tz:10,lat:19.73,lon:155.08},{name:"Lihue",tz:10,lat:21.98,lon:159.37},{name:"Victoria, Hongkong",tz:8,lat:22.17,lon:-114.3},{name:"Reykjavik",tz:0,lat:64.15,lon:21.65},{name:"Boise, Idaho",tz:-7,lat:43.62,lon:116.2},{name:"Pocatello, Idaho",tz:-7,lat:42.87,lon:112.45},{name:"Bloomington, IL",tz:-6,lat:40.48,lon:89},{name:"Champaign, IL",tz:-6,lat:40.12,lon:88.25},{name:"Decatur, IL",tz:-6,lat:39.85,lon:88.95},{name:"Moline, IL",tz:-6,lat:41.52,lon:90.52},{name:"Rockford, IL",tz:-6,lat:42.27,lon:89.1},{name:"Springfield, IL",tz:-6,lat:39.78,lon:89.65},{name:"Urbana, IL",tz:-6,lat:40.12,lon:88.2},{name:"Evansville, Indiana",tz:-6,lat:37.97,lon:87.57},{name:"Ft. Wayne, Indiana",tz:-6,lat:41.07,lon:85.13},{name:"Gary, Indiana",tz:-6,lat:41.62,lon:87.33},{name:"Lafayette, Indiana",tz:-6,lat:40.42,lon:86.9},{name:"Muncie, Indiana",tz:-6,lat:40.18,lon:85.38},{name:"South Bend, Indiana",tz:-6,lat:41.68,lon:86.25},{name:"Terre Houte, Indiana",tz:-6,lat:39.47,lon:87.4},{name:"Cedar Rapids, IA",tz:-6,lat:41.97,lon:91.67},{name:"Davenport, IA",tz:-6,lat:41.52,lon:90.58},{name:"Dubuque, IA",tz:-6,lat:42.5,lon:90.67},{name:"Iowa City, IA",tz:-6,lat:41.67,lon:91.53},{name:"Sioux City, IA",tz:-6,lat:42.5,lon:96.42},{name:"Waterloo, IA",tz:-6,lat:42.5,lon:92.33},{name:"Dodge City (Kans., US)",tz:-6,lat:37.75,lon:100.02},{name:"Salina (Kans., US)",tz:-6,lat:38.85,lon:97.62},{name:"Wichita (Kans., US)",tz:-6,lat:37.7,lon:97.33},{name:"Ashland, KY",tz:-5,lat:38.48,lon:82.63},{name:"Bowling Green, KY",tz:-5,lat:37,lon:86.45},{name:"Lexington, KY",tz:-5,lat:38.05,lon:84.5},{name:"Paducah, KY",tz:-5,lat:37.07,lon:88.6},{name:"Maseru",tz:2,lat:-29.18,lon:-27.28},{name:"Monrovia",tz:0,lat:6.2,lon:10.47},{name:"Tripoli",tz:1,lat:32.83,lon:-13.22},{name:"Baton Rouge, Louisiana",tz:-6,lat:30.45,lon:91.18},{name:"Shreveport, Louisiana",tz:-6,lat:32.52,lon:93.75},{name:"Antananarivo",tz:3,lat:-18.5,lon:-47.3},{name:"Augusta, Maine",tz:-5,lat:44.32,lon:69.75},{name:"Bangor, Maine",tz:-5,lat:44.8,lon:68.75},{name:"Lilongwe",tz:2,lat:-13.58,lon:-33.48},{name:"Bamako",tz:0,lat:12.4,lon:7.58},{name:"Brockton, MA",tz:-5,lat:42.08,lon:71.02},{name:"Cambridge, MA",tz:-5,lat:42.37,lon:71.1},{name:"Fall River, MA",tz:-5,lat:41.7,lon:71.15},{name:"Holyoke, MA",tz:-5,lat:42.2,lon:72.62},{name:"Lawrence, MA",tz:-5,lat:42.7,lon:71.15},{name:"Lowell, MA",tz:-5,lat:42.63,lon:71.32},{name:"Pittsfield, MA",tz:-5,lat:42.45,lon:73.25},{name:"Somerville, MA",tz:-5,lat:42.38,lon:71.1},{name:"Worcester, MA",tz:-5,lat:42.27,lon:71.8},{name:"Nouakchott",tz:0,lat:18.08,lon:15.58},{name:"Battle Creek, MI",tz:-5,lat:42.32,lon:85.18},{name:"Bay City, MI",tz:-5,lat:43.6,lon:83.88},{name:"Flint, MI",tz:-5,lat:43.02,lon:83.7},{name:"Grand Rapids, MI",tz:-5,lat:42.97,lon:85.67},{name:"Jackson, MI",tz:-5,lat:42.25,lon:84.4},{name:"Kalamazoo, MI",tz:-5,lat:42.28,lon:85.58},{name:"Lansing, MI",tz:-5,lat:42.73,lon:84.55},{name:"Saginaw, MI",tz:-5,lat:43.43,lon:83.93},{name:"Duluth, Minnesota",tz:-6,lat:46.78,lon:92.1},{name:"Rochester, Minnesota",tz:-6,lat:44.02,lon:92.47},{name:"St. Cloud, Minnesota",tz:-6,lat:45.57,lon:94.17},{name:"St. Paul, Minnesota",tz:-6,lat:44.95,lon:93.1},{name:"Biloxi, Mississippi",tz:-6,lat:30.4,lon:88.88},{name:"Gulfport, Mississippi",tz:-6,lat:30.37,lon:89.1},{name:"Jackson, Mississippi",tz:-6,lat:32.3,lon:90.18},{name:"Natchez, Mississippi",tz:-6,lat:31.57,lon:91.38},{name:"Columbia, Missouri",tz:-6,lat:38.95,lon:92.33},{name:"Joplin, Missouri",tz:-6,lat:37.07,lon:94.5},{name:"Kansas City, Missouri",tz:-6,lat:39.07,lon:94.58},{name:"St. Joseph, Missouri",tz:-6,lat:39.77,lon:94.85},{name:"St. Louis, Missouri",tz:-6,lat:38.63,lon:90.2},{name:"Springfield, Missouri",tz:-6,lat:37.22,lon:93.3},{name:"Billings, Montana",tz:-7,lat:45.78,lon:108.5},{name:"Butte, Montana",tz:-7,lat:46.02,lon:112.53},{name:"Great Falls, Montana",tz:-7,lat:47.5,lon:111.3},{name:"Helena, Montana",tz:-7,lat:46.6,lon:112.03},{name:"Rabat",tz:1,lat:34.02,lon:6.52},{name:"Maputo",tz:2,lat:-25.58,lon:-32.35},{name:"Windhoek",tz:2,lat:-22.33,lon:-17.07},{name:"Lincoln, Nebraska",tz:-6,lat:40.82,lon:96.7},{name:"Carson City, NV",tz:-8,lat:39.17,lon:119.77},{name:"Reno, NV",tz:-8,lat:39.52,lon:119.82},{name:"Concord, New Hampshire",tz:-5,lat:43.2,lon:71.52},{name:"Manchester, New Hampshire",tz:-5,lat:42.98,lon:71.47},{name:"Portsmouth, New Hampshire",tz:-5,lat:43.07,lon:70.75},{name:"Atlantic City, NJ",tz:-5,lat:39.37,lon:74.43},{name:"Camdon, NJ",tz:-5,lat:39.95,lon:75.1},{name:"Jersey City, NJ",tz:-5,lat:40.73,lon:74.07},{name:"Paterson, NJ",tz:-5,lat:40.9,lon:74.15},{name:"Trenton, NJ",tz:-5,lat:40.22,lon:74.8},{name:"Albuquerque, NM",tz:-7,lat:35.07,lon:106.65},{name:"Gallup, NM",tz:-7,lat:35.52,lon:108.73},{name:"Santa Fe, NM",tz:-7,lat:35.67,lon:105.93},{name:"Albany, NY",tz:-5,lat:42.65,lon:73.75},{name:"Binghamton, NY",tz:-5,lat:42.1,lon:86.82},{name:"Buffalo, NY",tz:-5,lat:42.88,lon:78.87},{name:"Central Islip, NY",tz:-5,lat:40.78,lon:73.2},{name:"Niagra Falls, NY",tz:-5,lat:43.1,lon:79.05},{name:"Rochester, NY",tz:-5,lat:43.17,lon:77.6},{name:"Schenectady, NY",tz:-5,lat:42.82,lon:73.93},{name:"Syracuse, NY",tz:-5,lat:43.05,lon:76.15},{name:"Troy, NY",tz:-5,lat:42.73,lon:73.68},{name:"Utica, NY",tz:-5,lat:43.1,lon:75.23},{name:"White Plains, NY",tz:-5,lat:41.03,lon:73.75},{name:"Yonkers, NY",tz:-5,lat:40.93,lon:73.9},{name:"Auckland",tz:12,lat:-36.88,lon:-174.75},{name:"Niamey",tz:1,lat:13.32,lon:-2.03},{name:"Lagos",tz:1,lat:6.27,lon:-3.28},{name:"Ashlville, NC",tz:-5,lat:35.6,lon:82.55},{name:"Durham, NC",tz:-5,lat:36,lon:78.92},{name:"Greensboro, NC",tz:-5,lat:36.07,lon:79.78},{name:"Wilmington, NC",tz:-5,lat:34.23,lon:77.93},{name:"Winston Salem, NC",tz:-5,lat:36.1,lon:80.25},{name:"Bismark, N. Dakota",tz:-7,lat:46.8,lon:100.78},{name:"Fargo, N. Dakota",tz:-7,lat:46.88,lon:96.78},{name:"Minot, N. Dakota",tz:-7,lat:48.23,lon:101.3},{name:"Akron, OH",tz:-5,lat:41.08,lon:81.52},{name:"Dayton, OH",tz:-5,lat:39.77,lon:84.2},{name:"Hamilton, OH",tz:-5,lat:39.4,lon:84.57},{name:"Lima, OH",tz:-5,lat:40.75,lon:84.1},{name:"Lorain, OH",tz:-5,lat:41.47,lon:82.18},{name:"Springfield, OH",tz:-5,lat:39.95,lon:83.8},{name:"Stuebenville, OH",tz:-5,lat:40.37,lon:80.62},{name:"Toledo, OH",tz:-5,lat:41.65,lon:83.55},{name:"Youngstown, OH",tz:-5,lat:41.1,lon:80.65},{name:"Zanesville, OH",tz:-5,lat:39.93,lon:82.52},{name:"Enid, Oklahoma",tz:-6,lat:36.4,lon:97.88},{name:"Oklahoma City",tz:-6,lat:35.47,lon:97.52},{name:"Tulsa, Oklahoma",tz:-6,lat:36.15,lon:96},{name:"Eugene (Oreg, US)",tz:-8,lat:44.05,lon:123.1},{name:"Salem (Oreg, US)",tz:-8,lat:44.93,lon:123.03},{name:"Altonna, Pennsylvania",tz:-5,lat:40.52,lon:78.38},{name:"Bethlehem, Pennsylvania",tz:-5,lat:40.6,lon:75.38},{name:"Erie, Pennsylvania",tz:-5,lat:42.12,lon:80.08},{name:"Harrisburg, Pennsylvania",tz:-5,lat:40.25,lon:76.88},{name:"Johnstown, Pennsylvania",tz:-5,lat:40.33,lon:78.92},{name:"Lancaster, Pennsylvania",tz:-5,lat:40.03,lon:76.3},{name:"Reading, Pennsylvania",tz:-5,lat:40.33,lon:75.93},{name:"Scranton, Pennsylvania",tz:-5,lat:41.42,lon:75.67},{name:"WilkesEBarre, Pennsylvania",tz:-5,lat:41.25,lon:75.88},{name:"York, Pennsylvania",tz:-5,lat:39.97,lon:76.73},{name:"Manila",tz:8,lat:14.62,lon:-121},{name:"Kigali",tz:2,lat:-1.57,lon:-3.03},{name:"Dakar",tz:0,lat:14.38,lon:17.27},{name:"Mogadishu",tz:3,lat:2,lon:-45.22},{name:"Columbia, SC",tz:-5,lat:34,lon:81.03},{name:"Greenville, SC",tz:-5,lat:34.85,lon:82.4},{name:"Spartanburg, SC",tz:-5,lat:34.95,lon:81.93},{name:"Pierre, South Dakota",tz:-6,lat:44.37,lon:100.35},{name:"Rapid City, South Dakota",tz:-6,lat:44.08,lon:103.22},{name:"Sioux Falls, South Dakota",tz:-6,lat:43.55,lon:96.73},{name:"Khartoum",tz:2,lat:15.33,lon:-32.22},{name:"Daressalam",tz:3,lat:-6.52,lon:-39.18},{name:"Chattanooga (Tenn., US)",tz:-6,lat:35.05,lon:85.32},{name:"Knoxville (Tenn., US)",tz:-6,lat:35.97,lon:83.92},{name:"Abilene, TX",tz:-6,lat:32.45,lon:99.73},{name:"Amarillo, TX",tz:-6,lat:35.18,lon:101.83},{name:"Austin, TX",tz:-6,lat:30.27,lon:97.75},{name:"Beaumont, TX",tz:-6,lat:30.08,lon:94.1},{name:"Brownsville, TX",tz:-6,lat:25.9,lon:97.5},{name:"Corpus Christi, TX",tz:-6,lat:27.8,lon:97.4},{name:"El Paso, TX",tz:-6,lat:31.77,lon:106.48},{name:"Ft Worth, TX",tz:-6,lat:32.75,lon:97.33},{name:"Galveston, TX",tz:-6,lat:29.3,lon:94.8},{name:"Laredo, TX",tz:-6,lat:27.5,lon:99.52},{name:"Lubbock, TX",tz:-6,lat:33.58,lon:101.85},{name:"Marshall, TX",tz:-6,lat:32.55,lon:94.38},{name:"Port Arthur, TX",tz:-6,lat:29.88,lon:93.93},{name:"San Angelo, TX",tz:-6,lat:31.47,lon:100.43},{name:"Texarkana, TX",tz:-6,lat:33.43,lon:94.05},{name:"Waco, TX",tz:-6,lat:31.55,lon:97.13},{name:"Lhasa",tz:8,lat:29.68,lon:-92.2},{name:"Lome",tz:0,lat:6.1,lon:-1.2},{name:"Tunis",tz:1,lat:36.48,lon:-10.13},{name:"Kampala",tz:3,lat:.2,lon:-32.35},{name:"Logan, Utah",tz:-7,lat:41.73,lon:111.83},{name:"Ogden, Utah",tz:-7,lat:41.23,lon:111.97},{name:"Provo, Utah",tz:-7,lat:40.23,lon:111.65},{name:"Brattleboro, VT",tz:-5,lat:42.85,lon:72.57},{name:"Montpelier, VT",tz:-5,lat:44.27,lon:72.55},{name:"Hanoi",tz:7,lat:21.07,lon:-105.83},{name:"Norfolk, Virginia",tz:-5,lat:36.85,lon:76.28},{name:"Portsmouth, Virginia",tz:-5,lat:36.83,lon:76.28},{name:"Richmond, Virginia",tz:-5,lat:37.53,lon:77.43},{name:"Roanooke, Virginia",tz:-5,lat:37.25,lon:79.93},{name:"Bellingham, WA",tz:-8,lat:48.77,lon:122.48},{name:"Spokane, WA",tz:-8,lat:47.67,lon:117.43},{name:"Tacoma, WA",tz:-8,lat:47.25,lon:122.43},{name:"Walla Walla, WA",tz:-8,lat:46.07,lon:118.33},{name:"Yakima, WA",tz:-8,lat:46.6,lon:120.52},{name:"Laayoune",tz:1,lat:27.1,lon:13.12},{name:"Charleston, West Virginia",tz:-5,lat:38.35,lon:81.63},{name:"Huntington, West Virginia",tz:-5,lat:38.42,lon:82.45},{name:"Wheeling, West Virginia",tz:-5,lat:40.07,lon:80.72},{name:"Eau Claire (Wis., US)",tz:-6,lat:44.82,lon:91.5},{name:"Green Bay (Wis., US)",tz:-6,lat:44.52,lon:88.02},{name:"Kenosha (Wis., US)",tz:-6,lat:42.6,lon:87.83},{name:"Racine (Wis., US)",tz:-6,lat:42.73,lon:87.78},{name:"Sheboygan (Wis., US)",tz:-6,lat:43.75,lon:87.72},{name:"Superior (Wis., US)",tz:-6,lat:46.72,lon:92.1},{name:"Cheyenne, Wyoming",tz:-7,lat:41.13,lon:104.82},{name:"Sheridan, Wyoming",tz:-7,lat:44.8,lon:106.95},{name:"Lusaka",tz:2,lat:-15.28,lon:-28.17},{name:"Kinshasa",tz:1,lat:-4.18,lon:-15.18},{name:"Harare",tz:2,lat:-17.5,lon:-31.03},{name:"Abu Dhabi",tz:4,lat:24.33,lon:-54.57},{name:"Acapulco",tz:-6,lat:17.08,lon:100.13},{name:"Agana, Guam",tz:10,lat:13.48,lon:-144.73},{name:"Al-Manamah, Bharain",tz:3,lat:26.22,lon:-50.55},{name:"Andorra, Spain",tz:1,lat:40.97,lon:.47},{name:"Asmara, Eritrea",tz:3,lat:15.02,lon:-38.48},{name:"Baku, Aserbaidschan",tz:4,lat:40.35,lon:-49.82},{name:"Bergen, The Netherlands",tz:1,lat:51.62,lon:-6.07},{name:"Bischkek, Kirgistan",tz:6,lat:43.02,lon:-74.97},{name:"Bridgetown (Barbados)",tz:-4,lat:13.08,lon:59.47},{name:"Brno",tz:1,lat:49.2,lon:-16.58},{name:"Broken Hill, Australia",tz:10,lat:-31.87,lon:-141.17},{name:"Bukavu, Zaire",tz:2,lat:-2.55,lon:-28.65},{name:"Kanarische Inseln",tz:0,lat:28.47,lon:15.05},{name:"Cayenne (French - Guyana)",tz:-3,lat:4.78,lon:-52.47},{name:"Cebu, Phillipines",tz:8,lat:10.18,lon:-123.75},{name:"Cordoba, Spain",tz:1,lat:57.87,lon:4.83},{name:"Cordoba, Argentinia",tz:-3,lat:-31.15,lon:64.25},{name:"Cordova, Alaska, U.S.A.",tz:-9,lat:60.55,lon:145.73},{name:"Dalian, China",tz:8,lat:38.9,lon:-121.65},{name:"Dakar, Senegal",tz:0,lat:14.78,lon:16.95},{name:"Dhaka, Bangladesh",tz:6,lat:23.48,lon:-90.4},{name:"Durban, South Africa",tz:2,lat:-29.87,lon:-30.9},{name:"Dushanbe, Tadschikistan",tz:6,lat:38.6,lon:-69.1},{name:"Er Riad",tz:3,lat:24.65,lon:-46.7},{name:"Firenze, Italy",tz:1,lat:43.77,lon:-11.23},{name:"Freetown, Sierra Leone",tz:0,lat:8.5,lon:13.22},{name:"Georgetown, Gambia",tz:0,lat:13.22,lon:14.75},{name:"Guatemala City",tz:-6,lat:14.58,lon:90.67},{name:"Hermosillo, Mexico",tz:-6,lat:29.18,lon:110.98},{name:"Jakarta, Indonesia",tz:7,lat:-6.28,lon:-106.65},{name:"Katmandu, Nepal",tz:6,lat:27.67,lon:-85.47},{name:"Khabarovsk, Russia",tz:10,lat:48.07,lon:-134.63},{name:"Khartoum, Sudan",tz:2,lat:15.23,lon:-32.57},{name:"La Paz, Argentinia",tz:-3,lat:-30.75,lon:59.67},{name:"La Plata, Argentinia",tz:-3,lat:-34.97,lon:57.97},{name:"Limerick, Ireland",tz:0,lat:52.7,lon:8.67},{name:"Macao, China",tz:8,lat:22.22,lon:-113.6},{name:"Managua, Nikaragva",tz:-6,lat:12.15,lon:86.32},{name:"Manaus",tz:-4,lat:-2.87,lon:60.12},{name:"Maracaibo, Venezuela",tz:-4,lat:10.52,lon:71.97},{name:"Mbabane, Swasiland",tz:2,lat:-26.07,lon:-31.15},{name:"Monte Carlo, Monaco",tz:1,lat:43.73,lon:-7.42},{name:"Nassau, Germany",tz:1,lat:50.32,lon:-7.8},{name:"Nandi, Simbabwe",tz:2,lat:-20.98,lon:-31.78},{name:"Nantes, France",tz:1,lat:47.23,lon:1.48},{name:"Noumea, New Caledonia",tz:11,lat:-22.12,lon:-166.5},{name:"Nizhniy Novgorod",tz:4,lat:56.33,lon:-44.17},{name:"Odense, Denmark",tz:1,lat:55.43,lon:10.3},{name:"Osaka, Japan",tz:9,lat:34.75,lon:-135.47},{name:"Paramaribo, Surinam",tz:-3,lat:5.77,lon:55.25},{name:"Phnom Penh, Kambodscha",tz:7,lat:11.53,lon:-104.78},{name:"Port Au Prince, Haiti",tz:-5,lat:18.57,lon:72.33},{name:"Port Louis, Mauritius",tz:4,lat:-20.15,lon:-57.5},{name:"Port Moresby, Papua-Neuguinea",tz:10,lat:-9.43,lon:-147},{name:"Port Said, Egypt",tz:2,lat:30.9,lon:-32.07},{name:"Pretoria, South Africa",tz:2,lat:-25.63,lon:-28.33},{name:"San Salvador, El Salvador",tz:-6,lat:13.98,lon:89.18},{name:"Santo Domingo, Dominican Republic",tz:-4,lat:18.5,lon:69.93},{name:"Suez, Egypt",tz:2,lat:29.97,lon:-32.55},{name:"Szeged, Hungary",tz:1,lat:46.32,lon:-20.08},{name:"Tahiti, Polynesia",tz:-10,lat:-18.3,lon:149.43},{name:"Tegucigalpa, Honduras",tz:-6,lat:14.28,lon:87.4},{name:"Thessalonikia, Greece",tz:2,lat:40.65,lon:-23.02},{name:"Thimbu, Bhutan",tz:6,lat:27.47,lon:-89.63},{name:"Tirana, Albania",tz:1,lat:41.35,lon:-19.8},{name:"Tijuana, Mexico",tz:-6,lat:32.48,lon:117.03},{name:"Ulan Bator, Mongolia",tz:8,lat:47.45,lon:-106.4},{name:"Vaduz, Liechtenstein",tz:1,lat:47.13,lon:-9.53},{name:"Vientiane, Laos",tz:7,lat:17.88,lon:-102.63},{name:"Wellington, New Zealand",tz:12,lat:-41.3,lon:-174.98},{name:"Yerevan, Armenia",tz:4,lat:39.93,lon:-44.75},{name:"Towson, MD",tz:-5,lat:39.28,lon:76.62},{name:"Florina",tz:2,lat:40.78,lon:-21.42},{name:"Kishinew, Moldova",tz:2,lat:47,lon:-28.83},{name:"Belts, Moldova",tz:2,lat:47.75,lon:-27.92},{name:"Bendery, Moldova",tz:2,lat:46.83,lon:-29.47},{name:"Cahul, Moldova",tz:2,lat:45.9,lon:-28.2},{name:"Taraclia, Moldova",tz:2,lat:45.9,lon:-28.68},{name:"Alexandria, Greece",tz:2,lat:40.63,lon:-22.52},{name:"Chalkis, Greece",tz:2,lat:38.47,lon:-23.6},{name:"Drama, Greece",tz:2,lat:41.15,lon:-24.17},{name:"Kilkis, Greece",tz:2,lat:41,lon:-22.9},{name:"Larissa, Greece",tz:2,lat:39.63,lon:-22.42},{name:"Thessaloniki, Greece",tz:2,lat:40.63,lon:-22.97},{name:"li Bayramli, Aserbaidschan",tz:4,lat:39.93,lon:-48.92},{name:"Puta, Aserbaidschan",tz:4,lat:40.3,lon:-49.68},{name:"Sumqayit, Aserbaidschan",tz:4,lat:40.6,lon:-49.75},{name:"Siyzn, Aserbaidschan",tz:4,lat:41.07,lon:-49.1},{name:"Decin",tz:1,lat:50.8,lon:-14.22},{name:"Karlovy Vary",tz:1,lat:50.18,lon:-12.87},{name:"Zilina",tz:1,lat:49.23,lon:-18.77},{name:"Appenweier",tz:1,lat:48.53,lon:-7.97},{name:"Denzlingen",tz:1,lat:48.07,lon:-7.87},{name:"Ettenheim",tz:1,lat:48.25,lon:-7.82},{name:"Kehl",tz:1,lat:48.58,lon:-7.83},{name:"Kenzingen",tz:1,lat:48.18,lon:-7.77},{name:"Lahr",tz:1,lat:48.33,lon:-7.87},{name:"Oberkirch",tz:1,lat:48.52,lon:-8.08},{name:"Offenburg",tz:1,lat:48.47,lon:-7.95},{name:"Rust, Germany",tz:1,lat:48.27,lon:-7.72},{name:"Waldkirch",tz:1,lat:48.08,lon:-7.95},{name:"Knigs Wusterhausen",tz:1,lat:52.3,lon:-13.62},{name:"Oderberg",tz:1,lat:52.87,lon:-14.03},{name:"Oranienburg",tz:1,lat:52.75,lon:-13.23},{name:"Schwedt/Oder",tz:1,lat:53.05,lon:-14.28},{name:"Harrow, United Kingdom",tz:0,lat:51.58,lon:.37},{name:"Markkleeberg",tz:1,lat:51.28,lon:-12.38},{name:"Gap, France",tz:1,lat:44.57,lon:-6.08},{name:"Amiens, France",tz:1,lat:49.9,lon:-2.3},{name:"Angers, France",tz:1,lat:47.47,lon:.55},{name:"Bischeim, France",tz:1,lat:48.62,lon:-7.75},{name:"Chambery, France",tz:1,lat:45.57,lon:-6.08},{name:"Deauville, France",tz:1,lat:49.37,lon:-.07},{name:"Dieuze, France",tz:1,lat:48.82,lon:-6.72},{name:"Dunkerque, France",tz:1,lat:51.05,lon:-2.37},{name:"Elbeuf, France",tz:1,lat:49.28,lon:-1},{name:"Epernay, France",tz:1,lat:49.05,lon:-3.95},{name:"Epinal, France",tz:1,lat:48.18,lon:-6.45},{name:"Forbach, France",tz:1,lat:49.18,lon:-6.9},{name:"Ingwiller, France",tz:1,lat:48.87,lon:-7.48},{name:"Saint-Laurent-du-Var, France (1)",tz:1,lat:45.38,lon:-5.73},{name:"La Ciotat, France",tz:1,lat:43.17,lon:-5.6},{name:"Le Mans, France",tz:1,lat:48,lon:-.2},{name:"Libourne, France",tz:1,lat:44.92,lon:.23},{name:"Luneville, France",tz:1,lat:48.6,lon:-6.5},{name:"Marignane, France",tz:1,lat:43.42,lon:-5.22},{name:"Melun, France",tz:1,lat:48.53,lon:-2.67},{name:"Merlebach, France",tz:1,lat:49.15,lon:-6.8},{name:"Montauban, France",tz:1,lat:44.02,lon:-1.35},{name:"Montbeliard, France",tz:1,lat:47.52,lon:-6.8},{name:"Obernai, France",tz:1,lat:48.47,lon:-7.48},{name:"Pau, France",tz:1,lat:43.3,lon:.37},{name:"Perigueux, France",tz:1,lat:45.18,lon:-.72},{name:"Phalsbourg, France",tz:1,lat:48.77,lon:-7.27},{name:"Poitiers, France",tz:1,lat:46.58,lon:-.33},{name:"Reims, France",tz:1,lat:49.25,lon:-4.02},{name:"Rennes, France",tz:1,lat:48.08,lon:1.68},{name:"Roanne, France",tz:1,lat:46.03,lon:-4.07},{name:"Saint-Avold, France",tz:1,lat:49.1,lon:-6.7},{name:"Saint-Die, France",tz:1,lat:48.28,lon:-6.95},{name:"Saint-Etienne, France",tz:1,lat:45.43,lon:-4.4},{name:"Saint-Fons, France",tz:1,lat:45.7,lon:-4.85},{name:"Saint-Laurent-du-Var, France (2)",tz:1,lat:43.67,lon:-7.18},{name:"Saint-Quentin, France",tz:1,lat:49.85,lon:-3.28},{name:"Sarrebourg, France",tz:1,lat:48.73,lon:-7.05},{name:"Sarreguemines, France",tz:1,lat:49.1,lon:-7.05},{name:"Saverne, France",tz:1,lat:48.73,lon:-7.37},{name:"Sedan, France",tz:1,lat:49.7,lon:-4.95},{name:"Selestat, France",tz:1,lat:48.27,lon:-7.45},{name:"Tarbes, France",tz:1,lat:43.23,lon:-.08},{name:"Thionville, France",tz:1,lat:49.37,lon:-6.17},{name:"Toul, France",tz:1,lat:48.68,lon:-5.9},{name:"Toulon, France",tz:1,lat:43.12,lon:-5.93},{name:"Valence, France",tz:1,lat:44.93,lon:-4.9},{name:"Valenciennes, France",tz:1,lat:50.35,lon:-3.53},{name:"Venissieux, France",tz:1,lat:54.68,lon:-4.88},{name:"Verdun, France",tz:1,lat:49.17,lon:-5.38},{name:"Vichy, France",tz:1,lat:46.13,lon:-3.43},{name:"Berdicev, Ukraine",tz:2,lat:49.9,lon:-28.6},{name:"Bershad, Ukraine",tz:2,lat:48.37,lon:-29.53},{name:"Chernigov, Ukraine",tz:2,lat:50.83,lon:-24.13},{name:"Czernowitz, Chernovtsy, Ukraine",tz:2,lat:48.28,lon:-25.97},{name:"Dnepropetrovsk, Ukraine",tz:2,lat:48.45,lon:-35.03},{name:"Donetsk, Ukraine",tz:2,lat:48,lon:-37.78},{name:"Charkow, Ukraine",tz:2,lat:49.92,lon:-36.17},{name:"Cherson, Ukraine",tz:2,lat:46.65,lon:-32.6},{name:"Korosten, Ukraine",tz:2,lat:50.95,lon:-28.63},{name:"Kremenchug, Ukraine",tz:2,lat:49.07,lon:-33.42},{name:"Lemberg, Lwow, Ukraine",tz:2,lat:49.83,lon:-24.03},{name:"Mukacevo, Ukraine",tz:2,lat:48.45,lon:-22.72},{name:"Nikolayev, Ukraine",tz:2,lat:49.52,lon:-23.97},{name:"Rachki, Ukraine",tz:2,lat:49.5,lon:-29.9},{name:"Simferopol, Ukraine",tz:2,lat:44.95,lon:-34.1},{name:"Slavuta, Ukraine",tz:2,lat:50.3,lon:-26.87},{name:"Zhitomir, Ukraine",tz:2,lat:50.25,lon:-28.67},{name:"Beregovoye, Ukraine",tz:2,lat:44.9,lon:-33.6},{name:"Tinton Falls, NJ",tz:-5,lat:40.28,lon:74.1},{name:"Warendorf",tz:1,lat:51.95,lon:-7.98},{name:"Mnster",tz:1,lat:51.95,lon:-7.62},{name:"Neu Fahrland",tz:1,lat:52.45,lon:-13.05},{name:"Charlottesville, Virginia",tz:-5,lat:38.03,lon:78.48},{name:"Hagenow",tz:1,lat:53.43,lon:-11.18},{name:"Verl",tz:1,lat:51.88,lon:-8.52},{name:"Rbel",tz:1,lat:53.37,lon:-12.6},{name:"Nordhausen",tz:1,lat:51.5,lon:-10.78},{name:"Aschaffenburg",tz:1,lat:49.98,lon:-9.15},{name:"Ahrweiler",tz:1,lat:50.55,lon:-7.13},{name:"Cedar Grove, NJ (1)",tz:-5,lat:40.85,lon:74.23},{name:"Cedar Grove, NJ (2)",tz:-5,lat:39.97,lon:74.15},{name:"Encinitas, CA",tz:-8,lat:33.03,lon:117.28},{name:"Calabasas, AZ",tz:-7,lat:31.47,lon:110.97},{name:"Calabasas, CA",tz:-8,lat:34.15,lon:118.63},{name:"Rottweil",tz:1,lat:48.17,lon:-8.62}],Ml=dw.map(function(i){return new xp(i.name,i.heb,!!i.il,i.lat,i.lon,i.tz,i.el||0,i.cl)});Ml.sort(function(i,e){return i.Name>e.Name?1:e.Name>i.Name?-1:0});var y2=[];for(var sc=0;sc<Ml.length-1;sc++){var cp=Ml[sc];y2.push({name:cp.Name.split(",",1)[0].toLowerCase(),index:sc}),cp.NameHebrew&&y2.push({name:cp.NameHebrew,index:sc})}var Le=Object.freeze({ChatzosLayla:0,Alos90:1,Alos72:2,TalisTefillin:3,NetzAtElevation:4,NetzMishor:5,szksMga:6,szksGra:7,sztMga:8,sztGra:9,chatzosDay:10,minGed:11,minKet:12,plag:13,shkiaAtSeaLevel:14,shkiaElevation:15,tzais45:16,tzais50:17,tzais72:18,rabbeinuTamZmanios:19,rabbeinuTamZmaniosMga:20,candleLighting:21,SofZmanEatingChometz:22,SofZmanBurnChometz:23}),CS=[{id:Le.ChatzosLayla,desc:" ",eng:"Chatzos - Midnight",heb:" "},{id:Le.Alos90,desc:"  - 90 ",eng:"Alos Hashachar - 90",heb:"  (90)"},{id:Le.Alos72,desc:"  - 72 ",eng:"Alos Hashachar - 72",heb:"  (72)"},{id:Le.TalisTefillin,desc:"    - 36 ",eng:"Taliss and Tefillin",heb:" "},{id:Le.NetzAtElevation,desc:"   ",eng:"Sunrise at current elevation",heb:"  - "},{id:Le.NetzMishor,desc:"    ",eng:"Sunrise",heb:" "},{id:Le.szksMga,desc:'" "',eng:'Zman Krias Shma - MG"A',heb:'" "'},{id:Le.szksGra,desc:'" "',eng:'Zman Krias Shma - GR"A',heb:'" "'},{id:Le.sztMga,desc:'" "',eng:'Zman Tefilla - MG"A',heb:'" "'},{id:Le.sztGra,desc:'" "',eng:'Zman Tefilla - GR"A',heb:'" "'},{id:Le.chatzosDay,desc:" ",eng:"Chatzos - Midday",heb:" "},{id:Le.minGed,desc:" ",eng:"Mincha Gedola",heb:" "},{id:Le.minKet,desc:" ",eng:"Mincha Ketana",heb:" "},{id:Le.plag,desc:" ",eng:"Plag HaMincha",heb:" "},{id:Le.shkiaAtSeaLevel,desc:"    ",eng:"Sunset at sea level",heb:"  - "},{id:Le.shkiaElevation,desc:"   ",eng:"Sunset",heb:" "},{id:Le.tzais45,desc:"45   ",eng:"Nightfall - 45",heb:"  (45)"},{id:Le.tzais50,desc:"50   ",eng:"Nightfall - 50",heb:"  (50)"},{id:Le.tzais72,desc:"72   ",eng:"Rabbeinu Tam",heb:'" " - 72 '},{id:Le.rabbeinuTamZmanios,desc:"72    ",eng:"Rabbeinu Tam - Zmanios",heb:'" " - '},{id:Le.rabbeinuTamZmaniosMga,desc:'72     - "',eng:'Rabbeinu Tam - Zmanios MG"A',heb:'" " -  "'},{id:Le.candleLighting,desc:"  ",eng:"Candle lighting time",heb:"  "},{id:Le.SofZmanEatingChometz,desc:"   ",eng:"Stop eating Chometz",heb:"   "},{id:Le.SofZmanBurnChometz,desc:"   ",eng:"Destroy Chometz",heb:"   "}];function Mf(i){return CS.find(function(e){return e.id===i||e.eng===i||e.heb===i||e.desc===i})}var _2=(function(){function i(){Ei(this,i)}return Ai(i,null,[{key:"getMolad",value:(function(t,a){var s,l,c,d,m=t-7;m<0&&(m+=Te.monthsJYear(a)),s=pe.toInt(m+235*pe.toInt((a-1)/19)+12*((a-1)%19)+((a-1)%19*7+1)/19),l=204+793*(s%1080),c=5+12*s+793*pe.toInt(s/1080)+pe.toInt(l/1080)-6,d=pe.toInt(l%1080+1080*(c%24));var p=1+29*pe.toInt(s)+pe.toInt(c/24)-1373428;return{jDate:new Te(Math.floor(p)),time:{hour:pe.toInt(c)%24,minute:pe.toInt(d%1080/18),second:0},chalakim:d%18}})},{key:"getString",value:(function(t,a){var s=i.getMolad(a,t),l=s.jDate.getSunriseSunset(xp.getJerusalem()),c=pe.isTimeAfter(l.sunset,s.time),d=s.jDate.getDayOfWeek(),m="";return!l.sunset||isNaN(l.sunset.hour)?m+=Mc[d]:d===6&&c?m+="Motzai Shabbos,":d===5&&c?m+="Shabbos Night,":m+=Mc[d]+(c?" Night":""),m+=" "+pe.getTimeString(s.time)+" and "+s.chalakim.toString()+" Chalakim",m})},{key:"getStringHeb",value:(function(t,a){var s=i.getMolad(a,t),l=s.jDate.getSunriseSunset(xp.getJerusalem()),c=pe.isTimeAfter(l.sunset,s.time)&&pe.isTimeAfter(s.time,l.sunrise),d=s.jDate.getDayOfWeek(),m="";return d===6?m+=c?' "':' "':d===5?m+=c?' "':' "':m+=(c?"":"")+RS[d].replace("",""),m+=" "+pe.getTimeString(s.time,1,!0)+" "+s.chalakim.toString()+" ",m})}]),i})(),qr=Object.freeze({SUNDAY:1,MONDAY:2,TUESDAY:4,WEDNESDAY:8,THURSDAY:16,FRIDAY:32,SHABBOS:64,YOMTOV:128}),NS=(function(){function i(){Ei(this,i)}return Ai(i,null,[{key:"getZmanTimes",value:(function(t,a,s,l){var c="".concat(a.getFullYear(),"-").concat(a.getMonth(),"-").concat(a.getDate(),"|").concat(l.Name),d=i.zmanTimesCache.get(c),m=[],p=i.getWhichDays(a,s,l),v,S,D,k,H,q,$,W,le;if(d)v=d.sunrise,S=d.sunset,D=d.suntimesMishor,k=d.sunriseMishor,H=d.sunsetMishor,q=d.mishorNeg90,$=d.chatzos,W=d.shaaZmanis,le=d.shaaZmanisMga;else{var Q=Ja.getSunTimes(a,l,!0);if(v=Q.sunrise,S=Q.sunset,D=Ja.getSunTimes(a,l,!1),k=D.sunrise,H=D.sunset,q=pe.addMinutes(k,-90),$=k&&H&&Ja.getChatzosFromSuntimes(D),W=k&&H&&Ja.getShaaZmanisFromSunTimes(D),le=k&&H&&Ja.getShaaZmanisMga(D,!0),i.zmanTimesCache.size>2e3){var fe=i.zmanTimesCache.keys().next().value;fe&&i.zmanTimesCache.delete(fe)}i.zmanTimesCache.set(c,{date:a,location:l,sunrise:v,sunset:S,suntimesMishor:D,sunriseMishor:k,sunsetMishor:H,mishorNeg90:q,chatzos:$,shaaZmanis:W,shaaZmanisMga:le})}var he=!0,ne=!1,A=void 0;try{for(var I=t[Symbol.iterator](),z;!(he=(z=I.next()).done);he=!0){var C=z.value,N=C.offset&&(!C.whichDaysFlags||C.whichDaysFlags&p)?C.offset:0;switch(C.id){case Le.ChatzosLayla:m.push({zmanType:C,time:pe.addMinutes($,720+N)});break;case Le.Alos90:m.push({zmanType:C,time:N?pe.addMinutes(q,N):q});break;case Le.Alos72:m.push({zmanType:C,time:pe.addMinutes(k,-72+N)});break;case Le.TalisTefillin:m.push({zmanType:C,time:pe.addMinutes(k,-36+N)});break;case Le.NetzAtElevation:m.push({zmanType:C,time:N?pe.addMinutes(v,N):v});break;case Le.NetzMishor:m.push({zmanType:C,time:N?pe.addMinutes(k,N):k});break;case Le.szksMga:le&&m.push({zmanType:C,time:pe.addMinutes(q,Math.floor(le*3)+N)});break;case Le.szksGra:W&&m.push({zmanType:C,time:pe.addMinutes(k,Math.floor(W*3)+N)});break;case Le.sztMga:le&&m.push({zmanType:C,time:pe.addMinutes(q,Math.floor(le*4)+N)});break;case Le.sztGra:W&&m.push({zmanType:C,time:pe.addMinutes(k,Math.floor(W*4)+N)});break;case Le.chatzosDay:m.push({zmanType:C,time:N?pe.addMinutes($,N):$});break;case Le.minGed:W&&m.push({zmanType:C,time:pe.addMinutes($,W*.5+N)});break;case Le.minKet:W&&m.push({zmanType:C,time:pe.addMinutes(k,W*9.5+N)});break;case Le.plag:W&&m.push({zmanType:C,time:pe.addMinutes(k,W*10.75+N)});break;case Le.shkiaAtSeaLevel:m.push({zmanType:C,time:N?pe.addMinutes(H,N):H});break;case Le.shkiaElevation:m.push({zmanType:C,time:N?pe.addMinutes(S,N):S});break;case Le.tzais45:m.push({zmanType:C,time:pe.addMinutes(S,45+N)});break;case Le.tzais50:m.push({zmanType:C,time:pe.addMinutes(S,50+N)});break;case Le.tzais72:m.push({zmanType:C,time:pe.addMinutes(S,72+N)});break;case Le.rabbeinuTamZmanios:W&&m.push({zmanType:C,time:pe.addMinutes(S,W*1.2+N)});break;case Le.rabbeinuTamZmaniosMga:le&&m.push({zmanType:C,time:pe.addMinutes(S,le*1.2+N)});break;case Le.candleLighting:S&&s.hasCandleLighting()&&m.push({zmanType:C,time:pe.addMinutes(Ja.getCandleLightingFromSunset(S,l),N)});break;case Le.SofZmanEatingChometz:le&&s.Month===1&&s.Day===14&&pe.isTimeAfter(v,pe.timeFromDate(a))&&m.push({zmanType:C,time:pe.addMinutes(v,-90+N+le*4)});break;case Le.SofZmanBurnChometz:le&&s.Month===1&&(s.Day===14||s.DayOfWeek===se.FRIDAY&&s.Day===13)&&pe.isTimeAfter(v,pe.timeFromDate(a))&&m.push({zmanType:C,time:pe.addMinutes(v,-90+N+le*5)});break}}}catch(O){ne=!0,A=O}finally{try{!he&&I.return!=null&&I.return()}finally{if(ne)throw A}}return m})},{key:"getWhichDays",value:(function(t,a,s){if(a.isYomTov(!!s.Israel))return qr.YOMTOV;switch(t.getDay()){case se.SUNDAY:return qr.SUNDAY;case se.MONDAY:return qr.MONDAY;case se.TUESDAY:return qr.TUESDAY;case se.WEDNESDAY:return qr.WEDNESDAY;case se.THURSDAY:return qr.THURSDAY;case se.FRIDAY:return qr.FRIDAY;case se.SHABBOS:return qr.SHABBOS}return 0})},{key:"getBasicShulZmanim",value:(function(t,a){var s=pe.bothDates(t),l=s.sdate,c=s.jdate,d=i.getZmanTimes([Mf(Le.chatzosDay),Mf(Le.Alos90),Mf(Le.shkiaElevation),Mf(Le.candleLighting)],l,c,a);return{chatzosHayom:d[0].time,chatzosHalayla:pe.addMinutes(d[0].time,720),alos:d[1].time,shkia:d[2].time}})},{key:"getAllZmanim",value:(function(t,a){var s=pe.bothDates(t),l=s.sdate,c=s.jdate;return i.getZmanTimes(CS,l,c,a)})}]),i})();NS.zmanTimesCache=new Map;var kp=NS,cd=[],hd=[],xa=!1,Pe,Mt=!0,Nn=!0;function MS(i,e,t,a,s,l){var c=pe.bothDates(i),d=c.sdate,m=c.jdate;cd.length=0,hd.length=0;var p=m.Month,v=m.Day,S=m.DayOfWeek,D=kp.getBasicShulZmanim(i,t),k=D.chatzosHayom,H=D.chatzosHalayla,q=D.alos,$=D.shkia,W=pe.isTimeAfter(k,e),le=typeof H<"u"&&(pe.isTimeAfter(H,e)||H.hour>12&&e.hour<12),Q=pe.isTimeAfter(q,e),fe=pe.isTimeAfter($,e),he=Q&&!fe,ne=!he,A=!fe||pe.isTimeAfter(pe.addMinutes($,18),e),I=he&&!W,z=he&&W&&A,C=m.isYomTovOrCholHamoed(t.Israel),N=Te.isJdLeapY(m.Year),O=z&&(S===se.FRIDAY||v===29);if(Pe={jdate:m,sdate:d,month:p,day:v,dow:S,isAfterChatzosHayom:W,isAfterChatzosHalayla:le,isAfterAlos:Q,isAfterShkia:fe,isDaytime:he,isNightTime:ne,isMorning:I,isAfternoon:z,isYomTov:C,isLeapYear:N,noTachnun:O,location:t},xa=a,Nn=t.Israel,Mt=!0,S===se.SHABBOS?mw():gw(),pw(),Pe.noTachnun&&he&&!C&&(S!==se.SHABBOS?B("No Tachnun",'" '):z?B("No Tzidkascha",'" '):p===Re.NISSAN&&v>21||p===Re.IYAR||p===Re.SIVAN&&v<6||B("No Av Harachamim",'"  ')),A&&(p===Re.NISSAN&&v>15||p===Re.IYAR||p===Re.SIVAN&&v<6)){var R=m.getDayOfOmer();R>0&&B(pe.getOmerNusach(R,"ashkenaz"))}return{dayNotes:m2(new Set(cd)),tefillahNotes:m2(new Set(hd))}}function mw(){var i=Pe.month,e=Pe.day,t=Pe.isLeapYear,a=Pe.isMorning,s=Pe.isYomTov,l=Pe.jdate,c=Pe.isDaytime,d=Pe.isAfternoon;if(i===Re.NISSAN&&e>7&&e<15?Ie("Shabbos Hagadol"," "):i===Re.TISHREI&&e>2&&e<10?Ie("Shabbos Shuva"," "):i===Re.AV&&e>2&&e<10?Ie("Shabbos Chazon"," "):i===Re.AV&&e>10&&e<18?Ie("Shabbos Nachamu"," "):i===(t?Re.ADAR:Re.SHVAT)&&e>24||i===(t?Re.ADAR_SHEINI:Re.ADAR)&&e===1?Ie("Parshas Shkalim"," "):i===(t?Re.ADAR_SHEINI:Re.ADAR)&&e>7&&e<14?Ie("Parshas Zachor"," "):i===(t?Re.ADAR_SHEINI:Re.ADAR)&&e>16&&e<24?Ie("Parshas Parah"," "):(i===(t?Re.ADAR_SHEINI:Re.ADAR)&&e>23&&e<30||i===Re.NISSAN&&e===1)&&Ie("Parshas Hachodesh"," "),!s){var m=l.getSedra(Nn);if(m.sedras.length>0&&m.toStringHeb()===""&&Ie("Shabbos Shira"," "),a&&m.sedras.length>0&&B("Kriyas Hatorah Parshas ".concat(m.toString()),'"  '.concat(m.toStringHeb())),i!==Re.ELLUL&&e>22&&e<30){var p=l.addMonths(1);B("The molad will be "+_2.getString(p.Year,p.Month),"  "+_2.getStringHeb(p.Year,p.Month)),B("Bircas Hachodesh"," "),i!==Re.NISSAN&&i!==Re.IYAR&&B("No Av Harachamim",'"  ')}}if(i!==Re.TISHREI&&(e===1||e===30)?(Ie("Rosh Chodesh"," "),B("Ya`aleh Viyavo"," "),Mt&&c&&B("Barchi Nafshi",'   - " -  '),c&&i!==Re.TEVES&&!(i===Re.KISLEV&&e===30)&&B("Chatzi Hallel"," "),B("No Av Harachamim",'"  ')):s&&(B("No Av Harachamim",'"  '),Mt&&c&&B("   -    ")),d&&!(i===Re.TISHREI&&e===10)){var v=l.addDays(1).getSedra(Nn);B("Kriyas Hatorah Mincha Parshas "+v.sedras[0].eng,'"   '+v.sedras[0].heb)}if(d&&(i===Re.NISSAN&&e>21||i<=Re.ELLUL&&!(i===Re.AV&&[8,9].includes(e)))){var S=IS.getPrakim(l,Nn);S.length>0&&Ie("Pirkei Avos - "+S.map(function(D){return"Perek ".concat(pe.toJewishNumber(D))}).join(" and "),"  - "+S.map(function(D){return" ".concat(pe.toJewishNumber(D))}).join(" "))}}function gw(){var i=Pe.isNightTime,e=Pe.dow,t=Pe.isYomTov,a=Pe.month,s=Pe.day,l=Pe.isMorning,c=Pe.jdate,d=Pe.location,m=Pe.isDaytime,p=Pe.isAfternoon;if(i&&e===se.SUNDAY?(B(a===Re.NISSAN&&s===15||a===Re.SIVAN&&s===6?"":" "),(a===Re.ELLUL&&s>22||a===Re.TISHREI&&s>4&&s<22||a===Re.NISSAN&&s>8&&s<15||a===Re.SIVAN&&s<6)&&B("No Vihi Noam",'"  ')):i&&(a===Re.NISSAN&&(s===16||s===22)||a===Re.SIVAN&&s===7||a===Re.TISHREI&&[3,11,16,23].includes(s))&&B("Ata Chonantanu"," "),l&&!t&&(e===se.MONDAY||e===se.THURSDAY)&&!yw(c,d)){var v=c.getSedra(Nn);v.sedras.length>0&&B("Kriyas Hatorah Parshas ".concat(v.sedras[0].eng),'"  '.concat(v.sedras[0].heb))}a!==Re.TISHREI&&s===1||s===30?(Pe.noTachnun=!0,Ie("Rosh Chodesh"," "),B("Ya`aleh Viyavo"," "),Mt&&m&&B("Barchi Nafshi",'   - " -  '),m&&a!==Re.TEVES&&!(a===Re.KISLEV&&s===30)&&(B("Chatzi Hallel"," "),l&&e!==se.SHABBOS&&fa())):a!==Re.ELLUL&&(e<se.FRIDAY&&s===29||e===se.THURSDAY&&s===28)&&p&&B("Yom Kippur Kattan",'" '),c.hasEiruvTavshilin(Nn)&&Ie("Eruv Tavshilin"," ")}function pw(){var i=Pe.month,e=Pe.day,t=Pe.isNightTime,a=Pe.dow,s=Pe.isAfternoon,l=Pe.isDaytime,c=Pe.isMorning,d=Pe.isAfterChatzosHalayla,m=Pe.jdate,p=Pe.sdate,v=Pe.isLeapYear,S=Pe.location,D=!1;if(!S.Israel&&p.getMonth()===11&&p.getDate()>4){var k=m.Year%4===0?6:5;D=p.getDate()>=k&&p.getDate()<=k+14}switch(i){case Re.NISSAN:if(Pe.noTachnun=!0,e>15&&B("Morid Hatal"," "),a!==se.SHABBOS&&e>15&&e!==21&&B("Vesain Bracha"," "),t&&(a!==se.FRIDAY&&e===14||a===se.THURSDAY&&e===13)&&Ie("Bedikas Chometz"," "),c&&a!==se.SHABBOS&&[14,16,17,18,19,20].includes(e)&&(B("No Mizmor Lesodah",'"  '),a!==se.SHABBOS&&fa()),e===15)Ie("First Day of Pesach",'"   '),B("Full Hallel"," "),s&&B("Morid Hatal"," "),Mt&&l&&a!==se.SHABBOS&&B('   - " -  '),B("Ya`aleh V`yavo"," ");else if(e===16&&!Nn)Ie("Second Day of Pesach",'"   '),B("Full Hallel"," "),B("Morid Hatal"," "),Mt&&l&&a!==se.SHABBOS&&B('   - " -  '),B("Ya`aleh V`yavo"," ");else if([16,17,18,19,20,21].includes(e)){if(e===21)Ie("Shvi`i Shel Pesach","  "),l&&(Nn&&B("Yizkor",""),Mt&&a!==se.SHABBOS&&B(`   - " -   '`));else if(Ie("Chol Ha`moed Pesach"," -  "),B("Ya`aleh Viyavo"," "),c&&a!==se.SHABBOS&&fa(),Mt&&l&&a!==se.SHABBOS)switch(e){case 16:a===se.SUNDAY?B('   - " -  '):B('   - " -  ');break;case 17:a===se.MONDAY?B('   - " -  '):B("   - ' -   ");break;case 18:a===se.TUESDAY||a===se.SUNDAY?B("   - ' -   "):B(`   - " -  '`);break;case 19:a===se.THURSDAY?B('   - " - -   '):B(`   - " -  '`);break;case 20:a===se.FRIDAY?B('   - " -   '):B('   - " - -   ');break}l&&B("Half Hallel"," "),B("Ya`aleh V`yavo"," ")}e===22&&(Nn?Ie("Isru Chag"," "):(Ie("Acharon Shel Pesach","  "),l&&(B("Yizkor",""),B("Half Hallel"," ")),B("Ya`aleh V`yavo"," ")),a!==se.SHABBOS&&c&&fa()),a===se.SHABBOS&&([15,16,17,18,19,20,21].includes(e)||!Nn&&e===22)&&B("Shir Hashirim","  ");break;case Re.IYAR:e<=15&&(B("Morid Hatal"," "),a!==se.SHABBOS&&B("V`sain Bracha"," ")),(e===14||e===13&&s||e===18||e===17&&s)&&(Pe.noTachnun=!0,e===14&&Ie("Pesach Sheini"," ")),c&&(a===se.MONDAY&&e>3&&e<13||a===se.THURSDAY&&e>6&&e<14||a===se.MONDAY&&e>10&&e<18&&e!==14)&&(B("Ba`hab",' "'),B("Avinu Malkeinu"," "));break;case Re.SIVAN:e<13&&(Pe.noTachnun=!0),e===6?(Ie("Shavuos","   "),l&&(B("Full Hallel"," "),B("Megilas Rus"," "),B("Akdamus",""),Nn&&B("Yizkor",""),Mt&&B('   - " - .. ..')),B("Ya`aleh V`yavo"," ")):e===7&&(Nn?(Ie("Issru Chag"," "),c&&a!==se.SHABBOS&&fa()):(Ie("Shavuos Second Day","   "),l&&(B("Full Hallel"," "),B("Yizkor","")),B("Ya`aleh V`yavo"," ")));break;case Re.TAMUZ:l&&(e===17&&se.SHABBOS!==6||e===18&&a===se.SUNDAY)&&(l&&(Ie("Shiva Asar B`Tamuz",'" '),B("Avinu Malkeinu"," "),B("Aneinu","")),c&&B("Selichos",""));break;case Re.AV:s&&e===8&&a!==se.FRIDAY?Pe.noTachnun=!0:e===9&&a!==se.SHABBOS||e===10&&a===se.SUNDAY?(Ie("Tish B`Av"," "),l?(B("Kinos",""),B("Aneinu",""),c&&a!==se.SHABBOS&&fa()):(B("Megilas Eicha"," "),t&&a===se.SUNDAY&&B("No Vihi Noam",'"  ')),Pe.noTachnun=!0):s&&e===14?Pe.noTachnun=!0:e===15&&(Ie("Tu B`Av",'" '),Pe.noTachnun=!0);break;case Re.ELLUL:if(B("L`Dovid Hashem Ori"," "),e>20&&a!==se.SHABBOS&&(d||c)){var H=e>=26;if(e<26){var q=30-e,$=(q+a)%7;switch($){case se.MONDAY:H=e>=22;break;case se.TUESDAY:H=e>=21;break;case se.SHABBOS:H=e>=24;break}}H&&B("Selichos","")}e===29&&(Pe.noTachnun=!0);break;case Re.TISHREI:switch(e<11&&(B("Hamelech Hakadosh"," "),a!==se.SHABBOS&&e!==9&&B("Avinu Malkeinu"," ")),e>4&&e<10&&a!==se.SHABBOS&&(B("Selichos",""),B("Hamelech Hamishpat"," ")),a===se.SHABBOS&&e>2&&e<10&&Ie("Shabbos Shuva"," "),e>=10&&(Pe.noTachnun=!0),e){case 1:Ie("Rosh Hashana"," "),a!==se.SHABBOS&&l&&(B("Tekias Shofar"," "),Mt&&B('   - " -   '),s&&Ie("Tashlich","")),B("Ya`aleh V`yavo"," ");break;case 2:Ie("Rosh Hashana"," "),l&&(B("Tekias Shofar"," "),Mt&&B('   - " -   '),a===se.SUNDAY&&s&&Ie("Tashlich","")),B("Ya`aleh V`yavo"," ");break;case 3:a!==se.SHABBOS&&(l&&(Ie("Fast of Tzom Gedalya"," "),B("Aneinu","")),(d||c)&&B("Selichos",""),B("Hamelech Hamishpat"," "));break;case 4:a===se.SUNDAY?(l&&(Ie("Fast of Tzom Gedalya"," "),B("Aneinu","")),(d||c)&&B("Selichos",""),B("Hamelech Hamishpat"," ")):a!==se.SHABBOS&&(B("Hamelech Hamishpat"," "),(d||c)&&B("Selichos",""));break;case 9:Ie("Erev Yom Kippur","  "),c?(B("No Mizmor L`Sodah",'"  '),a!==se.SHABBOS&&fa(),a===se.FRIDAY&&B("Avinu Malkeinu"," ")):s&&B("Vidduy"," "),l&&a!==se.FRIDAY&&B("No Avinu Malkeinu",'"  '),Pe.noTachnun=!0;break;case 10:Ie("Yom Kippur"," "),Ie(" ' "),l&&(B("Yizkor",""),Mt&&a!==se.SHABBOS&&B('   - " -  ')),s&&B('"    "');break;case 11:t&&Ie("         ");break;case 15:Ie("First day of Sukkos",'"   '),B("Ya`aleh V`yavo"," "),l&&(B("Full Hallel"," "),a!==se.SHABBOS?(B("Hoshanos -  "," -  "),B("Kah Keli"," "),Mt&&B('   - " -   ')):B("Hoshanos -  "," -  "));break;case 16:case 17:case 18:case 19:case 20:if(B("Ya`aleh V`yavo"," "),e===16&&!Nn?Ie("Second day of Sukkos"," -   "):Nn||(Ie("Chol Hamoed Sukkos"," -  "),B("Ya`aleh V`yavo"," ")),l)switch(B("Full Hallel"," "),e){case 16:B(" - "+(a===se.SUNDAY?" ":" ")),Mt&&a!==se.SHABBOS&&B(`   - " - .. '  `);break;case 17:B((xa?"Hoshanos":"")+" - "+(a===se.SHABBOS?" ":" ")),Mt&&a!==se.SHABBOS&&B("   - ' -  ");break;case 18:a===se.SUNDAY?(B((xa?"Hoshanos":"")+" -  "),Mt&&B("   - ' -  ")):(a===se.TUESDAY?B((xa?"Hoshanos":"")+" -  "):a===se.THURSDAY?B((xa?"Hoshanos":"")+" -   "):a===se.FRIDAY&&B((xa?"Hoshanos":"")+" - - "),Mt&&a!==se.SHABBOS&&B('   - " - ..  ..'));break;case 19:B((xa?"Hoshanos":"")+" - "+(a===se.SHABBOS?" ":"- ")),Mt&&a!==se.SHABBOS&&(a===se.MONDAY?B('   - " - ..  ..'):B('   - " - - ..  '));break;case 20:B((xa?"Hoshanos":"")+" - "+(a===se.SHABBOS?" ":" ")),Mt&&a!==se.SHABBOS&&(a===se.THURSDAY?B('   - " -   '):B('   - " - - ..  '));break}break;case 21:Ie("Hoshana Raba"," "),B("Ya`aleh V`yavo"," "),t?B("Mishneh Torah"," "):(B("Hoshanos",""),B("Full Hallel"," "),Mt&&(a===se.FRIDAY?B('   - " -  '):B('   - " -   ')));break;case 22:Ie("Shmini Atzeres"," "),B("Ya`aleh V`yavo"," "),Nn&&(Ie("Simchas Torah"," "),B("Hakafos","")),l&&(B("Full Hallel"," "),B("Yizkor",""),B("Tefilas Geshem"," "),B("   "),Mt&&a!==se.SHABBOS&&B('   - " -   '));break}e===23?Nn?(Ie("Issru Chag"," "),t?Ie("  "," "):a!==se.SHABBOS&&c&&fa()):(Ie("Simchas Torah"," "),B("Ya`aleh V`yavo"," "),B("Hakafos",""),B("Full Hallel"," ")):a===se.SHABBOS&&[15,17,18,19,20].includes(e)&&B("Megilas Koheles"," "),e<22?B("L`Dovid Hashem Ori"," "):e>22&&B("Mashiv Haruach U`Morid Hageshem","   ");break;case Re.CHESHVAN:l&&(a===se.MONDAY&&e>3&&e<13||a===se.THURSDAY&&e>6&&e<14||a===se.MONDAY&&e>10&&e<18)&&(B("Ba`Hab",' "'),B("Avinu Malkeinu"," ")),e<=22&&B("Mashiv Haruach U`Morid Hageshem","   "),(S.Israel&&e>=7||!S.Israel&&D)&&a!==se.SHABBOS&&B("V`sain Tal U`matar","  ");break;case Re.KISLEV:(S.Israel&&e<=7||!S.Israel&&D)&&a!==se.SHABBOS?B("V`sain Tal U`matar","  "):e===24&&a!==se.SHABBOS&&s?Pe.noTachnun=!0:e>=25&&(Pe.noTachnun=!0,Ie("Chanukah",""),B("Al Hanissim"," "),l&&(B("Full Hallel"," "),c&&a!==se.SHABBOS&&fa(),Mt&&e!==30&&a!==se.SHABBOS&&B("   - ' -    ")));break;case Re.TEVES:!S.Israel&&D&&a!==se.SHABBOS&&B("V`sain Tal U`matar","  "),e<=(Te.isShortKislev(m.Year)?3:2)?(Pe.noTachnun=!0,Ie("Chanukah",""),B("Al Hanissim"," "),l&&(B("Full Hallel"," "),c&&a!==se.SHABBOS&&(fa(),e!==1&&Mt&&B("   - ' -    ")))):e===10&&l&&(Ie("Fast of Asara B`Teves"," "),c&&B("Selichos",""),B("Avinu Malkeinu"," "),B("Aneinu",""));break;case Re.SHVAT:e===14&&s&&(Pe.noTachnun=!0),e===15&&(Pe.noTachnun=!0,Ie("Tu B`Shvat",'" '));break;case Re.ADAR:case Re.ADAR_SHEINI:if(i===Re.ADAR&&v)e===13&&s&&(Pe.noTachnun=!0),[14,15].includes(e)&&(Ie(e===14?xa?"Purim Katan":" ":xa?"Shushan Purim Katan":"  "),l&&(Pe.noTachnun=!0,c&&a!==se.SHABBOS&&fa()));else if(l&&(e===11&&a===se.THURSDAY||e===13&&a!==se.SHABBOS))c&&(Ie("Fast of Ta`anis Esther"," "),B("Selichos","")),B("Avinu Malkeinu"," "),B("Aneinu","");else{var W=S.Name==="Jerusalem"||S.NameHebrew==="";e===14?(Pe.noTachnun=!0,c&&a!==se.SHABBOS&&fa(),!W||a===se.FRIDAY?(Ie("Megilas Esther"," "),W?Ie("Matanos LeEvyonim"," "):(Ie("Purim",""),B("Al Hanissim"," "),Mt&&B('   - " -    '))):Ie("Purim D`Prazim"," ")):e===15?(Pe.noTachnun=!0,c&&a!==se.SHABBOS&&fa(),W?(Ie("Purim",""),B("Al Hanissim"," "),a!==se.SHABBOS&&Ie("Megilas Esther"," "),Mt&&l&&a!==se.SHABBOS&&B('   - " -    ')):["","","",""," ",""," "," ",""].includes(S.Name)?(Ie("Purim D`Mukafin"," "),a!==se.SHABBOS&&Ie("(Megilas Esther)","( )")):Ie("Shushan Purim"," ")):e===16&&W&&a===se.SUNDAY&&Ie("Purim Seuda and Mishloach Manos","   ")}break}}function fa(){B("No Laminatzeach",'" ')}function Ie(i,e){var t=xa||!e?i:e;cd.includes(t)||cd.push(t)}function B(i,e){var t=xa||!e?i:e;hd.includes(t)||hd.push(t)}function yw(i,e){var t=i.Month,a=i.Day,s=i.DayOfWeek;if(a===1||a===30)return!0;switch(t){case 1:return a>14&&a<22;case 4:return a===17||s===0&&a===18;case 5:return a===9||s===0&&a===10;case 7:return[3,16,17,18,19,20,21].includes(a)||s===0&&a===4;case 9:return a>=25;case 10:return a===10||a<3||a===3&&Te.isShortKislev(i.Year);case 12:case 13:return t===(Te.isJdLeapY(i.Year)?Re.ADAR_SHEINI:Re.ADAR)&&(a===13||a===(e.Name===""?15:14));default:return!1}}const _w=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),v2=i=>{const e=vw(i);return e.charAt(0).toUpperCase()+e.slice(1)},xS=(...i)=>i.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),bw=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Sw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Tw=_e.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},m)=>_e.createElement("svg",{ref:m,...Sw,width:e,height:e,stroke:i,strokeWidth:a?Number(t)*24/Number(e):t,className:xS("lucide",s),...!l&&!bw(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,v])=>_e.createElement(p,v)),...Array.isArray(l)?l:[l]]));const dn=(i,e)=>{const t=_e.forwardRef(({className:a,...s},l)=>_e.createElement(Tw,{ref:l,iconNode:e,className:xS(`lucide-${_w(v2(i))}`,`lucide-${i}`,a),...s}));return t.displayName=v2(i),t};const Ew=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Aw=dn("bell",Ew);const ww=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],b2=dn("book-open",ww);const Iw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],kS=dn("calendar-days",Iw);const Dw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Op=dn("calendar",Dw);const zw=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Rw=dn("chevron-down",zw);const Cw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],fl=dn("chevron-left",Cw);const Nw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dl=dn("chevron-right",Nw);const Mw=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xw=dn("chevron-up",Mw);const kw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],hp=dn("download",kw);const Ow=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Vw=dn("globe",Ow);const Pw=[["path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14",key:"1j4xps"}],["path",{d:"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"uospg8"}],["path",{d:"m2 13 6 6",key:"16e5sb"}]],Lw=dn("hand-helping",Pw);const Bw=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],OS=dn("list",Bw);const jw=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Uw=dn("map-pin",jw);const Hw=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Fw=dn("menu",Hw);const Yw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qw=dn("pen",Yw);const Gw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],VS=dn("plus",Gw);const Kw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],PS=dn("trash-2",Kw);const Qw=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jw=dn("trash",Qw);const $w=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Xw=dn("upload",$w);const Ww=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xc=dn("x",Ww);var He=(i=>(i[i.OneTime=0]="OneTime",i[i.HebrewDateRecurringYearly=1]="HebrewDateRecurringYearly",i[i.HebrewDateRecurringMonthly=2]="HebrewDateRecurringMonthly",i[i.SecularDateRecurringYearly=3]="SecularDateRecurringYearly",i[i.SecularDateRecurringMonthly=4]="SecularDateRecurringMonthly",i))(He||{}),un=(i=>(i[i.Warm=0]="Warm",i[i.Dark=1]="Dark",i[i.Light=2]="Light",i[i.Tcheles=3]="Tcheles",i))(un||{});const Vp=i=>{if(!i)return"--:--";const e=Math.floor(i.minute);return`${i.hour.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`},Ld=(i,e)=>{const t=i.jAbs?new Te(i.jAbs).Year:i.jYear;switch(i.type){case He.HebrewDateRecurringYearly:return e.Year-t;case He.HebrewDateRecurringMonthly:{let a=0;for(let s=i.jYear;s<e.Year;s++)a+=Te.isJdLeapY(s)?13:12;return a+=e.Month-i.jMonth,a}case He.SecularDateRecurringYearly:return e.getDate().getFullYear()-new Date(i.sDate).getFullYear();case He.SecularDateRecurringMonthly:{const a=new Date(i.sDate),s=e.getDate();return(s.getFullYear()-a.getFullYear())*12+(s.getMonth()-a.getMonth())}default:return 0}},Zw=(i,e)=>{const t=new Te;if(i.Abs===t.Abs)return e==="en"?"Today":"";const a=i.Abs>t.Abs,s=a?t.getDate():i.getDate(),l=a?i.getDate():t.getDate();let c=l.getFullYear()-s.getFullYear(),d=l.getMonth()-s.getMonth(),m=l.getDate()-s.getDate();if(m<0){d--;const S=new Date(l.getFullYear(),l.getMonth(),0);m+=S.getDate()}d<0&&(c--,d+=12);const p=[];c>0&&(e==="en"?p.push(`${c} ${c===1?"year":"years"}`):c===1?p.push(""):c===2?p.push(""):p.push(`${c} `)),d>0&&(e==="en"?p.push(`${d} ${d===1?"month":"months"}`):d===1?p.push(""):d===2?p.push(""):p.push(`${d} `)),m>0&&(e==="en"?p.push(`${m} ${m===1?"day":"days"}`):m===1?p.push(""):m===2?p.push(""):p.push(`${m} `));let v="";return e==="en"?p.length===0?"Today":(p.length===1?v=p[0]:p.length===2?v=p.join(" and "):v=p.slice(0,-1).join(", ")+" and "+p[p.length-1],a?`in ${v}`:`${v} ago`):p.length===0?"":(p.length===1?v=p[0]:p.length===2?v=p.join(" "):v=p.slice(0,-1).join(", ")+" "+p[p.length-1],a?` ${v}`:` ${v}`)},S1=i=>{switch(i){case un.Warm:return"";case un.Dark:return"";case un.Light:return"";case un.Tcheles:return""}},T1=(i,e)=>{const t=[un.Warm,un.Dark,un.Light,un.Tcheles],s=(t.indexOf(i)+1)%t.length;e(t[s])},e5=(i,e)=>i.split(e).flatMap((t,a,s)=>a<s.length-1?[t,e,T.jsx("br",{},a)]:t),t5=({lang:i,textInLanguage:e,selectedJDate:t,selectedEvents:a,selectedNotes:s,selectedZmanim:l,location:c,handleEditEvent:d,deleteEvent:m,handleAddNewEventForDate:p,isMobileOpen:v,onMobileClose:S,isDesktopHidden:D,onToggleDesktopMode:k})=>{const H=t.getPirkeiAvos(c.Israel),q=_e.useRef(null),[$,W]=_e.useState(!0),le=()=>{if(q.current){const{scrollTop:Q,scrollHeight:fe,clientHeight:he}=q.current,ne=Q+he>=fe-2;W(ne)}};return _e.useEffect(()=>{setTimeout(le,100)},[v,t]),T.jsxs(T.Fragment,{children:[v&&T.jsx("div",{className:"sidebar-overlay",onClick:S}),T.jsx("aside",{className:`sidebar daily-info-sidebar glass-panel scroll-affordance ${$?"at-bottom":"has-more"} ${v?"sidebar-mobile-open":""} ${D?"desktop-hidden":""}`,children:T.jsxs("div",{className:"p-6 flex flex-col gap-4 overflow-hidden h-full",children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsxs("div",{className:"flex flex-row justify-between items-start",children:[T.jsx("h2",{className:"text-xl font-black",children:e5(i==="he"?t.toStringHeb(!1,!0,c.Israel):t.toString(!1,!1,!0,c.Israel),",")}),T.jsx("button",{className:"close-btn sidebar-close-btn",onClick:()=>{window.innerWidth>1200&&!D?k?.():S()},"aria-label":"Close Zmanim sidebar",children:T.jsx(xc,{size:24})})]}),T.jsx("p",{className:"text-accent-amber font-bold tracking-wide text-sm",children:t.getDate().toLocaleDateString(i==="he"?"he-IL":"en-US",{dateStyle:"full"})}),T.jsx("p",{className:"text-text-secondary text-[11px] opacity-70 italic",children:Zw(t,i)})]}),T.jsx("div",{className:"divider"}),T.jsxs("button",{onClick:Q=>p(Q,t),className:"btn-warm border rounded-xl py-3 flex items-center justify-center gap-2 font-bold text-sm transition-all hover:scale-[1.02] shadow-sm mb-2",children:[T.jsx(VS,{size:18}),T.jsx("span",{children:e.addEvent})]}),T.jsxs("section",{ref:q,onScroll:le,className:"flex-grow overflow-y-auto pr-1 flex flex-col gap-4",children:[a.length>0&&T.jsx("div",{className:"flex flex-col gap-2",children:a.map(Q=>{const fe=Ld(Q,t);return T.jsx("div",{className:"relative p-3 rounded-xl border border-glass-border group hover:brightness-105 transition-all shadow-md",style:{backgroundColor:Q.backColor||"var(--accent-amber)",color:Q.textColor||"#ffffff"},children:T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("h4",{className:"font-bold flex gap-2 items-center flex-grow text-sm cursor-pointer",onClick:()=>d(Q,t),children:[Q.name,fe>0&&T.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wider opacity-80",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:fe})]}),T.jsx("button",{onClick:()=>m(Q.id),className:"p-1 hover:bg-black/10 rounded-md transition-all",title:e.deleteEvent,children:T.jsx(Jw,{size:14})})]})},Q.id)})}),s.dayNotes.length>0&&T.jsx("div",{className:"flex flex-wrap gap-2",children:s.dayNotes.map((Q,fe)=>T.jsx("span",{className:"font-bold text-accent-rose border border-accent-rose/10 leading-none shadow-sm text-[11px]",style:{backgroundColor:"rgba(252, 165, 165, 0.15)",padding:"5px 10px",borderRadius:"100px"},children:Q},fe))}),s.tefillahNotes.length>0&&T.jsx("div",{className:"flex flex-wrap gap-2",children:s.tefillahNotes.map((Q,fe)=>T.jsx("span",{className:"font-bold text-accent-amber border border-accent-amber/10 leading-none shadow-sm text-[11px]",style:{backgroundColor:"rgba(251, 191, 36, 0.15)",padding:"5px 10px",borderRadius:"100px"},children:Q},fe))}),T.jsxs("div",{className:"flex flex-col gap-2",children:[vc.toString(t)&&T.jsxs("div",{className:"p-3 rounded-xl bg-accent-gold/5 border border-accent-gold/20 flex items-center gap-3",children:[T.jsx(b2,{size:18,className:"text-accent-gold flex-shrink-0"}),T.jsx("span",{className:"font-bold text-sm",children:i==="he"?vc.toStringHeb(t):vc.toString(t)})]}),H.length>0&&T.jsxs("div",{className:"p-3 rounded-xl bg-accent-coral/5 border border-accent-coral/20 flex items-center gap-3",children:[T.jsx(b2,{size:18,className:"text-accent-coral flex-shrink-0"}),T.jsx("span",{className:"font-bold text-sm",children:i==="en"?"Pirkei Avos - "+H.map(Q=>`Perek ${pe.toJewishNumber(Q)}`).join(" & "):"  - "+H.map(Q=>` ${pe.toJewishNumber(Q)}`).join(" ")})]}),(()=>{const Q=t.getCandleLighting(c,!0);return Q?T.jsxs("div",{className:"p-3 rounded-xl bg-accent-amber/10 border border-accent-amber/30 flex items-center gap-3",children:[T.jsx(Lw,{size:20,className:"text-accent-amber flex-shrink-0"}),T.jsxs("span",{className:"font-black text-sm",children:[e.candleLighting,": ",Vp(Q)]})]}):null})()]}),T.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[T.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest opacity-50 px-1",children:e.zmanim}),l.map((Q,fe)=>{const he=[5,15].includes(Number(Q.zmanType.id));return T.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl transition-all group hover:border-accent-amber/30 ${he?"solar-zman-highlight":"bg-white/5 border border-white/10"}`,children:[T.jsx("span",{className:"text-xs font-bold text-text-secondary",children:i==="he"?Q.zmanType.heb:Q.zmanType.eng}),T.jsx("span",{className:"text-sm font-bold font-mono text-accent-amber",children:Vp(Q.time).toUpperCase()})]},fe)})]})]})]})})]})},oc=({leftLabel:i,rightLabel:e,value:t,onChange:a})=>T.jsxs("div",{className:"toggle-settings-row",children:[T.jsx("span",{className:`toggle-label ${t==="left"?"active":"inactive"}`,onClick:()=>a("left"),children:i}),T.jsx("div",{className:`toggle-switch-track ${t==="right"?"active":""}`,onClick:()=>a(t==="left"?"right":"left"),children:T.jsx("div",{className:"toggle-thumb"})}),T.jsx("span",{className:`toggle-label text-right ${t==="right"?"active":"inactive"}`,onClick:()=>a("right"),children:e})]});class LS{static async requestPermission(){return"Notification"in window?await Notification.requestPermission():"default"}static getPermissionStatus(){return"Notification"in window?Notification.permission:"denied"}static async checkAndNotify(e,t,a,s,l,c){if(!c)return;const m=this.getPermissionStatus()==="granted",p=s.addDays(1);e.forEach(v=>{v.remindDayBefore&&this.isEventOnDate(v,p)&&m&&this.sendNotification(v,p,"Tomorrow"),v.remindDayOf&&this.isEventOnDate(v,s)&&m&&this.sendNotification(v,s,"Today")})}static isEventOnDate(e,t){switch(e.type){case He.HebrewDateRecurringYearly:return e.jMonth===t.Month&&e.jDay===t.Day;case He.HebrewDateRecurringMonthly:return e.jDay===t.Day;case He.SecularDateRecurringYearly:{const a=new Date(e.sDate),s=t.getDate();return a.getMonth()===s.getMonth()&&a.getDate()===s.getDate()}case He.SecularDateRecurringMonthly:{const a=new Date(e.sDate),s=t.getDate();return a.getDate()===s.getDate()}case He.OneTime:return e.jAbs===t.Abs||e.jYear===t.Year&&e.jMonth===t.Month&&e.jDay===t.Day;default:return!1}}static sendNotification(e,t,a){const s=Ld(e,t),l=`notif_${e.id}_${t.Year}_${t.Month}_${t.Day}`;if(localStorage.getItem(l))return;const c=`${e.name}`;let d=`${a}: ${e.name}`;if(s>0){const p=this.getOrdinalSuffix(s);d+=` (${s}${p} Anniversary)`}const m=new Notification(c,{body:d,icon:"/icon.png",badge:"/icon.svg",requireInteraction:!0});m.onclick=()=>{window.focus(),m.close()},localStorage.setItem(l,"true")}static getOrdinalSuffix(e){const t=["th","st","nd","rd"],a=e%100;return t[(a-20)%10]||t[a]||t[0]}}const n5=({lang:i,setLang:e,theme:t,setTheme:a,textInLanguage:s,locationName:l,setLocationName:c,isOpen:d,onClose:m,onLogout:p,user:v,onLogin:S,todayStartMode:D,setTodayStartMode:k,emailEnabled:H,setEmailEnabled:q,browserNotificationsEnabled:$,setBrowserNotificationsEnabled:W,calendarView:le,setCalendarView:Q,desktopSidebarMode:fe,setDesktopSidebarMode:he})=>{const ne=_e.useRef(null),[A,I]=_e.useState(!0),z=()=>{if(ne.current){const{scrollTop:C,scrollHeight:N,clientHeight:O}=ne.current,R=C+O>=N-2;I(R)}};return _e.useEffect(()=>{d&&setTimeout(z,100)},[d]),T.jsxs(T.Fragment,{children:[d&&T.jsx("div",{className:"sidebar-overlay",onClick:m,style:{zIndex:1100}}),T.jsxs("aside",{ref:ne,onScroll:z,className:`settings-sidebar glass-panel scroll-affordance ${d?"open":""} ${A?"at-bottom":"has-more"}`,style:{zIndex:1200},children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsx("h2",{className:"text-xl font-black tracking-tight",children:s.settings||"Settings"}),T.jsx("button",{className:"close-btn settings-close-btn",onClick:m,children:T.jsx(xc,{size:20})})]}),T.jsxs("div",{className:"flex flex-col gap-6 pb-10",children:[T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:i==="he"?" / ":"Language / English"}),T.jsxs("button",{onClick:()=>e(i==="en"?"he":"en"),className:"p-2 w-full py-4 rounded-xl btn-warm border flex items-center justify-center gap-3 font-bold text-sm shadow-md transition-all hover:scale-[1.01]",children:[T.jsx(Vw,{size:18,className:"text-accent-amber"}),T.jsx("span",{children:i==="en"?"":"ENGLISH"})]})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:i==="he"?" ":"Appearance Theme"}),T.jsxs("button",{onClick:()=>T1(t,a),className:"w-full py-4 rounded-xl btn-warm border flex items-center justify-center gap-3 font-bold text-sm shadow-md transition-all hover:scale-[1.01]",children:[T.jsx("div",{className:"p-2 text-xl leading-none",children:S1(t)}),T.jsx("span",{className:"uppercase tracking-wider",children:t===un.Warm?i==="he"?"":"WARM":t===un.Dark?i==="he"?"":"DARK":t===un.Light?i==="he"?"":"LIGHT":i==="he"?"":"TCHELES"})]})]})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:s.location}),T.jsxs("div",{className:"relative w-full flex items-center gap-2",children:[T.jsx(Uw,{className:`absolute ${i==="he"?"right-3":"left-3"} top-1/2 -translate-y-1/2 text-accent-amber pointer-events-none`,size:14}),T.jsx("select",{value:l,onChange:C=>c(C.target.value),className:`w-full btn-warm border rounded-xl py-3 p-2 ${i==="he"?"pr-10 pl-4":"pl-10 pr-4"} text-xs font-bold outline-none appearance-none`,children:Ml.sort((C,N)=>C.Name.localeCompare(N.Name)).map(C=>T.jsx("option",{value:C.Name,className:"bg-bg-primary",children:i==="he"&&C.NameHebrew?C.NameHebrew:C.Name},C.Name))})]})]}),T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:s.todayStart}),T.jsx(oc,{leftLabel:s.sunset,rightLabel:s.midnight,value:D==="sunset"?"left":"right",onChange:C=>k(C==="left"?"sunset":"midnight")})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:s.emailReminders}),T.jsx(oc,{leftLabel:s.on,rightLabel:s.off,value:H?"left":"right",onChange:C=>q(C==="left")})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:s.browserNotifications}),T.jsx(oc,{leftLabel:s.on,rightLabel:s.off,value:$?"left":"right",onChange:async C=>{const N=C==="left";N&&await LS.requestPermission(),W(N)}})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:s.calendarView}),T.jsx(oc,{leftLabel:s.jewishMonth,rightLabel:s.secularMonth,value:le==="jewish"?"left":"right",onChange:C=>Q(C==="left"?"jewish":"secular")})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 px-1",children:s.desktopSidebar}),T.jsx(oc,{leftLabel:s.sidePanelVisible,rightLabel:s.sidePanelHidden,value:fe==="permanent"?"left":"right",onChange:C=>he(C==="left"?"permanent":"hidden")})]})]}),T.jsx("div",{className:"mt-4 pt-6 border-t border-glass-border/30",children:v?T.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 rounded-2xl bg-white/5 border border-white/10",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[v.photoURL?T.jsx("img",{src:v.photoURL,alt:"",className:"w-8 h-8 rounded-full border border-accent-gold/30"}):T.jsx("div",{className:"w-8 h-8 rounded-full bg-accent-gold/20 flex items-center justify-center text-accent-gold font-bold",children:v.displayName?.[0]||"?"}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"font-bold text-xs truncate max-w-[120px]",children:v.displayName||v.email}),T.jsx("span",{className:"text-[9px] text-accent-gold font-bold uppercase tracking-widest opacity-70",children:s.cloud})]})]}),T.jsx("button",{onClick:p,className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:T.jsx(xc,{size:18})})]}):T.jsxs("button",{onClick:S,className:"w-full flex items-center justify-center gap-3 py-3 rounded-xl btn-warm border font-bold text-xs transition-all hover:scale-[1.02] shadow-lg",children:[T.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"",className:"w-4 h-4"}),T.jsx("span",{children:s.signInWithGoogle})]})})]})]})]})},BS=({lang:i,textInLanguage:e,navigateMonth:t,navigateYear:a,handleGoToToday:s,setIsJumpModalOpen:l,className:c})=>T.jsx("div",{className:`flex items-center gap-6 ${c}`,children:T.jsxs("div",{className:`flex btn-warm rounded-2xl p-1 border ${i==="he"?"flex-row-reverse":""}`,children:[T.jsx("button",{onClick:()=>l(!0),className:"btn-warm",style:{margin:"0 1rem",border:"0",color:"var(--accent-amber)",backgroundColor:"transparent"},title:e.goToDate,children:T.jsx(Op,{size:30})}),T.jsx("button",{onClick:()=>a(-1),className:`p-2 btn-warm rounded-xl ${i==="he"?"border-l":"border-r"} transition-all border-glass-border/50`,title:e.previousYear,children:T.jsxs("div",{className:"flex -space-x-2",children:[i==="he"?T.jsx(dl,{size:16}):T.jsx(fl,{size:16}),i==="he"?T.jsx(dl,{size:16}):T.jsx(fl,{size:16})]})}),T.jsx("button",{onClick:()=>t(-1),className:"p-2 btn-warm rounded-xl transition-all border-glass-border/50",title:e.previousMonth,children:i==="he"?T.jsx(dl,{size:20}):T.jsx(fl,{size:20})}),T.jsx("button",{onClick:s,className:"px-6 py-2 text-sm font-bold btn-warm rounded-xl transition-all min-w-[100px]",children:e.today}),T.jsx("button",{onClick:()=>t(1),className:"p-2 btn-warm rounded-xl transition-all border-glass-border/50",title:e.nextMonth,children:i==="he"?T.jsx(fl,{size:20}):T.jsx(dl,{size:20})}),T.jsx("button",{onClick:()=>a(1),className:`p-2 btn-warm rounded-xl ${i==="he"?"border-r":"border-l"} transition-all border-glass-border/50`,title:e.nextYear,children:T.jsxs("div",{className:"flex -space-x-2",children:[i==="he"?T.jsx(fl,{size:16}):T.jsx(dl,{size:16}),i==="he"?T.jsx(fl,{size:16}):T.jsx(dl,{size:16})]})})]})}),a5=({lang:i,textInLanguage:e,currentMonthName:t,currentYearName:a,secondaryDateRange:s,navigateMonth:l,navigateYear:c,handleGoToToday:d,setIsJumpModalOpen:m,setIsEventsListOpen:p,onSettingsOpen:v,theme:S,setTheme:D,calendarView:k,setCalendarView:H})=>T.jsxs("header",{className:"glass-panel p-4 px-6 flex items-center justify-between main-header",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:v,className:"",style:{border:"0",color:"var(--accent-amber)",backgroundColor:"transparent"},title:e.settings||"Settings",children:T.jsx(Fw,{size:20})}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"p-1 bg-accent-amber/10 rounded-xl overflow-hidden shadow-inner",children:T.jsx("img",{src:"./icon.svg",width:"32",height:"32",alt:"Luach Logo"})}),T.jsx("h1",{className:"text-xl font-black tracking-tight",children:e.title})]})]}),T.jsx(BS,{className:"nav-controls",lang:i,textInLanguage:e,navigateMonth:l,navigateYear:c,handleGoToToday:d,setIsJumpModalOpen:m}),T.jsxs("h1",{className:"flex gap-4 flex-row justify-between items-center calendar-month-year",children:[T.jsxs("div",{children:[t," ",a]}),T.jsx("div",{className:"secondary-month-year",children:s})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>T1(S,D),className:"no-border no-background cursor-pointer",style:{paddingBottom:"3px"},title:e.colorTheme,children:S1(S)}),T.jsx("button",{onClick:()=>H(k==="jewish"?"secular":"jewish"),className:"no-border no-background cursor-pointer btn-warm",title:k==="jewish"?e.secularMonth:e.jewishMonth,children:T.jsx(kS,{size:14})}),T.jsxs("button",{onClick:()=>p(!0),className:"p-3 btn-warm rounded-2xl border transition-all flex items-center gap-2 font-bold text-sm h-[42px] px-4",title:i==="he"?"":"Events",children:[T.jsx(OS,{size:16}),T.jsx("span",{className:"hidden sm:inline",children:i==="he"?"":"Events"})]})]})]}),i5=({lang:i,textInLanguage:e,navigateMonth:t,navigateYear:a,handleGoToToday:s,setIsJumpModalOpen:l,setIsEventsListOpen:c,theme:d,setTheme:m,calendarView:p,setCalendarView:v})=>T.jsx("footer",{className:"mobile-footer glass-panel border-t",children:T.jsxs("div",{className:"flex items-center justify-between w-full p-2 px-4 h-full",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("button",{onClick:()=>c(!0),className:"p-2 btn-warm rounded-xl text-accent-amber",title:i==="he"?"":"Events",children:T.jsx(OS,{size:22})}),T.jsx("button",{onClick:()=>v(p==="jewish"?"secular":"jewish"),className:"no-border no-background cursor-pointer btn-warm",title:p==="jewish"?e.secularMonth:e.jewishMonth,children:T.jsx(kS,{size:14})}),T.jsx("button",{onClick:()=>T1(d,m),className:"no-border no-background cursor-pointer",style:{paddingBottom:"7px"},title:e.colorTheme,children:S1(d)})]}),T.jsx(BS,{lang:i,textInLanguage:e,navigateMonth:t,navigateYear:a,handleGoToToday:s,setIsJumpModalOpen:l})]})}),r5=({lang:i,textInLanguage:e,currentJDate:t,monthInfo:a,selectedJDate:s,location:l,events:c,setSelectedJDate:d,handleAddNewEventForDate:m,handleEditEvent:p,getEventsForDate:v,navigateMonth:S,today:D,calendarView:k,theme:H})=>{const[q,$]=Il.useState(null),W=Il.useRef(!1),le=ne=>{ne.button===0&&(W.current=!1,$({x:ne.clientX,y:ne.clientY,time:Date.now(),id:ne.pointerId}),ne.target.setPointerCapture(ne.pointerId))},Q=ne=>{if(!q||q.id!==ne.pointerId)return;const A=Math.abs(ne.clientX-q.x),I=Math.abs(ne.clientY-q.y);(A>10||I>10)&&(W.current=!0),A>I&&A>10&&ne.cancelable&&ne.preventDefault()},fe=ne=>{if(!q||q.id!==ne.pointerId)return;const A={x:ne.clientX,y:ne.clientY,time:Date.now()},I=A.x-q.x,z=A.y-q.y,C=Math.abs(I),N=Math.abs(z),O=A.time-q.time,R=50,xe=500;if(C>R&&C>N&&O<xe){const We=i==="he";I>0?S(We?1:-1):S(We?-1:1)}else N>R&&N>C&&O<xe?z>0?S(-1):S(1):C<5&&N<5&&(W.current=!1);$(null)},he=()=>{$(null),W.current=!1};return T.jsx("main",{className:"calendar-main fade-in",style:{animationDelay:"0.1s"},onPointerDown:le,onPointerMove:Q,onPointerUp:fe,onPointerCancel:he,children:T.jsxs("section",{className:"calendar-wrapper",children:[T.jsx("div",{className:"calendar-header-days",children:(i==="he"?["","","","","","",""]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Shabbos"]).map(ne=>T.jsx("div",{className:ne===(i==="he"?"":"Shabbos")?"text-accent-amber":"",children:ne},ne))}),T.jsx("div",{className:"calendar-grid",style:{gridTemplateRows:`repeat(${a.weeksNeeded}, 1fr)`,"--weeks":a.weeksNeeded},children:a.days.map((ne,A)=>{const I=ne.Abs===D.Abs,z=ne.Abs===s.Abs,C=k==="jewish"?ne.Month!==t.Month:ne.getDate().getMonth()!==t.getDate().getMonth(),N=MS(ne,{hour:10,minute:0},l,i==="en"),O=v(ne),R=ne.isYomTov(l.Israel),We=ne.getDayOfWeek()===6||R;return T.jsxs("div",{className:`day-cell ${I?"today":""} ${z?"selected":""} ${C?"other-month":""}`,onClick:()=>{if(W.current){W.current=!1;return}d(ne)},style:{...We?{backgroundColor:"var(--holiday-bg)"}:{},...O.length>0&&O[0].backColor?{backgroundColor:O[0].backColor,"--cell-bg":O[0].backColor,"--text-primary":O[0].textColor||"#ffffff","--text-secondary":O[0].textColor||"#ffffff",...z?{borderColor:O[0].textColor||"#ffffff"}:{}}:{}},children:[I&&T.jsx("div",{className:"astroid-overlay",style:{zIndex:1,pointerEvents:"none"},children:T.jsx("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{width:"200%",height:"120%"},children:T.jsx("path",{d:"M 50 0 Q 50 50 100 50 Q 50 50 50 100 Q 50 50 0 50 Q 50 50 50 0",fill:H===un.Dark||H===un.Warm?"rgba(200, 200, 255, 0.25)":"rgba(0, 0, 100, 0.25)"})})}),T.jsx("div",{className:`day-number-container ${k==="secular"?"flex-row-reverse":""}`,children:k==="jewish"?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"hebrew-day",children:pe.toJewishNumber(ne.Day)}),T.jsx("span",{className:"secular-day",children:ne.getDate().getDate()})]}):T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"hebrew-day-secondary",children:pe.toJewishNumber(ne.Day)}),T.jsx("span",{className:"secular-day-primary",children:ne.getDate().getDate()})]})}),T.jsx("button",{className:"day-add-btn",onClick:L=>m(L,ne),title:e.addEvent,children:T.jsx(VS,{size:14})}),T.jsxs("div",{className:"flex flex-col gap-0.5 justify-center items-center mt-auto overflow-hidden w-full",children:[ne.getDayOfWeek()===6&&!ne.isYomTovOrCholHamoed(l.Israel)&&T.jsx("div",{className:"shabbos-indicator",children:i==="he"?ne.getSedra(l.Israel).toStringHeb():ne.getSedra(l.Israel).toString()}),(()=>{const L=ne.getCandleLighting(l,!0);return L?T.jsxs("div",{className:"candle-lighting-text",children:[T.jsxs("span",{className:"opacity-70",children:[i==="he"?" ":"Candles",":"]})," ",Vp(L)]}):null})(),O.length>0&&T.jsxs("div",{className:"flex flex-row flex-wrap gap-1 justify-center items-center w-full my-0.5",children:[O.slice(0,5).map(L=>{const re=Ld(L,ne);return T.jsxs("button",{onClick:de=>{de.stopPropagation(),p(L,ne)},style:{backgroundColor:L.backColor||"var(--accent-amber)",borderRadius:6,padding:"2px 4px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderWidth:0,fontSize:"9px",flexShrink:0},children:[T.jsx("span",{className:"truncate font-semibold drop-shadow-md",style:{padding:"1px 2px",color:L.textColor||"#ffffff",fontSize:"10px"},children:L.name}),re>0&&T.jsx("span",{className:"font-bold px-1 py-0.5 rounded",style:{backgroundColor:L.textColor||"#ffffff",color:L.backColor||"var(--accent-amber)",fontSize:"10px"},children:re})]},L.id)}),O.length>5&&T.jsxs("span",{className:"text-[8px] text-text-secondary",children:["+",O.length-5]})]}),(()=>{const L=[],re=ne.getDayOfOmer();return re>0&&L.push(i==="he"?`: ${pe.toJewishNumber(re)}`:`Omer: ${re}`),(N.dayNotes||[]).forEach(Ee=>L.push(Ee)),(N.shulNotes||[]).filter(Ee=>Ee.includes("Mevarchim")||Ee.includes("")||Ee.includes("Shkalim")||Ee.includes("")||Ee.includes("Zachor")||Ee.includes("")||Ee.includes("Parah")||Ee.includes("")||Ee.includes("Hachodesh")||Ee.includes("")||Ee.includes("Hagadol")||Ee.includes("")||Ee.includes("Shuva")||Ee.includes("")||Ee.includes("Chazon")||Ee.includes("")||Ee.includes("Shira")||Ee.includes("")).forEach(Ee=>{L.includes(Ee)||L.push(Ee)}),L.length>0&&T.jsx("div",{className:"flex flex-col gap-0 justify-center items-center w-full",children:L.map((Ee,M)=>T.jsx("div",{className:"holiday-indicator",children:Ee},M))})})()]})]},A)})})]})})},E1=({isOpen:i,onClose:e,title:t,subtitle:a,children:s,footer:l,subHeader:c,maxWidth:d="450px",height:m="auto",className:p=""})=>{const v=_e.useRef(null),[S,D]=_e.useState(!0),k=()=>{if(v.current){const{scrollTop:H,scrollHeight:q,clientHeight:$}=v.current,W=H+$>=q-5;D(W)}};return _e.useEffect(()=>{if(i){const H=setTimeout(k,100);return()=>clearTimeout(H)}},[i,s]),i?T.jsx("div",{className:"modal-overlay",onClick:e,style:{zIndex:2e3},children:T.jsxs("div",{className:`modal-content glass-panel shadow-2xl flex flex-col scroll-affordance ${p} ${S?"at-bottom":"has-more"}`,style:{maxWidth:d,maxHeight:"90vh",height:m,padding:0,overflow:"hidden"},onClick:H=>H.stopPropagation(),children:[T.jsxs("div",{className:"p-8 pb-4 flex items-center justify-between flex-shrink-0",children:[T.jsxs("div",{className:"flex flex-col",children:[t&&T.jsx("h3",{className:"text-xl font-black",children:t}),a&&T.jsx("div",{className:"text-accent-amber font-bold text-sm",children:a})]}),T.jsx("button",{onClick:e,className:"close-btn settings-close-btn",title:"Close",children:T.jsx(xc,{size:20})})]}),c&&T.jsx("div",{className:"px-8 pb-4 flex-shrink-0",children:c}),T.jsx("div",{ref:v,onScroll:k,className:"flex-grow overflow-y-auto px-8 pb-8",children:s}),l&&T.jsx("div",{className:"p-8 pt-4 border-t border-glass-border flex-shrink-0",children:l})]})}):null},s5=({isOpen:i,onClose:e,editingEvent:t,textInLanguage:a,lang:s,selectedJDate:l,formName:c,setFormName:d,formNotes:m,setFormNotes:p,formType:v,setFormType:S,formColor:D,setFormColor:k,formTextColor:H,setFormTextColor:q,formRemindDayOf:$,setFormRemindDayOf:W,formRemindDayBefore:le,setFormRemindDayBefore:Q,onSave:fe,onDelete:he,onChangeDate:ne})=>T.jsx(E1,{isOpen:i,onClose:e,title:t?a.saveEvent:a.addNewEvent,subtitle:T.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[T.jsx("span",{children:s==="he"?l.toStringHeb():l.toString()}),t&&ne&&T.jsx("button",{onClick:ne,className:"p-2 btn-warm border rounded-lg hover:bg-accent-amber/20 transition-all",children:s==="he"?" ":"Change Date"})]}),footer:T.jsxs("div",{className:"flex items-center gap-3",children:[t&&T.jsx("button",{onClick:()=>{window.confirm(a.deleteConfirmation||"Are you sure you want to delete this event?")&&(he(t.id),e())},className:"p-3 btn-warm rounded-xl border transition-all",title:a.deleteEvent,children:T.jsx(PS,{size:18})}),T.jsx("button",{onClick:fe,className:"flex-grow py-3 btn-warm rounded-xl hover:bg-accent-amber/90 transition-all shadow-lg hover:shadow-accent-amber/20",style:{fontWeight:"bold"},children:a.saveEvent}),T.jsx("button",{onClick:e,className:"px-6 py-3 btn-warm rounded-xl border transition-all",children:a.cancel})]}),children:T.jsxs("div",{className:"flex flex-col gap-6",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{className:"form-label",children:a.eventName}),T.jsx("input",{autoFocus:!0,className:"form-input",placeholder:s==="he"?":  , ...":"e.g. Birthday, Yahrtzeit...",value:c,onChange:A=>d(A.target.value)})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{className:"form-label",children:a.repeatPattern}),T.jsxs("select",{className:"form-input appearance-none cursor-pointer",value:v,onChange:A=>S(parseInt(A.target.value)),children:[T.jsx("option",{value:He.HebrewDateRecurringYearly,children:s==="he"?" ( )":"Yearly (Hebrew Date)"}),T.jsx("option",{value:He.HebrewDateRecurringMonthly,children:s==="he"?" ( )":"Monthly (Hebrew Date)"}),T.jsx("option",{value:He.SecularDateRecurringYearly,children:s==="he"?" ( )":"Yearly (Secular Date)"}),T.jsx("option",{value:He.SecularDateRecurringMonthly,children:s==="he"?" ( )":"Monthly (Secular Date)"}),T.jsx("option",{value:He.OneTime,children:s==="he"?" ":"One Time"})]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{className:"form-label",children:a.notes}),T.jsx("textarea",{className:"form-input min-h-[80px]",value:m,onChange:A=>p(A.target.value)})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{className:"form-label",children:a.colorTheme}),T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx("input",{type:"color",value:D,onChange:A=>k(A.target.value),className:"w-12 h-12 rounded-xl cursor-pointer border-2 btn-warm p-1"}),T.jsx("span",{className:"text-sm font-mono opacity-60",children:D})]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{className:"form-label",children:a.textColor}),T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx("input",{type:"color",value:H,onChange:A=>q(A.target.value),className:"w-12 h-12 rounded-xl cursor-pointer border-2 btn-warm p-1"}),T.jsx("span",{className:"text-sm font-mono opacity-60",children:H})]})]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{className:"form-label",children:a.reminders}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[T.jsx("input",{type:"checkbox",checked:le,onChange:A=>Q(A.target.checked),className:"w-4 h-4 rounded border-glass-border btn-warm checked:bg-accent-amber focus:ring-1 focus:ring-accent-amber transition-all"}),T.jsx("span",{className:"text-sm font-medium group-hover:text-accent-amber transition-colors",children:a.dayBefore})]}),T.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[T.jsx("input",{type:"checkbox",checked:$,onChange:A=>W(A.target.checked),className:"w-4 h-4 rounded border-glass-border btn-warm checked:bg-accent-amber focus:ring-1 focus:ring-accent-amber transition-all"}),T.jsx("span",{className:"text-sm font-medium group-hover:text-accent-amber transition-colors",children:a.dayOf})]})]})]})]})}),o5=({isOpen:i,onClose:e,textInLanguage:t,lang:a,jumpGregDate:s,setJumpGregDate:l,jumpJDay:c,setJumpJDay:d,jumpJMonth:m,setJumpJMonth:p,jumpJYear:v,setJumpJYear:S,handleJumpToGregorian:D,handleJumpToJewish:k,mode:H="jump"})=>{const q=H==="change",$=q?a==="he"?" ":"Change Date":t.goToDate,W=q?a==="he"?"  ":"Change Hebrew Date":t.goToJewish,le=q?a==="he"?"":"Change":t.go;return T.jsx(E1,{isOpen:i,onClose:e,title:$,footer:T.jsx("div",{className:"flex items-center gap-3",children:T.jsx("button",{onClick:k,className:"px-6 py-3 btn-warm rounded-xl font-bold border transition-all flex-1",children:W})}),children:T.jsxs("div",{className:"flex flex-col gap-8",children:[T.jsxs("div",{className:"space-y-4",children:[T.jsxs("h4",{className:"font-bold text-accent-amber uppercase tracking-wider text-sm flex items-center gap-2",children:[T.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent-amber"}),t.gregDate]}),T.jsxs("div",{className:"flex gap-2 py-3",children:[T.jsx("input",{type:"date",className:"form-input",value:s,onChange:Q=>l(Q.target.value)}),T.jsx("button",{onClick:D,className:"px-6 btn-warm border rounded-xl font-bold transition-all",children:le})]})]}),T.jsx("div",{className:"divider opacity-50"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("h4",{className:"font-bold text-accent-gold uppercase tracking-wider text-sm py-3",children:[T.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent-gold"}),t.jewDate]}),T.jsxs("div",{className:`flex gap-2 flex-col ${a==="he"?"rtl":"ltr"}`,children:[T.jsxs("div",{className:"form-group flex flex-row items-center mb-3",children:[T.jsx("label",{className:"text-text-secondary",children:t.day}),T.jsx("select",{className:"form-input appearance-none cursor-pointer text-center flex-1",value:c,onChange:Q=>d(parseInt(Q.target.value)),children:Array.from({length:30},(Q,fe)=>fe+1).map(Q=>T.jsx("option",{value:Q,className:"bg-bg-primary",children:a==="he"?pe.toJewishNumber(Q):Q},Q))})]}),T.jsxs("div",{className:"form-group flex flex-row items-center mb-3",children:[T.jsx("label",{className:"text-text-secondary",children:t.month}),T.jsx("select",{className:"form-input appearance-none cursor-pointer text-center flex-1",value:m,onChange:Q=>p(parseInt(Q.target.value)),children:(a==="he"?bc:Dl).slice(1).map((Q,fe)=>T.jsx("option",{value:fe+1,className:"bg-bg-primary",children:Q},fe))})]}),T.jsxs("div",{className:"form-group flex flex-row items-center mb-3",children:[T.jsx("label",{className:"text-text-secondary",children:t.year}),T.jsx("select",{className:"form-input appearance-none cursor-pointer text-center flex-1",value:v,onChange:Q=>S(parseInt(Q.target.value)),children:(()=>{const Q=new Te().Year;return Array.from({length:200},(fe,he)=>Q-100+he).map(fe=>T.jsx("option",{value:fe,className:"bg-bg-primary",children:a==="he"?pe.toJewishNumber(fe%1e3):fe},fe))})()})]})]})]})]})})};function fp(i){const e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0"),s=String(i.getHours()).padStart(2,"0"),l=String(i.getMinutes()).padStart(2,"0"),c=String(i.getSeconds()).padStart(2,"0");return`${e}${t}${a}T${s}${l}${c}`}function xf(i){return i.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n")}function l5(i){switch(i.type){case He.HebrewDateRecurringYearly:case He.SecularDateRecurringYearly:return"RRULE:FREQ=YEARLY";case He.HebrewDateRecurringMonthly:case He.SecularDateRecurringMonthly:return"RRULE:FREQ=MONTHLY";case He.OneTime:default:return""}}function u5(i){const e=new Date;let t=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Luach Web//Event Calendar//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH`;return i.forEach(a=>{const l=new Te(a.jYear,a.jMonth,a.jDay).getDate();l.setHours(9,0,0,0);const c=new Date(l);c.setHours(10,0,0,0);const d=`${a.id}@luach-web`;t+=`
BEGIN:VEVENT
UID:${d}
DTSTAMP:${fp(e)}
DTSTART:${fp(l)}
DTEND:${fp(c)}
SUMMARY:${xf(a.name)}`,a.notes&&(t+=`
DESCRIPTION:${xf(a.notes)}`);const m=l5(a);m&&(t+=`
${m}`),a.remindDayBefore&&(t+=`
BEGIN:VALARM
TRIGGER:-P1D
ACTION:DISPLAY
DESCRIPTION:Reminder: ${xf(a.name)} tomorrow
END:VALARM`),a.remindDayOf&&(t+=`
BEGIN:VALARM
TRIGGER:-PT2H
ACTION:DISPLAY
DESCRIPTION:Reminder: ${xf(a.name)} today
END:VALARM`),t+=`
END:VEVENT`}),t+=`
END:VCALENDAR`,t}function c5(i){const e=u5(i),t=new Blob([e],{type:"text/calendar;charset=utf-8"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`luach-events-${new Date().toISOString().split("T")[0]}.ics`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}const h5=({isOpen:i,onClose:e,events:t,lang:a,textInLanguage:s,handleEditEvent:l,deleteEvent:c,saveEvents:d,navigateToDate:m})=>{const[p,v]=_e.useState("date"),[S,D]=_e.useState("asc"),[k,H]=_e.useState(""),q=_e.useMemo(()=>{const A=k.toLowerCase();return[...t.filter(C=>C.name.toLowerCase().includes(A)||C.notes&&C.notes.toLowerCase().includes(A))].sort((C,N)=>{let O=0;switch(p){case"name":O=C.name.localeCompare(N.name);break;case"date":const R=Te.absJd(C.jYear,C.jMonth,C.jDay),xe=Te.absJd(N.jYear,N.jMonth,N.jDay);O=R-xe;break;case"type":O=C.type-N.type;break}return S==="asc"?O:-O})},[t,p,S,k]),$=A=>{p===A?D(S==="asc"?"desc":"asc"):(v(A),D("asc"))},W=A=>({[He.HebrewDateRecurringYearly]:a==="he"?" ":"Hebrew Yearly",[He.HebrewDateRecurringMonthly]:a==="he"?" ":"Hebrew Monthly",[He.SecularDateRecurringYearly]:a==="he"?" ":"Secular Yearly",[He.SecularDateRecurringMonthly]:a==="he"?" ":"Secular Monthly",[He.OneTime]:a==="he"?" ":"One Time"})[A]||"Unknown",le=()=>{const A=JSON.stringify(t,null,2),I=new Blob([A],{type:"application/json"}),z=URL.createObjectURL(I),C=document.createElement("a");C.href=z,C.download=`luach-events-${new Date().toISOString().split("T")[0]}.json`,C.click(),URL.revokeObjectURL(z)},Q=()=>{const A=["Name","Notes","Type","jAbs","Hebrew Date","Gregorian Date","Background Color","Text Color","Remind Day Of","Remind Day Before"],I=t.map(R=>{const xe=new Te(R.jAbs||Te.absJd(R.jYear,R.jMonth,R.jDay));return[`"${R.name.replace(/"/g,'""')}"`,`"${(R.notes||"").replace(/"/g,'""')}"`,W(R.type),R.jAbs||Te.absJd(R.jYear,R.jMonth,R.jDay),`"${a==="he"?xe.toStringHeb():xe.toString()}"`,`"${xe.getDate().toLocaleDateString()}"`,R.backColor,R.textColor,R.remindDayOf?"Yes":"No",R.remindDayBefore?"Yes":"No"].join(",")}),z=[A.join(","),...I].join(`
`),C=new Blob([z],{type:"text/csv"}),N=URL.createObjectURL(C),O=document.createElement("a");O.href=N,O.download=`luach-events-${new Date().toISOString().split("T")[0]}.csv`,O.click(),URL.revokeObjectURL(N)},fe=async A=>{try{const I=A.name.toLowerCase();let z=[];if(I.endsWith(".json")){const R=await A.text(),xe=JSON.parse(R);z=(Array.isArray(xe)?xe:[xe]).map(L=>{let re=L.jAbs,de;return!re&&L.jYear&&L.jMonth&&L.jDay?(re=Te.absJd(L.jYear,L.jMonth,L.jDay),de=new Te(L.jYear,L.jMonth,L.jDay)):re?de=new Te(re):(de=new Te(5784,1,1),re=de.Abs),{...L,jYear:de.Year,jMonth:de.Month,jDay:de.Day,jAbs:re,sDate:L.sDate||de.getDate().toISOString()}})}else if(I.endsWith(".csv")){const xe=(await A.text()).split(`
`).filter(re=>re.trim()),We=xe[0].split(",").map(re=>re.trim().replace(/"/g,"")),L=We.findIndex(re=>re.toLowerCase()==="jabs");for(let re=1;re<xe.length;re++){const de=xe[re].match(/(?:"([^"]*)"|([^,]+))/g)?.map(Ye=>Ye.replace(/^"|"$/g,"").trim())||[];if(de.length<We.length)continue;const je=de[0]||"",Ee=de[1]||"",M=de[2]||"";let Z,ue;L>=0&&de[L]?(Z=parseInt(de[L]),ue=new Te(Z)):(ue=new Te(5784,1,1),Z=ue.Abs);const ye=de[L>=0?6:5]||"#fde047",Ve=de[L>=0?7:6]||"#1e293b";let Ne=He.HebrewDateRecurringYearly;M.includes("Monthly")?Ne=He.HebrewDateRecurringMonthly:M.includes("Secular")&&M.includes("Yearly")?Ne=He.SecularDateRecurringYearly:M.includes("Secular")&&M.includes("Monthly")?Ne=He.SecularDateRecurringMonthly:M.includes("One Time")&&(Ne=He.OneTime),je&&z.push({id:`imported-${Date.now()}-${re}`,name:je,notes:Ee,type:Ne,jYear:ue.Year,jMonth:ue.Month,jDay:ue.Day,jAbs:Z,sDate:ue.getDate().toISOString(),backColor:ye,textColor:Ve,remindDayOf:de[L>=0?8:7]==="Yes",remindDayBefore:de[L>=0?9:8]==="Yes"})}}else if(I.endsWith(".xml")){const R=await A.text();new DOMParser().parseFromString(R,"text/xml").querySelectorAll("UserOccasion").forEach((re,de)=>{const je=re.querySelector("Name")?.textContent||"",Ee=re.querySelector("Notes")?.textContent||"",M=parseInt(re.querySelector("JewishDate AbsoluteDate")?.textContent||"0"),Z=re.querySelector("UserOccasionType")?.textContent||"";let ue=re.querySelector("BackColor")?.getAttribute("ColorHtml")||"#fde047",ye=re.querySelector("Color")?.getAttribute("ColorHtml")||"#1e293b";const Ve={Yellow:"#FFFF00",Blue:"#0000FF",Lime:"#00FF00",Black:"#000000",White:"#FFFFFF",Maroon:"#800000",Navy:"#000080",Green:"#008000",Red:"#FF0000",Purple:"#800080",Orange:"#FFA500"};ue=Ve[ue]||ue,ye=Ve[ye]||ye;let Ne=He.HebrewDateRecurringYearly;if(Z==="HebrewDateRecurringMonthly"?Ne=He.HebrewDateRecurringMonthly:Z==="SecularDateRecurringYearly"?Ne=He.SecularDateRecurringYearly:Z==="SecularDateRecurringMonthly"?Ne=He.SecularDateRecurringMonthly:Z==="OneTime"&&(Ne=He.OneTime),M&&je){const Ye=new Te(M);z.push({id:`imported-${Date.now()}-${de}`,name:je,notes:Ee,type:Ne,jYear:Ye.Year,jMonth:Ye.Month,jDay:Ye.Day,jAbs:M,sDate:Ye.getDate().toISOString(),backColor:ue,textColor:ye,remindDayOf:re.querySelector("SendEmailReminders")?.textContent==="true",remindDayBefore:!1})}})}else{alert("Unsupported file format. Please use JSON, CSV, or XML.");return}const C=new Set(t.map(R=>`${R.name}-${R.jYear}-${R.jMonth}-${R.jDay}`)),N=z.filter(R=>{const xe=`${R.name}-${R.jYear}-${R.jMonth}-${R.jDay}`;return!C.has(xe)});if(N.length===0){alert(a==="he"?"   ":"All events already exist (duplicates ignored)");return}const O=[...t,...N];d(O),alert(a==="he"?` ${N.length}   (${z.length-N.length}  )`:`Imported ${N.length} new events (${z.length-N.length} duplicates ignored)`)}catch(I){console.error("Import error:",I),alert(a==="he"?` : ${I}`:`Import error: ${I}`)}},he=()=>{const A=document.createElement("input");A.type="file",A.accept=".json,.csv,.xml",A.onchange=async I=>{const z=I.target.files?.[0];z&&await fe(z)},A.click()},ne=({field:A,label:I})=>T.jsxs("button",{onClick:()=>$(A),className:"no-border no-outline no-background",style:{fontSize:"1em",padding:"0.5em",color:p===A?"var(--accent-amber)":"var(--text-secondary)"},children:[I,p===A&&(S==="asc"?T.jsx(xw,{size:14}):T.jsx(Rw,{size:14}))]});return T.jsx(E1,{isOpen:i,onClose:e,maxWidth:"800px",height:"90vh",title:a==="he"?" ":"Events List",subtitle:`${t.length} ${a==="he"?"":"events"}`,subHeader:T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("div",{className:"flex flex-wrap gap-3",children:[T.jsxs("button",{onClick:le,className:"btn-warm border rounded-xl px-4 py-2 flex items-center gap-2 text-sm font-bold hover:brightness-110 transition-all",children:[T.jsx(hp,{size:16}),a==="he"?" JSON":"Export JSON"]}),T.jsxs("button",{onClick:Q,className:"btn-warm border rounded-xl px-4 py-2 flex items-center gap-2 text-sm font-bold hover:brightness-110 transition-all",children:[T.jsx(hp,{size:16}),a==="he"?" CSV":"Export CSV"]}),T.jsxs("button",{onClick:he,className:"btn-warm border rounded-xl px-4 py-2 flex items-center gap-2 text-sm font-bold hover:brightness-110 transition-all",children:[T.jsx(Xw,{size:16}),a==="he"?"":"Import"]}),T.jsxs("button",{onClick:()=>c5(t),className:"btn-warm border rounded-xl px-4 py-2 flex items-center gap-2 text-sm font-bold hover:brightness-110 transition-all",children:[T.jsx(hp,{size:16}),a==="he"?" ":"Export Calendar"]})]}),T.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[T.jsx("span",{style:{fontSize:"1.5em"},children:""}),T.jsx("input",{type:"text",value:k,onChange:A=>H(A.target.value),placeholder:a==="he"?" ...":"Filter your events...",className:`w-full bg-white/5 border border-glass-border rounded-xl py-4 ${a==="he"?"pr-12 pl-6 text-right":"pl-12 pr-6"} text-base focus:outline-none focus:border-accent-amber/50 transition-all`,style:{paddingRight:"16px",fontSize:"1.3em"}})]}),T.jsxs("div",{className:"flex items-center gap-3 pb-2 border-glass-border",children:[T.jsx("span",{className:"text-text-secondary",children:a==="he"?":":"Sort:"}),T.jsx(ne,{field:"name",label:a==="he"?"":"Name"}),T.jsx(ne,{field:"date",label:a==="he"?"":"Date"}),T.jsx(ne,{field:"type",label:a==="he"?"":"Type"})]})]}),children:T.jsx("div",{className:"flex flex-col gap-2",children:q.length===0?T.jsx("div",{className:"text-center py-8 text-text-secondary text-sm",children:a==="he"?" ":"No events"}):T.jsx("div",{className:"flex flex-col gap-2 pb-4",children:q.map(A=>{const I=new Te(A.jYear,A.jMonth,A.jDay),z=new Te,C=Ld(A,z);return T.jsx("div",{className:"rounded-lg border border-glass-border hover:brightness-110 transition-all cursor-pointer group",style:{backgroundColor:A.backColor||"var(--accent-amber)",padding:"12px 16px"},onClick:()=>{m(I),e()},children:T.jsxs("div",{className:"flex items-center justify-between brightness-90",children:[T.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[T.jsx("h3",{className:"font-bold truncate text-sm",style:{color:A.textColor||"#ffffff"},children:A.name}),T.jsx("span",{className:"text-[10px] opacity-70",style:{color:A.textColor},children:a==="he"?I.toStringHeb():I.toString()}),C>0&&T.jsx("div",{style:{color:A.backColor||"var(--accent-amber)",backgroundColor:A.textColor||"#ffffff",padding:"2px 4px",borderRadius:"4px",fontSize:"11px"},children:C})]}),T.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[T.jsx("button",{onClick:N=>{N.stopPropagation(),l(A,I)},className:"p-1.5 hover:bg-black/10 rounded transition-all",children:T.jsx(qw,{size:16,style:{color:A.textColor}})}),T.jsx("button",{onClick:N=>{N.stopPropagation(),confirm(a==="he"?"?":"Delete?")&&c(A.id)},className:"p-1.5 hover:bg-red-500/20 rounded transition-all",children:T.jsx(PS,{size:16,style:{color:A.textColor}})})]})]})},A.id)})})})})},f5=({todayEvents:i,tomorrowEvents:e,lang:t,onDismiss:a,onEventClick:s,isOpen:l})=>{if(!l||i.length===0&&e.length===0)return null;const c=new Te,d=c.addDays(1);return T.jsx("div",{className:"modal-overlay",onClick:a,style:{zIndex:1500},children:T.jsxs("div",{className:"modal-content glass-panel p-6 shadow-2xl",onClick:m=>m.stopPropagation(),style:{maxWidth:"500px"},children:[T.jsxs("div",{className:"flex items-start justify-between mb-6",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"p-3 bg-accent-amber/20 rounded-xl",children:T.jsx(Aw,{size:24,className:"text-accent-amber"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-black flex items-center gap-2",children:t==="he"?" ":"Event Reminders"}),T.jsx("p",{className:"text-sm text-text-secondary mt-1",children:t==="he"?"   ":"You have upcoming events"})]})]}),T.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-white/10 transition-all",title:t==="he"?"":"Close",children:T.jsx(xc,{size:20})})]}),T.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[i.length>0&&T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx(Op,{size:16,className:"text-accent-amber"}),T.jsx("p",{className:"text-sm font-bold text-accent-amber uppercase tracking-wider",children:t==="he"?"":"Today"})]}),T.jsx("div",{className:"flex flex-col gap-2",children:i.map(m=>T.jsxs("button",{onClick:()=>{s(m,c),a()},className:"text-left p-3 rounded-xl hover:brightness-110 transition-all border border-glass-border",style:{backgroundColor:m.backColor||"var(--accent-amber)",color:m.textColor||"#ffffff"},children:[T.jsx("div",{className:"font-bold",children:m.name}),m.notes&&T.jsx("div",{className:"text-xs opacity-80 mt-1",children:m.notes}),T.jsx("div",{className:"text-xs opacity-60 mt-1",children:t==="he"?" ":"Click to edit"})]},m.id))})]}),e.length>0&&T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx(Op,{size:16,className:"text-accent-gold"}),T.jsx("p",{className:"text-sm font-bold text-accent-gold uppercase tracking-wider",children:t==="he"?"":"Tomorrow"})]}),T.jsx("div",{className:"flex flex-col gap-2",children:e.map(m=>T.jsxs("button",{onClick:()=>{s(m,d),a()},className:"text-left p-3 rounded-xl hover:brightness-110 transition-all border border-glass-border",style:{backgroundColor:m.backColor||"var(--accent-gold)",color:m.textColor||"#ffffff"},children:[T.jsx("div",{className:"font-bold",children:m.name}),m.notes&&T.jsx("div",{className:"text-xs opacity-80 mt-1",children:m.notes}),T.jsx("div",{className:"text-xs opacity-60 mt-1",children:t==="he"?" ":"Click to edit"})]},m.id))})]})]}),T.jsx("div",{className:"mt-6 flex justify-end gap-3",children:T.jsx("button",{onClick:a,className:"px-6 py-2 btn-warm border rounded-xl font-bold transition-all",children:t==="he"?"":"Got it"})})]})})},d5="modulepreload",m5=function(i,e){return new URL(i,e).href},S2={},g5=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let p=function(v){return Promise.all(v.map(S=>Promise.resolve(S).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");s=p(t.map(v=>{if(v=m5(v,a),v in S2)return;S2[v]=!0;const S=v.endsWith(".css"),D=S?'[rel="stylesheet"]':"";if(a)for(let H=c.length-1;H>=0;H--){const q=c[H];if(q.href===v&&(!S||q.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${D}`))return;const k=document.createElement("link");if(k.rel=S?"stylesheet":d5,S||(k.as="script"),k.crossOrigin="",k.href=v,m&&k.setAttribute("nonce",m),document.head.appendChild(k),S)return new Promise((H,q)=>{k.addEventListener("load",H),k.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},p5=()=>{};var T2={};const jS=function(i){const e=[];let t=0;for(let a=0;a<i.length;a++){let s=i.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},y5=function(i){const e=[];let t=0,a=0;for(;t<i.length;){const s=i[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=i[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=i[t++],c=i[t++],d=i[t++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(m>>10)),e[a++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<i.length;s+=3){const l=i[s],c=s+1<i.length,d=c?i[s+1]:0,m=s+2<i.length,p=m?i[s+2]:0,v=l>>2,S=(l&3)<<4|d>>4;let D=(d&15)<<2|p>>6,k=p&63;m||(k=64,c||(D=64)),a.push(t[v],t[S],t[D],t[k])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(jS(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):y5(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<i.length;){const l=t[i.charAt(s++)],d=s<i.length?t[i.charAt(s)]:0;++s;const p=s<i.length?t[i.charAt(s)]:64;++s;const S=s<i.length?t[i.charAt(s)]:64;if(++s,l==null||d==null||p==null||S==null)throw new _5;const D=l<<2|d>>4;if(a.push(D),p!==64){const k=d<<4&240|p>>2;if(a.push(k),S!==64){const H=p<<6&192|S;a.push(H)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v5=function(i){const e=jS(i);return US.encodeByteArray(e,!0)},HS=function(i){return v5(i).replace(/\./g,"")},FS=function(i){try{return US.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const b5=()=>YS().__FIREBASE_DEFAULTS__,S5=()=>{if(typeof process>"u"||typeof T2>"u")return;const i=T2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},T5=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&FS(i[1]);return e&&JSON.parse(e)},Bd=()=>{try{return p5()||b5()||S5()||T5()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},E5=i=>Bd()?.emulatorHosts?.[i],qS=()=>Bd()?.config,GS=i=>Bd()?.[`_${i}`];class A5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}function eu(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KS(i){return(await fetch(i,{credentials:"include"})).ok}const Sc={};function w5(){const i={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?i.emulator.push(e):i.prod.push(e);return i}function I5(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let E2=!1;function D5(i,e){if(typeof window>"u"||typeof document>"u"||!eu(window.location.host)||Sc[i]===e||Sc[i]||E2)return;Sc[i]=e;function t(D){return`__firebase__banner__${D}`}const a="__firebase__banner",l=w5().prod.length>0;function c(){const D=document.getElementById(a);D&&D.remove()}function d(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function m(D,k){D.setAttribute("width","24"),D.setAttribute("id",k),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function p(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{E2=!0,c()},D}function v(D,k){D.setAttribute("id",k),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function S(){const D=I5(a),k=t("text"),H=document.getElementById(k)||document.createElement("span"),q=t("learnmore"),$=document.getElementById(q)||document.createElement("a"),W=t("preprendIcon"),le=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const Q=D.element;d(Q),v($,q);const fe=p();m(le,W),Q.append(le,H,$,fe),document.body.appendChild(Q)}l?(H.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function QS(){const i=Bd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C5(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function N5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M5(){const i=gn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function JS(){return!QS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $S(){return!QS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function XS(){try{return typeof indexedDB=="object"}catch{return!1}}function x5(){return new Promise((i,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),i(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function KC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const k5="FirebaseError";class ir extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=k5,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?O5(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ir(s,d,a)}}function O5(i,e){return i.replace(V5,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const V5=/\{\$([^}]+)}/g;function P5(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function lo(i,e){if(i===e)return!0;const t=Object.keys(i),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=i[s],c=e[s];if(A2(l)&&A2(c)){if(!lo(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function A2(i){return i!==null&&typeof i=="object"}function Xc(i){const e=[];for(const[t,a]of Object.entries(i))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function L5(i,e){const t=new B5(i,e);return t.subscribe.bind(t)}class B5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");j5(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=dp),s.error===void 0&&(s.error=dp),s.complete===void 0&&(s.complete=dp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j5(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function dp(){}const U5=1e3,H5=2,F5=14400*1e3,Y5=.5;function QC(i,e=U5,t=H5){const a=e*Math.pow(t,i),s=Math.round(Y5*a*(Math.random()-.5)*2);return Math.min(F5,a+s)}function fn(i){return i&&i._delegate?i._delegate:i}class uo{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Js="[DEFAULT]";class q5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new A5;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K5(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:G5(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G5(i){return i===Js?void 0:i}function K5(i){return i.instantiationMode==="EAGER"}class Q5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var at;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(at||(at={}));const J5={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},$5=at.INFO,X5={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},W5=(i,e,...t)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),s=X5[e];if(s)console[s](`[${a}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class A1{constructor(e){this.name=e,this._logLevel=$5,this._logHandler=W5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?J5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const Z5=(i,e)=>e.some(t=>i instanceof t);let w2,I2;function eI(){return w2||(w2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tI(){return I2||(I2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WS=new WeakMap,Pp=new WeakMap,ZS=new WeakMap,mp=new WeakMap,w1=new WeakMap;function nI(i){const e=new Promise((t,a)=>{const s=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(ns(i.result)),s()},c=()=>{a(i.error),s()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&WS.set(t,i)}).catch(()=>{}),w1.set(e,i),e}function aI(i){if(Pp.has(i))return;const e=new Promise((t,a)=>{const s=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Pp.set(i,e)}let Lp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Pp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ZS.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ns(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function iI(i){Lp=i(Lp)}function rI(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=i.call(gp(this),e,...t);return ZS.set(a,e.sort?e.sort():[e]),ns(a)}:tI().includes(i)?function(...e){return i.apply(gp(this),e),ns(WS.get(this))}:function(...e){return ns(i.apply(gp(this),e))}}function sI(i){return typeof i=="function"?rI(i):(i instanceof IDBTransaction&&aI(i),Z5(i,eI())?new Proxy(i,Lp):i)}function ns(i){if(i instanceof IDBRequest)return nI(i);if(mp.has(i))return mp.get(i);const e=sI(i);return e!==i&&(mp.set(i,e),w1.set(e,i)),e}const gp=i=>w1.get(i);function oI(i,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(i,e),d=ns(c);return a&&c.addEventListener("upgradeneeded",m=>{a(ns(c.result),m.oldVersion,m.newVersion,ns(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const lI=["get","getKey","getAll","getAllKeys","count"],uI=["put","add","delete","clear"],pp=new Map;function D2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(pp.get(e))return pp.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=uI.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||lI.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,s?"readwrite":"readonly");let p=m.store;return a&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),s&&m.done]))[0]};return pp.set(e,l),l}iI(i=>({...i,get:(e,t,a)=>D2(e,t)||i.get(e,t,a),has:(e,t)=>!!D2(e,t)||i.has(e,t)}));class cI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hI(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function hI(i){return i.getComponent()?.type==="VERSION"}const Bp="@firebase/app",z2="0.14.6";const er=new A1("@firebase/app"),fI="@firebase/app-compat",dI="@firebase/analytics-compat",mI="@firebase/analytics",gI="@firebase/app-check-compat",pI="@firebase/app-check",yI="@firebase/auth",_I="@firebase/auth-compat",vI="@firebase/database",bI="@firebase/data-connect",SI="@firebase/database-compat",TI="@firebase/functions",EI="@firebase/functions-compat",AI="@firebase/installations",wI="@firebase/installations-compat",II="@firebase/messaging",DI="@firebase/messaging-compat",zI="@firebase/performance",RI="@firebase/performance-compat",CI="@firebase/remote-config",NI="@firebase/remote-config-compat",MI="@firebase/storage",xI="@firebase/storage-compat",kI="@firebase/firestore",OI="@firebase/ai",VI="@firebase/firestore-compat",PI="firebase",LI="12.6.0";const jp="[DEFAULT]",BI={[Bp]:"fire-core",[fI]:"fire-core-compat",[mI]:"fire-analytics",[dI]:"fire-analytics-compat",[pI]:"fire-app-check",[gI]:"fire-app-check-compat",[yI]:"fire-auth",[_I]:"fire-auth-compat",[vI]:"fire-rtdb",[bI]:"fire-data-connect",[SI]:"fire-rtdb-compat",[TI]:"fire-fn",[EI]:"fire-fn-compat",[AI]:"fire-iid",[wI]:"fire-iid-compat",[II]:"fire-fcm",[DI]:"fire-fcm-compat",[zI]:"fire-perf",[RI]:"fire-perf-compat",[CI]:"fire-rc",[NI]:"fire-rc-compat",[MI]:"fire-gcs",[xI]:"fire-gcs-compat",[kI]:"fire-fst",[VI]:"fire-fst-compat",[OI]:"fire-vertex","fire-js":"fire-js",[PI]:"fire-js-all"};const fd=new Map,jI=new Map,Up=new Map;function R2(i,e){try{i.container.addComponent(e)}catch(t){er.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function xl(i){const e=i.name;if(Up.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Up.set(e,i);for(const t of fd.values())R2(t,i);for(const t of jI.values())R2(t,i);return!0}function I1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function $a(i){return i==null?!1:i.settings!==void 0}const UI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new $c("app","Firebase",UI);class HI{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}const tu=LI;function eT(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const a={name:jp,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw as.create("bad-app-name",{appName:String(s)});if(t||(t=qS()),!t)throw as.create("no-options");const l=fd.get(s);if(l){if(lo(t,l.options)&&lo(a,l.config))return l;throw as.create("duplicate-app",{appName:s})}const c=new Q5(s);for(const m of Up.values())c.addComponent(m);const d=new HI(t,a,c);return fd.set(s,d),d}function FI(i=jp){const e=fd.get(i);if(!e&&i===jp&&qS())return eT();if(!e)throw as.create("no-app",{appName:i});return e}function is(i,e,t){let a=BI[i]??i;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(c.join(" "));return}xl(new uo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const YI="firebase-heartbeat-database",qI=1,kc="firebase-heartbeat-store";let yp=null;function tT(){return yp||(yp=oI(YI,qI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(kc)}catch(t){console.warn(t)}}}}).catch(i=>{throw as.create("idb-open",{originalErrorMessage:i.message})})),yp}async function GI(i){try{const t=(await tT()).transaction(kc),a=await t.objectStore(kc).get(nT(i));return await t.done,a}catch(e){if(e instanceof ir)er.warn(e.message);else{const t=as.create("idb-get",{originalErrorMessage:e?.message});er.warn(t.message)}}}async function C2(i,e){try{const a=(await tT()).transaction(kc,"readwrite");await a.objectStore(kc).put(e,nT(i)),await a.done}catch(t){if(t instanceof ir)er.warn(t.message);else{const a=as.create("idb-set",{originalErrorMessage:t?.message});er.warn(a.message)}}}function nT(i){return`${i.name}!${i.options.appId}`}const KI=1024,QI=30;class JI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XI(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=N2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>QI){const s=WI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=N2(),{heartbeatsToSend:t,unsentEntries:a}=$I(this._heartbeatsCache.heartbeats),s=HS(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return er.warn(e),""}}}function N2(){return new Date().toISOString().substring(0,10)}function $I(i,e=KI){const t=[];let a=i.slice();for(const s of i){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),M2(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),M2(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class XI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XS()?x5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return C2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return C2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function M2(i){return HS(JSON.stringify({version:2,heartbeats:i})).length}function WI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let a=1;a<i.length;a++)i[a].date<t&&(t=i[a].date,e=a);return e}function ZI(i){xl(new uo("platform-logger",e=>new cI(e),"PRIVATE")),xl(new uo("heartbeat",e=>new JI(e),"PRIVATE")),is(Bp,z2,i),is(Bp,z2,"esm2020"),is("fire-js","")}ZI("");var eD="firebase",tD="12.7.0";is(eD,tD,"app");var x2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rs,aT;(function(){var i;function e(A,I){function z(){}z.prototype=I.prototype,A.F=I.prototype,A.prototype=new z,A.prototype.constructor=A,A.D=function(C,N,O){for(var R=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)R[xe-2]=arguments[xe];return I.prototype[N].apply(C,R)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,I,z){z||(z=0);const C=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)C[N]=I.charCodeAt(z++)|I.charCodeAt(z++)<<8|I.charCodeAt(z++)<<16|I.charCodeAt(z++)<<24;else for(N=0;N<16;++N)C[N]=I[z++]|I[z++]<<8|I[z++]<<16|I[z++]<<24;I=A.g[0],z=A.g[1],N=A.g[2];let O=A.g[3],R;R=I+(O^z&(N^O))+C[0]+3614090360&4294967295,I=z+(R<<7&4294967295|R>>>25),R=O+(N^I&(z^N))+C[1]+3905402710&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(z^O&(I^z))+C[2]+606105819&4294967295,N=O+(R<<17&4294967295|R>>>15),R=z+(I^N&(O^I))+C[3]+3250441966&4294967295,z=N+(R<<22&4294967295|R>>>10),R=I+(O^z&(N^O))+C[4]+4118548399&4294967295,I=z+(R<<7&4294967295|R>>>25),R=O+(N^I&(z^N))+C[5]+1200080426&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(z^O&(I^z))+C[6]+2821735955&4294967295,N=O+(R<<17&4294967295|R>>>15),R=z+(I^N&(O^I))+C[7]+4249261313&4294967295,z=N+(R<<22&4294967295|R>>>10),R=I+(O^z&(N^O))+C[8]+1770035416&4294967295,I=z+(R<<7&4294967295|R>>>25),R=O+(N^I&(z^N))+C[9]+2336552879&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(z^O&(I^z))+C[10]+4294925233&4294967295,N=O+(R<<17&4294967295|R>>>15),R=z+(I^N&(O^I))+C[11]+2304563134&4294967295,z=N+(R<<22&4294967295|R>>>10),R=I+(O^z&(N^O))+C[12]+1804603682&4294967295,I=z+(R<<7&4294967295|R>>>25),R=O+(N^I&(z^N))+C[13]+4254626195&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(z^O&(I^z))+C[14]+2792965006&4294967295,N=O+(R<<17&4294967295|R>>>15),R=z+(I^N&(O^I))+C[15]+1236535329&4294967295,z=N+(R<<22&4294967295|R>>>10),R=I+(N^O&(z^N))+C[1]+4129170786&4294967295,I=z+(R<<5&4294967295|R>>>27),R=O+(z^N&(I^z))+C[6]+3225465664&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^z&(O^I))+C[11]+643717713&4294967295,N=O+(R<<14&4294967295|R>>>18),R=z+(O^I&(N^O))+C[0]+3921069994&4294967295,z=N+(R<<20&4294967295|R>>>12),R=I+(N^O&(z^N))+C[5]+3593408605&4294967295,I=z+(R<<5&4294967295|R>>>27),R=O+(z^N&(I^z))+C[10]+38016083&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^z&(O^I))+C[15]+3634488961&4294967295,N=O+(R<<14&4294967295|R>>>18),R=z+(O^I&(N^O))+C[4]+3889429448&4294967295,z=N+(R<<20&4294967295|R>>>12),R=I+(N^O&(z^N))+C[9]+568446438&4294967295,I=z+(R<<5&4294967295|R>>>27),R=O+(z^N&(I^z))+C[14]+3275163606&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^z&(O^I))+C[3]+4107603335&4294967295,N=O+(R<<14&4294967295|R>>>18),R=z+(O^I&(N^O))+C[8]+1163531501&4294967295,z=N+(R<<20&4294967295|R>>>12),R=I+(N^O&(z^N))+C[13]+2850285829&4294967295,I=z+(R<<5&4294967295|R>>>27),R=O+(z^N&(I^z))+C[2]+4243563512&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^z&(O^I))+C[7]+1735328473&4294967295,N=O+(R<<14&4294967295|R>>>18),R=z+(O^I&(N^O))+C[12]+2368359562&4294967295,z=N+(R<<20&4294967295|R>>>12),R=I+(z^N^O)+C[5]+4294588738&4294967295,I=z+(R<<4&4294967295|R>>>28),R=O+(I^z^N)+C[8]+2272392833&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^z)+C[11]+1839030562&4294967295,N=O+(R<<16&4294967295|R>>>16),R=z+(N^O^I)+C[14]+4259657740&4294967295,z=N+(R<<23&4294967295|R>>>9),R=I+(z^N^O)+C[1]+2763975236&4294967295,I=z+(R<<4&4294967295|R>>>28),R=O+(I^z^N)+C[4]+1272893353&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^z)+C[7]+4139469664&4294967295,N=O+(R<<16&4294967295|R>>>16),R=z+(N^O^I)+C[10]+3200236656&4294967295,z=N+(R<<23&4294967295|R>>>9),R=I+(z^N^O)+C[13]+681279174&4294967295,I=z+(R<<4&4294967295|R>>>28),R=O+(I^z^N)+C[0]+3936430074&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^z)+C[3]+3572445317&4294967295,N=O+(R<<16&4294967295|R>>>16),R=z+(N^O^I)+C[6]+76029189&4294967295,z=N+(R<<23&4294967295|R>>>9),R=I+(z^N^O)+C[9]+3654602809&4294967295,I=z+(R<<4&4294967295|R>>>28),R=O+(I^z^N)+C[12]+3873151461&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^z)+C[15]+530742520&4294967295,N=O+(R<<16&4294967295|R>>>16),R=z+(N^O^I)+C[2]+3299628645&4294967295,z=N+(R<<23&4294967295|R>>>9),R=I+(N^(z|~O))+C[0]+4096336452&4294967295,I=z+(R<<6&4294967295|R>>>26),R=O+(z^(I|~N))+C[7]+1126891415&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~z))+C[14]+2878612391&4294967295,N=O+(R<<15&4294967295|R>>>17),R=z+(O^(N|~I))+C[5]+4237533241&4294967295,z=N+(R<<21&4294967295|R>>>11),R=I+(N^(z|~O))+C[12]+1700485571&4294967295,I=z+(R<<6&4294967295|R>>>26),R=O+(z^(I|~N))+C[3]+2399980690&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~z))+C[10]+4293915773&4294967295,N=O+(R<<15&4294967295|R>>>17),R=z+(O^(N|~I))+C[1]+2240044497&4294967295,z=N+(R<<21&4294967295|R>>>11),R=I+(N^(z|~O))+C[8]+1873313359&4294967295,I=z+(R<<6&4294967295|R>>>26),R=O+(z^(I|~N))+C[15]+4264355552&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~z))+C[6]+2734768916&4294967295,N=O+(R<<15&4294967295|R>>>17),R=z+(O^(N|~I))+C[13]+1309151649&4294967295,z=N+(R<<21&4294967295|R>>>11),R=I+(N^(z|~O))+C[4]+4149444226&4294967295,I=z+(R<<6&4294967295|R>>>26),R=O+(z^(I|~N))+C[11]+3174756917&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~z))+C[2]+718787259&4294967295,N=O+(R<<15&4294967295|R>>>17),R=z+(O^(N|~I))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+O&4294967295}a.prototype.v=function(A,I){I===void 0&&(I=A.length);const z=I-this.blockSize,C=this.C;let N=this.h,O=0;for(;O<I;){if(N==0)for(;O<=z;)s(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<I;)if(C[N++]=A.charCodeAt(O++),N==this.blockSize){s(this,C),N=0;break}}else for(;O<I;)if(C[N++]=A[O++],N==this.blockSize){s(this,C),N=0;break}}this.h=N,this.o+=I},a.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;I=this.o*8;for(var z=A.length-8;z<A.length;++z)A[z]=I&255,I/=256;for(this.v(A),A=Array(16),I=0,z=0;z<4;++z)for(let C=0;C<32;C+=8)A[I++]=this.g[z]>>>C&255;return A};function l(A,I){var z=d;return Object.prototype.hasOwnProperty.call(z,A)?z[A]:z[A]=I(A)}function c(A,I){this.h=I;const z=[];let C=!0;for(let N=A.length-1;N>=0;N--){const O=A[N]|0;C&&O==I||(z[N]=O,C=!1)}this.g=z}var d={};function m(A){return-128<=A&&A<128?l(A,function(I){return new c([I|0],I<0?-1:0)}):new c([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return S;if(A<0)return $(p(-A));const I=[];let z=1;for(let C=0;A>=z;C++)I[C]=A/z|0,z*=4294967296;return new c(I,0)}function v(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return $(v(A.substring(1),I));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const z=p(Math.pow(I,8));let C=S;for(let O=0;O<A.length;O+=8){var N=Math.min(8,A.length-O);const R=parseInt(A.substring(O,O+N),I);N<8?(N=p(Math.pow(I,N)),C=C.j(N).add(p(R))):(C=C.j(z),C=C.add(p(R)))}return C}var S=m(0),D=m(1),k=m(16777216);i=c.prototype,i.m=function(){if(q(this))return-$(this).m();let A=0,I=1;for(let z=0;z<this.g.length;z++){const C=this.i(z);A+=(C>=0?C:4294967296+C)*I,I*=4294967296}return A},i.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(H(this))return"0";if(q(this))return"-"+$(this).toString(A);const I=p(Math.pow(A,6));var z=this;let C="";for(;;){const N=fe(z,I).g;z=W(z,N.j(I));let O=((z.g.length>0?z.g[0]:z.h)>>>0).toString(A);if(z=N,H(z))return O+C;for(;O.length<6;)O="0"+O;C=O+C}},i.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function H(A){if(A.h!=0)return!1;for(let I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function q(A){return A.h==-1}i.l=function(A){return A=W(this,A),q(A)?-1:H(A)?0:1};function $(A){const I=A.g.length,z=[];for(let C=0;C<I;C++)z[C]=~A.g[C];return new c(z,~A.h).add(D)}i.abs=function(){return q(this)?$(this):this},i.add=function(A){const I=Math.max(this.g.length,A.g.length),z=[];let C=0;for(let N=0;N<=I;N++){let O=C+(this.i(N)&65535)+(A.i(N)&65535),R=(O>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);C=R>>>16,O&=65535,R&=65535,z[N]=R<<16|O}return new c(z,z[z.length-1]&-2147483648?-1:0)};function W(A,I){return A.add($(I))}i.j=function(A){if(H(this)||H(A))return S;if(q(this))return q(A)?$(this).j($(A)):$($(this).j(A));if(q(A))return $(this.j($(A)));if(this.l(k)<0&&A.l(k)<0)return p(this.m()*A.m());const I=this.g.length+A.g.length,z=[];for(var C=0;C<2*I;C++)z[C]=0;for(C=0;C<this.g.length;C++)for(let N=0;N<A.g.length;N++){const O=this.i(C)>>>16,R=this.i(C)&65535,xe=A.i(N)>>>16,We=A.i(N)&65535;z[2*C+2*N]+=R*We,le(z,2*C+2*N),z[2*C+2*N+1]+=O*We,le(z,2*C+2*N+1),z[2*C+2*N+1]+=R*xe,le(z,2*C+2*N+1),z[2*C+2*N+2]+=O*xe,le(z,2*C+2*N+2)}for(A=0;A<I;A++)z[A]=z[2*A+1]<<16|z[2*A];for(A=I;A<2*I;A++)z[A]=0;return new c(z,0)};function le(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function Q(A,I){this.g=A,this.h=I}function fe(A,I){if(H(I))throw Error("division by zero");if(H(A))return new Q(S,S);if(q(A))return I=fe($(A),I),new Q($(I.g),$(I.h));if(q(I))return I=fe(A,$(I)),new Q($(I.g),I.h);if(A.g.length>30){if(q(A)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var z=D,C=I;C.l(A)<=0;)z=he(z),C=he(C);var N=ne(z,1),O=ne(C,1);for(C=ne(C,2),z=ne(z,2);!H(C);){var R=O.add(C);R.l(A)<=0&&(N=N.add(z),O=R),C=ne(C,1),z=ne(z,1)}return I=W(A,N.j(I)),new Q(N,I)}for(N=S;A.l(I)>=0;){for(z=Math.max(1,Math.floor(A.m()/I.m())),C=Math.ceil(Math.log(z)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),O=p(z),R=O.j(I);q(R)||R.l(A)>0;)z-=C,O=p(z),R=O.j(I);H(O)&&(O=D),N=N.add(O),A=W(A,R)}return new Q(N,A)}i.B=function(A){return fe(this,A).h},i.and=function(A){const I=Math.max(this.g.length,A.g.length),z=[];for(let C=0;C<I;C++)z[C]=this.i(C)&A.i(C);return new c(z,this.h&A.h)},i.or=function(A){const I=Math.max(this.g.length,A.g.length),z=[];for(let C=0;C<I;C++)z[C]=this.i(C)|A.i(C);return new c(z,this.h|A.h)},i.xor=function(A){const I=Math.max(this.g.length,A.g.length),z=[];for(let C=0;C<I;C++)z[C]=this.i(C)^A.i(C);return new c(z,this.h^A.h)};function he(A){const I=A.g.length+1,z=[];for(let C=0;C<I;C++)z[C]=A.i(C)<<1|A.i(C-1)>>>31;return new c(z,A.h)}function ne(A,I){const z=I>>5;I%=32;const C=A.g.length-z,N=[];for(let O=0;O<C;O++)N[O]=I>0?A.i(O+z)>>>I|A.i(O+z+1)<<32-I:A.i(O+z);return new c(N,A.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,aT=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,rs=c}).apply(typeof x2<"u"?x2:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var iT,dc,rT,Yf,Hp,sT,oT,lT;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=t(this);function s(h,y){if(y)e:{var b=a;h=h.split(".");for(var w=0;w<h.length-1;w++){var U=h[w];if(!(U in b))break e;b=b[U]}h=h[h.length-1],w=b[h],y=y(w),y!=w&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(y){var b=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&b.push([w,y[w]]);return b}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,b){return h.call.apply(h.bind,arguments)}function p(h,y,b){return p=m,p.apply(null,arguments)}function v(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function S(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(w,U,K){for(var ge=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ge[Ke-2]=arguments[Ke];return y.prototype[U].apply(w,ge)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const y=h.length;if(y>0){const b=Array(y);for(let w=0;w<y;w++)b[w]=h[w];return b}return[]}function H(h,y){for(let w=1;w<arguments.length;w++){const U=arguments[w];var b=typeof U;if(b=b!="object"?b:U?Array.isArray(U)?"array":b:"null",b=="array"||b=="object"&&typeof U.length=="number"){b=h.length||0;const K=U.length||0;h.length=b+K;for(let ge=0;ge<K;ge++)h[b+ge]=U[ge]}else h.push(U)}}class q{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(h){c.setTimeout(()=>{throw h},0)}function W(){var h=A;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class le{constructor(){this.h=this.g=null}add(y,b){const w=Q.get();w.set(y,b),this.h?this.h.next=w:this.g=w,this.h=w}}var Q=new q(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ne=!1,A=new le,I=()=>{const h=Promise.resolve(void 0);he=()=>{h.then(z)}};function z(){for(var h;h=W();){try{h.h.call(h.g)}catch(b){$(b)}var y=Q;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ne=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,y),c.removeEventListener("test",b,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function xe(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}S(xe,N),xe.prototype.init=function(h,y){const b=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),L=0;function re(h,y,b,w,U){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!w,this.ha=U,this.key=++L,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function je(h,y,b){for(const w in h)y.call(b,h[w],w,h)}function Ee(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function M(h){const y={};for(const b in h)y[b]=h[b];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let b,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(b in w)h[b]=w[b];for(let K=0;K<Z.length;K++)b=Z[K],Object.prototype.hasOwnProperty.call(w,b)&&(h[b]=w[b])}}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,y,b,w,U){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const ge=Ne(h,y,w,U);return ge>-1?(y=h[ge],b||(y.fa=!1)):(y=new re(y,this.src,K,!!w,U),y.fa=b,h.push(y)),y};function Ve(h,y){const b=y.type;if(b in h.g){var w=h.g[b],U=Array.prototype.indexOf.call(w,y,void 0),K;(K=U>=0)&&Array.prototype.splice.call(w,U,1),K&&(de(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ne(h,y,b,w){for(let U=0;U<h.length;++U){const K=h[U];if(!K.da&&K.listener==y&&K.capture==!!b&&K.ha==w)return U}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),Lt={};function Dt(h,y,b,w,U){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Dt(h,y[K],b,w,U);return null}return b=ya(b),h&&h[We]?h.J(y,b,d(w)?!!w.capture:!1,U):Oa(h,y,b,!1,w,U)}function Oa(h,y,b,w,U,K){if(!y)throw Error("Invalid event type");const ge=d(U)?!!U.capture:!!U;let Ke=Va(h);if(Ke||(h[Ye]=Ke=new ye(h)),b=Ke.add(y,b,w,ge,K),b.proxy)return b;if(w=wi(),b.proxy=w,w.src=h,w.listener=b,h.addEventListener)O||(U=ge),U===void 0&&(U=!1),h.addEventListener(y.toString(),w,U);else if(h.attachEvent)h.attachEvent(Un(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function wi(){function h(b){return y.call(h.src,h.listener,b)}const y=or;return h}function Wa(h,y,b,w,U){if(Array.isArray(y))for(var K=0;K<y.length;K++)Wa(h,y[K],b,w,U);else w=d(w)?!!w.capture:!!w,b=ya(b),h&&h[We]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],b=Ne(y,b,w,U),b>-1&&(de(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=Va(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ne(y,b,w,U)),(b=h>-1?y[h]:null)&&Ii(b))}function Ii(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[We])Ve(y.i,h);else{var b=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(b,w,h.capture):y.detachEvent?y.detachEvent(Un(b),w):y.addListener&&y.removeListener&&y.removeListener(w),(b=Va(y))?(Ve(b,h),b.h==0&&(b.src=null,y[Ye]=null)):de(h)}}}function Un(h){return h in Lt?Lt[h]:Lt[h]="on"+h}function or(h,y){if(h.da)h=!0;else{y=new xe(y,this);const b=h.listener,w=h.ha||h.src;h.fa&&Ii(h),h=b.call(w,y)}return h}function Va(h){return h=h[Ye],h instanceof ye?h:null}var Di="__closure_events_fn_"+(Math.random()*1e9>>>0);function ya(h){return typeof h=="function"?h:(h[Di]||(h[Di]=function(y){return h.handleEvent(y)}),h[Di])}function xt(){C.call(this),this.i=new ye(this),this.M=this,this.G=null}S(xt,C),xt.prototype[We]=!0,xt.prototype.removeEventListener=function(h,y,b,w){Wa(this,h,y,b,w)};function Bt(h,y){var b,w=h.G;if(w)for(b=[];w;w=w.G)b.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var U=y;y=new N(w,h),ue(y,U)}U=!0;let K,ge;if(b)for(ge=b.length-1;ge>=0;ge--)K=y.g=b[ge],U=Za(K,w,!0,y)&&U;if(K=y.g=h,U=Za(K,w,!0,y)&&U,U=Za(K,w,!1,y)&&U,b)for(ge=0;ge<b.length;ge++)K=y.g=b[ge],U=Za(K,w,!1,y)&&U}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let w=0;w<b.length;w++)de(b[w]);delete h.g[y],h.h--}}this.G=null},xt.prototype.J=function(h,y,b,w){return this.i.add(String(h),y,!1,b,w)},xt.prototype.K=function(h,y,b,w){return this.i.add(String(h),y,!0,b,w)};function Za(h,y,b,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let K=0;K<y.length;++K){const ge=y[K];if(ge&&!ge.da&&ge.capture==b){const Ke=ge.listener,$t=ge.ha||ge.src;ge.fa&&Ve(h.i,ge),U=Ke.call($t,w)!==!1&&U}}return U&&!w.defaultPrevented}function lr(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ys(h){h.g=lr(()=>{h.g=null,h.i&&(h.i=!1,ys(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Kt extends C{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ys(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(h){C.call(this),this.h=h,this.g={}}S(ei,C);var ur=[];function cr(h){je(h.g,function(y,b){this.g.hasOwnProperty(b)&&Ii(y)},h),h.g={}}ei.prototype.N=function(){ei.Z.N.call(this),cr(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pa=c.JSON.stringify,To=c.JSON.parse,_s=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function vs(){}function bs(){}var ta={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){N.call(this,"d")}S(tn,N);function Hn(){N.call(this,"c")}S(Hn,N);var kt={},lu=null;function hr(){return lu=lu||new xt}kt.Ia="serverreachability";function fr(h){N.call(this,kt.Ia,h)}S(fr,N);function na(h){const y=hr();Bt(y,new fr(y))}kt.STAT_EVENT="statevent";function _a(h,y){N.call(this,kt.STAT_EVENT,h),this.stat=y}S(_a,N);function Ht(h){const y=hr();Bt(y,new _a(y,h))}kt.Ja="timingevent";function Fn(h,y){N.call(this,kt.Ja,h),this.size=y}S(Fn,N);function Yn(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function Eo(h,y,b,w,U,K){h.info(function(){if(h.g)if(K){var ge="",Ke=K.split("&");for(let ft=0;ft<Ke.length;ft++){var $t=Ke[ft].split("=");if($t.length>1){const Ot=$t[0];$t=$t[1];const Aa=Ot.split("_");ge=Aa.length>=2&&Aa[1]=="type"?ge+(Ot+"="+$t+"&"):ge+(Ot+"=redacted&")}}}else ge=null;else ge=K;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+y+`
`+b+`
`+ge})}function Ao(h,y,b,w,U,K,ge){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+y+`
`+b+`
`+K+" "+ge})}function va(h,y,b,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ss(h,b)+(w?" "+w:"")})}function ba(h,y){h.info(function(){return"TIMEOUT: "+y})}zn.prototype.info=function(){};function Ss(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var b=K[h];if(!(b.length<2)){var w=b[1];if(Array.isArray(w)&&!(w.length<1)){var U=w[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ge=1;ge<w.length;ge++)w[ge]=""}}}}return Pa(K)}catch{return y}}var aa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},La={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ts;function zi(){}S(zi,vs),zi.prototype.g=function(){return new XMLHttpRequest},Ts=new zi;function Ba(h){return encodeURIComponent(String(h))}function wo(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function Vn(h,y,b,w){this.j=h,this.i=y,this.l=b,this.S=w||1,this.V=new ei(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pn}function Pn(){this.i=null,this.g="",this.h=!1}var Ft={},Qt={};function Sa(h,y,b){h.M=1,h.A=Es(nn(y)),h.u=b,h.R=!0,dr(h,null)}function dr(h,y){h.F=Date.now(),X(h),h.B=nn(h.A);var b=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Co(b.i,"t",w),h.C=0,b=h.j.L,h.h=new Pn,h.g=Ah(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Kt(p(h.Y,h,h.g),h.P)),y=h.V,b=h.g,w=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(ur[0]=U.toString()),U=ur);for(let K=0;K<U.length;K++){const ge=Dt(b,U[K],w||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),na(),Eo(h.i,h.v,h.B,h.l,h.S,h.u)}Vn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Ha(h)==3?y.j():this.Y(h)},Vn.prototype.Y=function(h){try{if(h==this.g)e:{const Ke=Ha(this.g),$t=this.g.ya(),ft=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||Sn(this.g)))){this.K||Ke!=4||$t==7||($t==8||ft<=0?na(3):na(2)),ce(this);var y=this.g.ca();this.X=y;var b=uu(this);if(this.o=y==200,Ao(this.i,this.v,this.B,this.l,this.S,Ke,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,U=this.g;if((w=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(w)){var K=w;break t}}K=null}if(h=K)va(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,h);else{this.o=!1,this.m=3,Ht(12),Se(this),Me(this);break e}}if(this.R){h=!0;let Ot;for(;!this.K&&this.C<b.length;)if(Ot=Do(this,b),Ot==Qt){Ke==4&&(this.m=4,Ht(14),h=!1),va(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Ft){this.m=4,Ht(15),va(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else va(this.i,this.l,Ot,null),qe(this,Ot);if(Io(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||b.length!=0||this.h.h||(this.m=1,Ht(16),h=!1),this.o=this.o&&h,!h)va(this.i,this.l,b,"[Invalid Chunked Response]"),Se(this),Me(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),vu(ge),ge.P=!0,Ht(11))}}else va(this.i,this.l,b,null),qe(this,b);Ke==4&&Se(this),this.o&&!this.K&&(Ke==4?bh(this.j,this):(this.o=!1,X(this)))}else Ni(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),Se(this),Me(this)}}}catch{}};function uu(h){if(!Io(h))return h.g.la();const y=Sn(h.g);if(y==="")return"";let b="";const w=y.length,U=Ha(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Se(h),Me(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<w;K++)h.h.h=!0,b+=h.h.i.decode(y[K],{stream:!(U&&K==w-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Io(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Do(h,y){var b=h.C,w=y.indexOf(`
`,b);return w==-1?Qt:(b=Number(y.substring(b,w)),isNaN(b)?Ft:(w+=1,w+b>y.length?Qt:(y=y.slice(w,w+b),h.C=w+b,y)))}Vn.prototype.cancel=function(){this.K=!0,Se(this)};function X(h){h.T=Date.now()+h.H,be(h,h.H)}function be(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Yn(p(h.aa,h),y)}function ce(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Vn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ba(this.i,this.B),this.M!=2&&(na(),Ht(17)),Se(this),this.m=2,Me(this)):be(this,this.T-h)};function Me(h){h.j.I==0||h.K||bh(h.j,h)}function Se(h){ce(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,cr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function qe(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||rt(b.h,h))){if(!h.L&&rt(b.h,h)&&b.I==3){try{var w=b.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Oo(b),Sr(b);else break e;Cs(b),Ht(18)}}else b.xa=U[1],0<b.xa-b.K&&U[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Yn(p(b.Va,b),6e3));Tt(b.h)<=1&&b.ta&&(b.ta=void 0)}else si(b,11)}else if((h.L||b.g==h)&&Oo(b),!R(y))for(U=b.Ba.g.parse(y),y=0;y<U.length;y++){let ft=U[y];const Ot=ft[0];if(!(Ot<=b.K))if(b.K=Ot,ft=ft[1],b.I==2)if(ft[0]=="c"){b.M=ft[1],b.ba=ft[2];const Aa=ft[3];Aa!=null&&(b.ka=Aa,b.j.info("VER="+b.ka));const oi=ft[4];oi!=null&&(b.za=oi,b.j.info("SVER="+b.za));const Fa=ft[5];Fa!=null&&typeof Fa=="number"&&Fa>0&&(w=1.5*Fa,b.O=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const Ya=h.g;if(Ya){const Ns=Ya.g?Ya.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ns){var K=w.h;K.g||Ns.indexOf("spdy")==-1&&Ns.indexOf("quic")==-1&&Ns.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ht(K,K.h),K.h=null))}if(w.G){const Vo=Ya.g?Ya.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(w.wa=Vo,pt(w.J,w.G,Vo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),w=b;var ge=h;if(w.na=Eh(w,w.L?w.ba:null,w.W),ge.L){Jt(w.h,ge);var Ke=ge,$t=w.O;$t&&(Ke.H=$t),Ke.D&&(ce(Ke),X(Ke)),w.g=ge}else _h(w);b.i.length>0&&ri(b)}else ft[0]!="stop"&&ft[0]!="close"||si(b,7);else b.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?si(b,7):yu(b):ft[0]!="noop"&&b.l&&b.l.qa(ft),b.A=0)}}na(4)}catch{}}var ot=class{constructor(h,y){this.g=h,this.map=y}};function gt(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jt(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Tt(h){return h.h?1:h.g?h.g.size:0}function rt(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ht(h,y){h.g?h.g.add(y):h.h=y}function Jt(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}gt.prototype.cancel=function(){if(this.i=Ri(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ri(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return k(h.i)}var fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zo(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const w=h[b].indexOf("=");let U,K=null;w>=0?(U=h[b].substring(0,w),K=h[b].substring(w+1)):U=h[b],y(U,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ia(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ia?(this.l=h.l,yn(this,h.j),this.o=h.o,this.g=h.g,mr(this,h.u),this.h=h.h,cu(this,ph(h.i)),this.m=h.m):h&&(y=String(h).match(fh))?(this.l=!1,yn(this,y[1]||"",!0),this.o=ti(y[2]||""),this.g=ti(y[3]||"",!0),mr(this,y[4]),this.h=ti(y[5]||"",!0),cu(this,y[6]||"",!0),this.m=ti(y[7]||"")):(this.l=!1,this.i=new pr(null,this.l))}ia.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(As(y,Ro,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(As(y,Ro,!0),"@"),h.push(Ba(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(As(b,b.charAt(0)=="/"?hu:dh,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",As(b,mh)),h.join("")},ia.prototype.resolve=function(h){const y=nn(this);let b=!!h.j;b?yn(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var w=h.h;if(b)mr(y,h.u);else if(b=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var U=y.h.lastIndexOf("/");U!=-1&&(w=y.h.slice(0,U+1)+w)}if(U=w,U==".."||U==".")w="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){w=U.lastIndexOf("/",0)==0,U=U.split("/");const K=[];for(let ge=0;ge<U.length;){const Ke=U[ge++];Ke=="."?w&&ge==U.length&&K.push(""):Ke==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&ge==U.length&&K.push("")):(K.push(Ke),w=!0)}w=K.join("/")}else w=U}return b?y.h=w:b=h.i.toString()!=="",b?cu(y,ph(h.i)):b=!!h.m,b&&(y.m=h.m),y};function nn(h){return new ia(h)}function yn(h,y,b){h.j=b?ti(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function mr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function cu(h,y,b){y instanceof pr?(h.i=y,No(h.i,h.l)):(b||(y=As(y,gr)),h.i=new pr(y,h.l))}function pt(h,y,b){h.i.set(y,b)}function Es(h){return pt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ti(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function As(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,qn),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ro=/[#\/\?@]/g,dh=/[#\?:]/g,hu=/[#\?]/g,gr=/[#\?@]/g,mh=/#/g;function pr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Gn(h){h.g||(h.g=new Map,h.h=0,h.i&&zo(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=pr.prototype,i.add=function(h,y){Gn(this),this.i=null,h=yr(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function gh(h,y){Gn(h),y=yr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function fu(h,y){return Gn(h),y=yr(h,y),h.g.has(y)}i.forEach=function(h,y){Gn(this),this.g.forEach(function(b,w){b.forEach(function(U){h.call(y,U,w,this)},this)},this)};function du(h,y){Gn(h);let b=[];if(typeof y=="string")fu(h,y)&&(b=b.concat(h.g.get(yr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}i.set=function(h,y){return Gn(this),this.i=null,h=yr(this,h),fu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=du(this,h),h.length>0?String(h[0]):y):y};function Co(h,y,b){gh(h,y),b.length>0&&(h.i=null,h.g.set(yr(h,y),k(b)),h.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var b=y[w];const U=Ba(b);b=du(this,b);for(let K=0;K<b.length;K++){let ge=U;b[K]!==""&&(ge+="="+Ba(b[K])),h.push(ge)}}return this.i=h.join("&")};function ph(h){const y=new pr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function yr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function No(h,y){y&&!h.j&&(Gn(h),h.i=null,h.g.forEach(function(b,w){const U=w.toLowerCase();w!=U&&(gh(this,w),Co(this,U,b))},h)),h.j=y}function ja(h,y){const b=new zn;if(c.Image){const w=new Image;w.onload=v(Ta,b,"TestLoadImage: loaded",!0,y,w),w.onerror=v(Ta,b,"TestLoadImage: error",!1,y,w),w.onabort=v(Ta,b,"TestLoadImage: abort",!1,y,w),w.ontimeout=v(Ta,b,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function mu(h,y){const b=new zn,w=new AbortController,U=setTimeout(()=>{w.abort(),Ta(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(K=>{clearTimeout(U),K.ok?Ta(b,"TestPingServer: ok",!0,y):Ta(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Ta(b,"TestPingServer: error",!1,y)})}function Ta(h,y,b,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(b)}catch{}}function _r(){this.g=new _s}function ni(h){this.i=h.Sb||null,this.h=h.ab||!1}S(ni,vs),ni.prototype.g=function(){return new ws(this.i,this.h)};function ws(h,y){xt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(ws,xt),i=ws.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Ua(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?vr(this):Ua(this),this.readyState==3&&Mo(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,vr(this))},i.Na=function(h){this.g&&(this.response=h,vr(this))},i.ga=function(){this.g&&vr(this)};function vr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ua(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function Ua(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ea(h){let y="";return je(h,function(b,w){y+=w,y+=":",y+=b,y+=`\r
`}),y}function Is(h,y,b){e:{for(w in b){var w=!1;break e}w=!0}w||(b=Ea(b),typeof h=="string"?b!=null&&Ba(b):pt(h,y,b))}function Et(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Et,xt);var ai=/^https?$/i,gu=["POST","PUT"];i=Et.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ts.g(),this.g.onreadystatechange=D(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){Ds(this,K);return}if(h=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)b.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())b.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),U=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(gu,y,void 0)>=0)||w||U||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ge]of b)this.g.setRequestHeader(K,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){Ds(this,K)}};function Ds(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,pu(h),Ci(h)}function pu(h){h.A||(h.A=!0,Bt(h,"complete"),Bt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Bt(this,"complete"),Bt(this,"abort"),Ci(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),Et.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?zs(this):this.Xa())},i.Xa=function(){zs(this)};function zs(h){if(h.h&&typeof l<"u"){if(h.v&&Ha(h)==4)setTimeout(h.Ca.bind(h),0);else if(Bt(h,"readystatechange"),Ha(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var w;if(w=K===0){let ge=String(h.D).match(fh)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),w=!ai.test(ge?ge.toLowerCase():"")}b=w}if(b)Bt(h,"complete"),Bt(h,"success");else{h.o=6;try{var U=Ha(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",pu(h)}}finally{Ci(h)}}}}function Ci(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||Bt(h,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ha(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Ha(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),To(y)}};function Sn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ni(h){const y={};h=(h.g&&Ha(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(R(h[w]))continue;var b=wo(h[w]);const U=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=y[U]||[];y[U]=K,K.push(b)}Ee(y,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ii(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function br(h){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ii("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ii("baseRetryDelayMs",5e3,h),this.Za=ii("retryDelaySeedMs",1e4,h),this.Ta=ii("forwardChannelMaxRetries",2,h),this.va=ii("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new gt(h&&h.concurrentRequestLimit),this.Ba=new _r,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=br.prototype,i.ka=8,i.I=1,i.connect=function(h,y,b,w){Ht(0),this.W=h,this.H=y||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.J=Eh(this,null,this.W),ri(this)};function yu(h){if(xo(h),h.I==3){var y=h.V++,b=nn(h.J);if(pt(b,"SID",h.M),pt(b,"RID",y),pt(b,"TYPE","terminate"),Rs(h,b),y=new Vn(h,h.j,y),y.M=2,y.A=Es(nn(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=y.A,b=!0),b||(y.g=Ah(y.j,null),y.g.ea(y.A)),y.F=Date.now(),X(y)}Th(h)}function Sr(h){h.g&&(vu(h),h.g.cancel(),h.g=null)}function xo(h){Sr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Oo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ri(h){if(!jt(h.h)&&!h.m){h.m=!0;var y=h.Ea;he||I(),ne||(he(),ne=!0),A.add(y,h),h.D=0}}function ko(h,y){return Tt(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Yn(p(h.Ea,h,y),Sh(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new Vn(this,this.j,h);let K=this.o;if(this.U&&(K?(K=M(K),ue(K,this.U)):K=this.U),this.u!==null||this.R||(U.J=K,K=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=yh(this,U,y),b=nn(this.J),pt(b,"RID",h),pt(b,"CVER",22),this.G&&pt(b,"X-HTTP-Session-Id",this.G),Rs(this,b),K&&(this.R?y="headers="+Ba(Ea(K))+"&"+y:this.u&&Is(b,this.u,K)),ht(this.h,U),this.Ra&&pt(b,"TYPE","init"),this.S?(pt(b,"$req",y),pt(b,"SID","null"),U.U=!0,Sa(U,b,null)):Sa(U,b,y),this.I=2}}else this.I==3&&(h?_u(this,h):this.i.length==0||jt(this.h)||_u(this))};function _u(h,y){var b;y?b=y.l:b=h.V++;const w=nn(h.J);pt(w,"SID",h.M),pt(w,"RID",b),pt(w,"AID",h.K),Rs(h,w),h.u&&h.o&&Is(w,h.u,h.o),b=new Vn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=yh(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ht(h.h,b),Sa(b,w,y)}function Rs(h,y){h.H&&je(h.H,function(b,w){pt(y,w,b)}),h.l&&je({},function(b,w){pt(y,w,b)})}function yh(h,y,b){b=Math.min(h.i.length,b);const w=h.l?p(h.l.Ka,h.l,h):null;e:{var U=h.i;let Ke=-1;for(;;){const $t=["count="+b];Ke==-1?b>0?(Ke=U[0].g,$t.push("ofs="+Ke)):Ke=0:$t.push("ofs="+Ke);let ft=!0;for(let Ot=0;Ot<b;Ot++){var K=U[Ot].g;const Aa=U[Ot].map;if(K-=Ke,K<0)Ke=Math.max(0,U[Ot].g-100),ft=!1;else try{K="req"+K+"_"||"";try{var ge=Aa instanceof Map?Aa:Object.entries(Aa);for(const[oi,Fa]of ge){let Ya=Fa;d(Fa)&&(Ya=Pa(Fa)),$t.push(K+oi+"="+encodeURIComponent(Ya))}}catch(oi){throw $t.push(K+"type="+encodeURIComponent("_badmap")),oi}}catch{w&&w(Aa)}}if(ft){ge=$t.join("&");break e}}ge=void 0}return h=h.i.splice(0,b),y.G=h,ge}function _h(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;he||I(),ne||(he(),ne=!0),A.add(y,h),h.A=0}}function Cs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Yn(p(h.Da,h),Sh(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,vh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Yn(p(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),Sr(this),vh(this))};function vu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function vh(h){h.g=new Vn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=nn(h.na);pt(y,"RID","rpc"),pt(y,"SID",h.M),pt(y,"AID",h.K),pt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&pt(y,"TO",h.ia),pt(y,"TYPE","xmlhttp"),Rs(h,y),h.u&&h.o&&Is(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Es(nn(y)),b.u=null,b.R=!0,dr(b,h)}i.Va=function(){this.C!=null&&(this.C=null,Sr(this),Cs(this),Ht(19))};function Oo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function bh(h,y){var b=null;if(h.g==y){Oo(h),vu(h),h.g=null;var w=2}else if(rt(h.h,y))b=y.G,Jt(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var U=h.D;w=hr(),Bt(w,new Fn(w,b)),ri(h)}else _h(h);else if(U=y.m,U==3||U==0&&y.X>0||!(w==1&&ko(h,y)||w==2&&Cs(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),U){case 1:si(h,5);break;case 4:si(h,10);break;case 3:si(h,6);break;default:si(h,2)}}}function Sh(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function si(h,y){if(h.j.info("Error code "+y),y==2){var b=p(h.bb,h),w=h.Ua;const U=!w;w=new ia(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||yn(w,"https"),Es(w),U?ja(w.toString(),b):mu(w.toString(),b)}else Ht(2);h.I=0,h.l&&h.l.pa(y),Th(h),xo(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Th(h){if(h.I=0,h.ja=[],h.l){const y=Ri(h.h);(y.length!=0||h.i.length!=0)&&(H(h.ja,y),H(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function Eh(h,y,b){var w=b instanceof ia?nn(b):new ia(b);if(w.g!="")y&&(w.g=y+"."+w.g),mr(w,w.u);else{var U=c.location;w=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const K=new ia(null);w&&yn(K,w),y&&(K.g=y),U&&mr(K,U),b&&(K.h=b),w=K}return b=h.G,y=h.wa,b&&y&&pt(w,b,y),pt(w,"VER",h.ka),Rs(h,w),w}function Ah(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Et(new ni({ab:b})):new Et(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function wh(){}i=wh.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Tr(){}Tr.prototype.g=function(h,y){return new Ln(h,y)};function Ln(h,y){xt.call(this),this.g=new br(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Mi(this)}S(Ln,xt),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){yu(this.g)},Ln.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Pa(h),h=b);y.i.push(new ot(y.Ya++,h)),y.I==3&&ri(y)},Ln.prototype.N=function(){this.g.l=null,delete this.j,yu(this.g),delete this.g,Ln.Z.N.call(this)};function Ih(h){tn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}S(Ih,tn);function Dh(){Hn.call(this),this.status=1}S(Dh,Hn);function Mi(h){this.g=h}S(Mi,wh),Mi.prototype.ra=function(){Bt(this.g,"a")},Mi.prototype.qa=function(h){Bt(this.g,new Ih(h))},Mi.prototype.pa=function(h){Bt(this.g,new Dh)},Mi.prototype.oa=function(){Bt(this.g,"b")},Tr.prototype.createWebChannel=Tr.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,lT=function(){return new Tr},oT=function(){return hr()},sT=kt,Hp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},aa.NO_ERROR=0,aa.TIMEOUT=8,aa.HTTP_ERROR=6,Yf=aa,La.COMPLETE="complete",rT=La,bs.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",xt.prototype.listen=xt.prototype.J,dc=bs,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa,iT=Et}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});const k2="@firebase/firestore",O2="4.9.3";class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let nu="12.7.0";const co=new A1("@firebase/firestore");function bl(){return co.logLevel}function oe(i,...e){if(co.logLevel<=at.DEBUG){const t=e.map(D1);co.debug(`Firestore (${nu}): ${i}`,...t)}}function Zt(i,...e){if(co.logLevel<=at.ERROR){const t=e.map(D1);co.error(`Firestore (${nu}): ${i}`,...t)}}function Oc(i,...e){if(co.logLevel<=at.WARN){const t=e.map(D1);co.warn(`Firestore (${nu}): ${i}`,...t)}}function D1(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ae(i,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,uT(i,a,t)}function uT(i,e,t){let a=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Zt(a),new Error(a)}function Ce(i,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,i||uT(e,s,a)}function De(i,e){return i}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class nD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class iD{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let a=this.i;const s=m=>this.i!==a?(a=this.i,t(m)):Promise.resolve();let l=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},d=m=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Ce(typeof a.accessToken=="string",31837,{l:a}),new nD(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class rD{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sD{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new rD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class V2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$a(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const a=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new V2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new V2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lD(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}class z1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=lD(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function Fe(i,e){return i<e?-1:i>e?1:0}function Fp(i,e){const t=Math.min(i.length,e.length);for(let a=0;a<t;a++){const s=i.charAt(a),l=e.charAt(a);if(s!==l)return _p(s)===_p(l)?Fe(s,l):_p(s)?1:-1}return Fe(i.length,e.length)}const uD=55296,cD=57343;function _p(i){const e=i.charCodeAt(0);return e>=uD&&e<=cD}function kl(i,e,t){return i.length===e.length&&i.every(((a,s)=>t(a,e[s])))}function cT(i){return i+"\0"}const P2="__name__";class fi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ae(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=fi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const a=fi.isNumericId(e),s=fi.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?fi.extractNumericId(e).compare(fi.extractNumericId(t)):Fp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}}class mt extends fi{construct(e,t,a){return new mt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new me(te.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const hD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends fi{construct(e,t,a){return new Ut(e,t,a)}static isValidIdentifier(e){return hD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P2}static keyField(){return new Ut([P2])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new me(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=m,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new me(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class ve{constructor(e){this.path=e}static fromPath(e){return new ve(mt.fromString(e))}static fromName(e){return new ve(mt.fromString(e).popFirst(5))}static empty(){return new ve(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new mt(e.slice()))}}function hT(i,e,t){if(!t)throw new me(te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function fD(i,e,t,a){if(e===!0&&a===!0)throw new me(te.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function L2(i){if(!ve.isDocumentKey(i))throw new me(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function B2(i){if(ve.isDocumentKey(i))throw new me(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function fT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function Zi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new me(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jd(i);throw new me(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function cn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Wc(i,e){if(!fT(i))throw new me(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in i)){t=`JSON missing required field: '${a}'`;break}const c=i[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new me(te.INVALID_ARGUMENT,t);return!0}const j2=-62135596800,U2=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*U2);return new vt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<j2)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U2}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-j2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:cn("string",vt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new vt(0,0))}static max(){return new Oe(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ol=-1;class dd{constructor(e,t,a,s){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=s}}function Yp(i){return i.fields.find((e=>e.kind===2))}function $s(i){return i.fields.filter((e=>e.kind!==2))}dd.UNKNOWN_ID=-1;class qf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vc(0,pa.min())}}function dT(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(a===1e9?new vt(t+1,0):new vt(t,a));return new pa(s,ve.empty(),e)}function mT(i){return new pa(i.readTime,i.key,Ol)}class pa{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new pa(Oe.min(),ve.empty(),Ol)}static max(){return new pa(Oe.max(),ve.empty(),Ol)}}function R1(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(i.documentKey,e.documentKey),t!==0?t:Fe(i.largestBatchId,e.largestBatchId))}const gT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ds(i){if(i.code!==te.FAILED_PRECONDITION||i.message!==gT)throw i;oe("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,a)=>{t(e)}))}static reject(e){return new j(((t,a)=>{a(e)}))}static waitFor(e){return new j(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(m=>a(m)))})),c=!0,l===s&&t()}))}static or(e){let t=j.resolve(!1);for(const a of e)t=t.next((s=>s?j.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new j(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((v=>{c[p]=v,++d,d===l&&a(c)}),(v=>s(v)))}}))}static doWhile(e,t){return new j(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}const da="SimpleDb";class Ud{static open(e,t,a,s){try{return new Ud(t,e.transaction(s,a))}catch(l){throw new Tc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Wi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Tc(e,t.error)):this.S.resolve()},this.transaction.onerror=a=>{const s=C1(a.target.error);this.S.reject(new Tc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(da,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mD(t)}}class ss{static delete(e){return oe(da,"Removing database:",e),Ws(YS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!XS())return!1;if(ss.F())return!0;const e=gn(),t=ss.M(e),a=0<t&&t<10,s=yT(e),l=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}constructor(e,t,a){this.name=e,this.version=t,this.N=a,this.B=null,ss.M(gn())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(oe(da,"Opening database:",this.name),this.db=await new Promise(((t,a)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=l=>{const c=l.target.result;t(c)},s.onblocked=()=>{a(new Tc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const c=l.target.error;c.name==="VersionError"?a(new me(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?a(new me(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):a(new Tc(e,c))},s.onupgradeneeded=l=>{oe(da,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,s.transaction,l.oldVersion,this.version).next((()=>{oe(da,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,a,s){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=Ud.open(this.db,e,l?"readonly":"readwrite",a),m=s(d).next((p=>(d.C(),p))).catch((p=>(d.abort(p),j.reject(p)))).toPromise();return m.catch((()=>{})),await d.D,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(oe(da,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yT(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class dD{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ws(this.U.delete())}}class Tc extends me{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ms(i){return i.name==="IndexedDbTransactionError"}class mD{constructor(e){this.store=e}put(e,t){let a;return t!==void 0?(oe(da,"PUT",this.store.name,e,t),a=this.store.put(t,e)):(oe(da,"PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),Ws(a)}add(e){return oe(da,"ADD",this.store.name,e,e),Ws(this.store.add(e))}get(e){return Ws(this.store.get(e)).next((t=>(t===void 0&&(t=null),oe(da,"GET",this.store.name,e,t),t)))}delete(e){return oe(da,"DELETE",this.store.name,e),Ws(this.store.delete(e))}count(){return oe(da,"COUNT",this.store.name),Ws(this.store.count())}J(e,t){const a=this.options(e,t),s=a.index?this.store.index(a.index):this.store;if(typeof s.getAll=="function"){const l=s.getAll(a.range);return new j(((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(a),c=[];return this.H(l,((d,m)=>{c.push(m)})).next((()=>c))}}Y(e,t){const a=this.store.getAll(e,t===null?void 0:t);return new j(((s,l)=>{a.onerror=c=>{l(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){oe(da,"DELETE ALL",this.store.name);const a=this.options(e,t);a.X=!1;const s=this.cursor(a);return this.H(s,((l,c,d)=>d.delete()))}ee(e,t){let a;t?a=e:(a={},t=e);const s=this.cursor(a);return this.H(s,t)}te(e){const t=this.cursor({});return new j(((a,s)=>{t.onerror=l=>{const c=C1(l.target.error);s(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():a()})):a()}}))}H(e,t){const a=[];return new j(((s,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void s();const m=new dD(d),p=t(d.primaryKey,d.value,m);if(p instanceof j){const v=p.catch((S=>(m.done(),j.reject(S))));a.push(v)}m.isDone?s():m.G===null?d.continue():d.continue(m.G)}})).next((()=>j.waitFor(a)))}options(e,t){let a;return e!==void 0&&(typeof e=="string"?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ws(i){return new j(((e,t)=>{i.onsuccess=a=>{const s=a.target.result;e(s)},i.onerror=a=>{const s=C1(a.target.error);t(s)}}))}let H2=!1;function C1(i){const e=ss.M(gn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const a=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return H2||(H2=!0,setTimeout((()=>{throw a}),0)),a}}return i}const Ec="IndexBackfiller";class gD{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){oe(Ec,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();oe(Ec,`Documents written: ${t}`)}catch(t){ms(t)?oe(Ec,"Ignoring IndexedDB error during index backfill: ",t):await ds(t)}await this.re(6e4)}))}}class pD{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const a=new Set;let s=t,l=!0;return j.doWhile((()=>l===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!a.has(c))return oe(Ec,`Processing collection: ${c}`),this.oe(e,c,s).next((d=>{s-=d,a.add(c)}));l=!1})))).next((()=>t-s))}oe(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,a).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,l))).next((d=>(oe(Ec,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let a=e;return t.changes.forEach(((s,l)=>{const c=mT(l);R1(c,a)>0&&(a=c)})),new pa(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zn.ce=-1;const ao=-1;function Hd(i){return i==null}function Pc(i){return i===0&&1/i==-1/0}function _T(i){return typeof i=="number"&&Number.isInteger(i)&&!Pc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const md="";function On(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=F2(e)),e=yD(i.get(t),e);return F2(e)}function yD(i,e){let t=e;const a=i.length;for(let s=0;s<a;s++){const l=i.charAt(s);switch(l){case"\0":t+="";break;case md:t+="";break;default:t+=l}}return t}function F2(i){return i+md+""}function gi(i){const e=i.length;if(Ce(e>=2,64408,{path:i}),e===2)return Ce(i.charAt(0)===md&&i.charAt(1)==="",56145,{path:i}),mt.emptyPath();const t=e-2,a=[];let s="";for(let l=0;l<e;){const c=i.indexOf(md,l);switch((c<0||c>t)&&Ae(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(l,c);let m;s.length===0?m=d:(s+=d,m=s,s=""),a.push(m);break;case"":s+=i.substring(l,c),s+="\0";break;case"":s+=i.substring(l,c+1);break;default:Ae(61167,{path:i})}l=c+2}return new mt(a)}const Xs="remoteDocuments",Zc="owner",ml="owner",Lc="mutationQueues",_D="userId",Qa="mutations",Y2="batchId",no="userMutationsIndex",q2=["userId","batchId"];function Gf(i,e){return[i,On(e)]}function vT(i,e,t){return[i,On(e),t]}const vD={},Vl="documentMutations",gd="remoteDocumentsV14",bD=["prefixPath","collectionGroup","readTime","documentId"],Kf="documentKeyIndex",SD=["prefixPath","collectionGroup","documentId"],bT="collectionGroupIndex",TD=["collectionGroup","readTime","prefixPath","documentId"],Bc="remoteDocumentGlobal",qp="remoteDocumentGlobalKey",Pl="targets",ST="queryTargetsIndex",ED=["canonicalId","targetId"],Ll="targetDocuments",AD=["targetId","path"],N1="documentTargetsIndex",wD=["path","targetId"],pd="targetGlobalKey",io="targetGlobal",jc="collectionParents",ID=["collectionId","parent"],Bl="clientMetadata",DD="clientId",Fd="bundles",zD="bundleId",Yd="namedQueries",RD="name",M1="indexConfiguration",CD="indexId",Gp="collectionGroupIndex",ND="collectionGroup",Ac="indexState",MD=["indexId","uid"],TT="sequenceNumberIndex",xD=["uid","sequenceNumber"],wc="indexEntries",kD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ET="documentKeyIndex",OD=["indexId","uid","orderedDocumentKey"],qd="documentOverlays",VD=["userId","collectionPath","documentId"],Kp="collectionPathOverlayIndex",PD=["userId","collectionPath","largestBatchId"],AT="collectionGroupOverlayIndex",LD=["userId","collectionGroup","largestBatchId"],x1="globals",BD="name",wT=[Lc,Qa,Vl,Xs,Pl,Zc,io,Ll,Bl,Bc,jc,Fd,Yd],jD=[...wT,qd],IT=[Lc,Qa,Vl,gd,Pl,Zc,io,Ll,Bl,Bc,jc,Fd,Yd,qd],DT=IT,k1=[...DT,M1,Ac,wc],UD=k1,zT=[...k1,x1],HD=zT;class Qp extends pT{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function pn(i,e){const t=De(i);return ss.O(t.le,e)}function G2(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function gs(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function RT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Rt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}}class Of{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??In.RED,this.left=s??In.EMPTY,this.right=l??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new In(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return In.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class St{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K2(this.data.getIterator())}getIteratorFrom(e){return new K2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class K2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gl(i){return i.hasNext()?i.getNext():void 0}class ea{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new ea([])}unionWith(e){let t=new St(Ut.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new ea(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}class CT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new CT("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const FD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(i){if(Ce(!!i,39018),typeof i=="string"){let e=0;const t=FD.exec(i);if(Ce(!!t,46558,{timestamp:i}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Pt(i.seconds),nanos:Pt(i.nanos)}}function Pt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function nr(i){return typeof i=="string"?en.fromBase64String(i):en.fromUint8Array(i)}const NT="server_timestamp",MT="__type__",xT="__previous_value__",kT="__local_write_time__";function O1(i){return(i?.mapValue?.fields||{})[MT]?.stringValue===NT}function Gd(i){const e=i.mapValue.fields[xT];return O1(e)?Gd(e):e}function Uc(i){const e=tr(i.mapValue.fields[kT].timestampValue);return new vt(e.seconds,e.nanos)}class YD{constructor(e,t,a,s,l,c,d,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const yd="(default)";class ho{constructor(e,t){this.projectId=e,this.database=t||yd}static empty(){return new ho("","")}get isDefaultDatabase(){return this.database===yd}isEqual(e){return e instanceof ho&&e.projectId===this.projectId&&e.database===this.database}}const V1="__type__",OT="__max__",ts={mapValue:{fields:{__type__:{stringValue:OT}}}},P1="__vector__",jl="value",Qf={nullValue:"NULL_VALUE"};function us(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?O1(i)?4:VT(i)?9007199254740991:Kd(i)?10:11:Ae(28295,{value:i})}function Si(i,e){if(i===e)return!0;const t=us(i);if(t!==us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Uc(i).isEqual(Uc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=tr(s.timestampValue),d=tr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(s,l){return nr(s.bytesValue).isEqual(nr(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(s,l){return Pt(s.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(i,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Pt(s.integerValue)===Pt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Pt(s.doubleValue),d=Pt(l.doubleValue);return c===d?Pc(c)===Pc(d):isNaN(c)&&isNaN(d)}return!1})(i,e);case 9:return kl(i.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(G2(c)!==G2(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Si(c[m],d[m])))return!1;return!0})(i,e);default:return Ae(52216,{left:i})}}function Hc(i,e){return(i.values||[]).find((t=>Si(t,e)))!==void 0}function cs(i,e){if(i===e)return 0;const t=us(i),a=us(e);if(t!==a)return Fe(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Pt(l.integerValue||l.doubleValue),m=Pt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(i,e);case 3:return Q2(i.timestampValue,e.timestampValue);case 4:return Q2(Uc(i),Uc(e));case 5:return Fp(i.stringValue,e.stringValue);case 6:return(function(l,c){const d=nr(l),m=nr(c);return d.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const v=Fe(d[p],m[p]);if(v!==0)return v}return Fe(d.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Fe(Pt(l.latitude),Pt(c.latitude));return d!==0?d:Fe(Pt(l.longitude),Pt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return J2(i.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},p=d[jl]?.arrayValue,v=m[jl]?.arrayValue,S=Fe(p?.values?.length||0,v?.values?.length||0);return S!==0?S:J2(p,v)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ts.mapValue&&c===ts.mapValue)return 0;if(l===ts.mapValue)return 1;if(c===ts.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let S=0;S<m.length&&S<v.length;++S){const D=Fp(m[S],v[S]);if(D!==0)return D;const k=cs(d[m[S]],p[v[S]]);if(k!==0)return k}return Fe(m.length,v.length)})(i.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Q2(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Fe(i,e);const t=tr(i),a=tr(e),s=Fe(t.seconds,a.seconds);return s!==0?s:Fe(t.nanos,a.nanos)}function J2(i,e){const t=i.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=cs(t[s],a[s]);if(l)return l}return Fe(t.length,a.length)}function Ul(i){return Jp(i)}function Jp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const a=tr(t);return`time(${a.seconds},${a.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return nr(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ve.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Jp(l);return a+"]"})(i.arrayValue):"mapValue"in i?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Jp(t.fields[c])}`;return s+"}"})(i.mapValue):Ae(61005,{value:i})}function Jf(i){switch(us(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gd(i);return e?16+Jf(e):16;case 5:return 2*i.stringValue.length;case 6:return nr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+Jf(l)),0)})(i.arrayValue);case 10:case 11:return(function(a){let s=0;return gs(a.fields,((l,c)=>{s+=l.length+Jf(c)})),s})(i.mapValue);default:throw Ae(13486,{value:i})}}function Fc(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function $p(i){return!!i&&"integerValue"in i}function Yc(i){return!!i&&"arrayValue"in i}function $2(i){return!!i&&"nullValue"in i}function X2(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $f(i){return!!i&&"mapValue"in i}function Kd(i){return(i?.mapValue?.fields||{})[V1]?.stringValue===P1}function Ic(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return gs(i.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Ic(a))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(i.arrayValue.values[t]);return e}return{...i}}function VT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===OT}const PT={mapValue:{fields:{[V1]:{stringValue:P1},[jl]:{arrayValue:{}}}}};function qD(i){return"nullValue"in i?Qf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Fc(ho.empty(),ve.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Kd(i)?PT:{mapValue:{}}:Ae(35942,{value:i})}function GD(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Fc(ho.empty(),ve.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?PT:"mapValue"in i?Kd(i)?{mapValue:{}}:ts:Ae(61959,{value:i})}function W2(i,e){const t=cs(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Z2(i,e){const t=cs(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!$f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Ut.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=Ic(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());$f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];$f(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){gs(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new kn(Ic(this.value))}}function LT(i){const e=[];return gs(i.fields,((t,a)=>{const s=new Ut([t]);if($f(a)){const l=LT(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new ea(e)}class Gt{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Gt(e,0,Oe.min(),Oe.min(),Oe.min(),kn.empty(),0)}static newFoundDocument(e,t,a,s){return new Gt(e,1,t,Oe.min(),a,s,0)}static newNoDocument(e,t){return new Gt(e,2,t,Oe.min(),Oe.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Oe.min(),Oe.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hl{constructor(e,t){this.position=e,this.inclusive=t}}function eb(i,e,t){let a=0;for(let s=0;s<i.position.length;s++){const l=e[s],c=i.position[s];if(l.field.isKeyField()?a=ve.comparator(ve.fromName(c.referenceValue),t.key):a=cs(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function tb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Si(i.position[t],e.position[t]))return!1;return!0}class _d{constructor(e,t="asc"){this.field=e,this.dir=t}}function KD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class BT{}class it extends BT{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new QD(e,t,a):t==="array-contains"?new XD(e,a):t==="in"?new qT(e,a):t==="not-in"?new WD(e,a):t==="array-contains-any"?new ZD(e,a):new it(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new JD(e,a):new $D(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cs(t,this.value)):t!==null&&us(this.value)===us(t)&&this.matchesComparison(cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bt extends BT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new bt(e,t)}matches(e){return Fl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fl(i){return i.op==="and"}function Xp(i){return i.op==="or"}function L1(i){return jT(i)&&Fl(i)}function jT(i){for(const e of i.filters)if(e instanceof bt)return!1;return!0}function Wp(i){if(i instanceof it)return i.field.canonicalString()+i.op.toString()+Ul(i.value);if(L1(i))return i.filters.map((e=>Wp(e))).join(",");{const e=i.filters.map((t=>Wp(t))).join(",");return`${i.op}(${e})`}}function UT(i,e){return i instanceof it?(function(a,s){return s instanceof it&&a.op===s.op&&a.field.isEqual(s.field)&&Si(a.value,s.value)})(i,e):i instanceof bt?(function(a,s){return s instanceof bt&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&UT(c,s.filters[d])),!0):!1})(i,e):void Ae(19439)}function HT(i,e){const t=i.filters.concat(e);return bt.create(t,i.op)}function FT(i){return i instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ul(t.value)}`})(i):i instanceof bt?(function(t){return t.op.toString()+" {"+t.getFilters().map(FT).join(" ,")+"}"})(i):"Filter"}class QD extends it{constructor(e,t,a){super(e,t,a),this.key=ve.fromName(a.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class JD extends it{constructor(e,t){super(e,"in",t),this.keys=YT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $D extends it{constructor(e,t){super(e,"not-in",t),this.keys=YT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function YT(i,e){return(e.arrayValue?.values||[]).map((t=>ve.fromName(t.referenceValue)))}class XD extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yc(t)&&Hc(t.arrayValue,this.value)}}class qT extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class WD extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hc(this.value.arrayValue,t)}}class ZD extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Hc(this.value.arrayValue,a)))}}class ez{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Zp(i,e=null,t=[],a=[],s=null,l=null,c=null){return new ez(i,e,t,a,s,l,c)}function fo(i){const e=De(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Wp(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Ul(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Ul(a))).join(",")),e.Te=t}return e.Te}function eh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!KD(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!UT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!tb(i.startAt,e.startAt)&&tb(i.endAt,e.endAt)}function vd(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function bd(i,e){return i.filters.filter((t=>t instanceof it&&t.field.isEqual(e)))}function nb(i,e,t){let a=Qf,s=!0;for(const l of bd(i,e)){let c=Qf,d=!0;switch(l.op){case"<":case"<=":c=qD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Qf}W2({value:a,inclusive:s},{value:c,inclusive:d})<0&&(a=c,s=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];W2({value:a,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(a=c,s=t.inclusive);break}}return{value:a,inclusive:s}}function ab(i,e,t){let a=ts,s=!0;for(const l of bd(i,e)){let c=ts,d=!0;switch(l.op){case">=":case">":c=GD(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ts}Z2({value:a,inclusive:s},{value:c,inclusive:d})>0&&(a=c,s=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];Z2({value:a,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(a=c,s=t.inclusive);break}}return{value:a,inclusive:s}}class th{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GT(i,e,t,a,s,l,c,d){return new th(i,e,t,a,s,l,c,d)}function Qd(i){return new th(i)}function ib(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function KT(i){return i.collectionGroup!==null}function Dc(i){const e=De(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new St(Ut.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new _d(l,a))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new _d(Ut.keyField(),a))}return e.Ie}function ga(i){const e=De(i);return e.Ee||(e.Ee=tz(e,Dc(i))),e.Ee}function tz(i,e){if(i.limitType==="F")return Zp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new _d(s.field,l)}));const t=i.endAt?new Hl(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new Hl(i.startAt.position,i.startAt.inclusive):null;return Zp(i.path,i.collectionGroup,e,i.filters,i.limit,t,a)}}function e1(i,e){const t=i.filters.concat([e]);return new th(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function t1(i,e,t){return new th(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Jd(i,e){return eh(ga(i),ga(e))&&i.limitType===e.limitType}function QT(i){return`${fo(ga(i))}|lt:${i.limitType}`}function Sl(i){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>FT(s))).join(", ")}]`),Hd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Ul(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Ul(s))).join(",")),`Target(${a})`})(ga(i))}; limitType=${i.limitType})`}function nh(i,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):ve.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(i,e)&&(function(a,s){for(const l of Dc(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(i,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,m){const p=eb(c,d,m);return c.inclusive?p<=0:p<0})(a.startAt,Dc(a),s)||a.endAt&&!(function(c,d,m){const p=eb(c,d,m);return c.inclusive?p>=0:p>0})(a.endAt,Dc(a),s))})(i,e)}function JT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $T(i){return(e,t)=>{let a=!1;for(const s of Dc(i)){const l=nz(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function nz(i,e,t){const a=i.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?cs(m,p):Ae(42886)})(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Ae(19790,{direction:i.dir})}}class rr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return RT(this.inner)}size(){return this.innerSize}}const az=new Rt(ve.comparator);function ma(){return az}const XT=new Rt(ve.comparator);function mc(...i){let e=XT;for(const t of i)e=e.insert(t.key,t);return e}function WT(i){let e=XT;return i.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function pi(){return zc()}function ZT(){return zc()}function zc(){return new rr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const iz=new Rt(ve.comparator),rz=new St(ve.comparator);function $e(...i){let e=rz;for(const t of i)e=e.add(t);return e}const sz=new St(Fe);function B1(){return sz}function j1(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function eE(i){return{integerValue:""+i}}function oz(i,e){return _T(e)?eE(e):j1(i,e)}class $d{constructor(){this._=void 0}}function lz(i,e,t){return i instanceof qc?(function(s,l){const c={fields:{[MT]:{stringValue:NT},[kT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&O1(l)&&(l=Gd(l)),l&&(c.fields[xT]=l),{mapValue:c}})(t,e):i instanceof Yl?nE(i,e):i instanceof ql?aE(i,e):(function(s,l){const c=tE(s,l),d=rb(c)+rb(s.Ae);return $p(c)&&$p(s.Ae)?eE(d):j1(s.serializer,d)})(i,e)}function uz(i,e,t){return i instanceof Yl?nE(i,e):i instanceof ql?aE(i,e):t}function tE(i,e){return i instanceof Gc?(function(a){return $p(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class qc extends $d{}class Yl extends $d{constructor(e){super(),this.elements=e}}function nE(i,e){const t=iE(e);for(const a of i.elements)t.some((s=>Si(s,a)))||t.push(a);return{arrayValue:{values:t}}}class ql extends $d{constructor(e){super(),this.elements=e}}function aE(i,e){let t=iE(e);for(const a of i.elements)t=t.filter((s=>!Si(s,a)));return{arrayValue:{values:t}}}class Gc extends $d{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rb(i){return Pt(i.integerValue||i.doubleValue)}function iE(i){return Yc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class cz{constructor(e,t){this.field=e,this.transform=t}}function hz(i,e){return i.field.isEqual(e.field)&&(function(a,s){return a instanceof Yl&&s instanceof Yl||a instanceof ql&&s instanceof ql?kl(a.elements,s.elements,Si):a instanceof Gc&&s instanceof Gc?Si(a.Ae,s.Ae):a instanceof qc&&s instanceof qc})(i.transform,e.transform)}class fz{constructor(e,t){this.version=e,this.transformResults=t}}class Dn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Xd{}function rE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ah(i.key,Dn.none()):new au(i.key,i.data,Dn.none());{const t=i.data,a=kn.empty();let s=new St(Ut.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new sr(i.key,a,new ea(s.toArray()),Dn.none())}}function dz(i,e,t){i instanceof au?(function(s,l,c){const d=s.value.clone(),m=ob(s.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(i,e,t):i instanceof sr?(function(s,l,c){if(!Xf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=ob(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(sE(s)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Rc(i,e,t,a){return i instanceof au?(function(l,c,d,m){if(!Xf(l.precondition,c))return d;const p=l.value.clone(),v=lb(l.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(i,e,t,a):i instanceof sr?(function(l,c,d,m){if(!Xf(l.precondition,c))return d;const p=lb(l.fieldTransforms,m,c),v=c.data;return v.setAll(sE(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((S=>S.field)))})(i,e,t,a):(function(l,c,d){return Xf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(i,e,t)}function mz(i,e){let t=null;for(const a of i.fieldTransforms){const s=e.data.field(a.field),l=tE(a.transform,s||null);l!=null&&(t===null&&(t=kn.empty()),t.set(a.field,l))}return t||null}function sb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&kl(a,s,((l,c)=>hz(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class au extends Xd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sr extends Xd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function sE(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}})),e}function ob(i,e,t){const a=new Map;Ce(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let s=0;s<t.length;s++){const l=i[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,uz(c,d,t[s]))}return a}function lb(i,e,t){const a=new Map;for(const s of i){const l=s.transform,c=t.data.field(s.field);a.set(s.field,lz(l,c,e))}return a}class ah extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oE extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class U1{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&dz(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Rc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Rc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=ZT();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const m=rE(c,d);m!==null&&a.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Oe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,((t,a)=>sb(t,a)))&&kl(this.baseMutations,e.baseMutations,((t,a)=>sb(t,a)))}}class H1{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){Ce(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return iz})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new H1(e,t,a,s)}}class F1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gz{constructor(e,t){this.count=e,this.unchangedNames=t}}var ln,lt;function pz(i){switch(i){case te.OK:return Ae(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function lE(i){if(i===void 0)return Zt("GRPC error has no .code"),te.UNKNOWN;switch(i){case ln.OK:return te.OK;case ln.CANCELLED:return te.CANCELLED;case ln.UNKNOWN:return te.UNKNOWN;case ln.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case ln.INTERNAL:return te.INTERNAL;case ln.UNAVAILABLE:return te.UNAVAILABLE;case ln.UNAUTHENTICATED:return te.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case ln.NOT_FOUND:return te.NOT_FOUND;case ln.ALREADY_EXISTS:return te.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return te.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case ln.ABORTED:return te.ABORTED;case ln.OUT_OF_RANGE:return te.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return te.UNIMPLEMENTED;case ln.DATA_LOSS:return te.DATA_LOSS;default:return Ae(39323,{code:i})}}(lt=ln||(ln={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";function yz(){return new TextEncoder}const _z=new rs([4294967295,4294967295],0);function ub(i){const e=yz().encode(i),t=new aT;return t.update(e),new Uint8Array(t.digest())}function cb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rs([t,a],0),new rs([s,l],0)]}class Y1{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(a<0)throw new gc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=rs.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(rs.fromNumber(a)));return s.compare(_z)===1&&(s=new rs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ub(e),[a,s]=cb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Y1(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=ub(e),[a,s]=cb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ih{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new ih(Oe.min(),s,new Rt(Fe),ma(),$e())}}class rh{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new rh(a,t,$e(),$e(),$e())}}class Wf{constructor(e,t,a,s){this.be=e,this.removedTargetIds=t,this.key=a,this.De=s}}class uE{constructor(e,t){this.targetId=e,this.Ce=t}}class cE{constructor(e,t,a=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class hb{constructor(){this.ve=0,this.Fe=fb(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),a=$e();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Ae(38017,{changeType:l})}})),new rh(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=fb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vz{constructor(e){this.Ge=e,this.ze=new Map,this.je=ma(),this.Je=Vf(),this.He=Vf(),this.Ye=new Rt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(vd(l))if(a===0){const c=new ve(l.path);this.et(t,c,Gt.newNoDocument(c,Oe.min()))}else Ce(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=nr(a).toUint8Array()}catch(m){if(m instanceof CT)return Oc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Y1(c,s,l)}catch(m){return Oc(m instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&vd(d.target)){const m=new ve(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Gt.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let a=$e();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new ih(e,t,this.Ye,this.je,a);return this.je=ma(),this.Je=Vf(),this.He=Vf(),this.Ye=new Rt(Fe),s}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new hb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new St(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new St(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new Rt(ve.comparator)}function fb(){return new Rt(ve.comparator)}const bz={asc:"ASCENDING",desc:"DESCENDING"},Sz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tz={and:"AND",or:"OR"};class Ez{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function n1(i,e){return i.useProto3Json||Hd(e)?e:{value:e}}function Gl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Az(i,e){return Gl(i,e.toTimestamp())}function jn(i){return Ce(!!i,49232),Oe.fromTimestamp((function(t){const a=tr(t);return new vt(a.seconds,a.nanos)})(i))}function q1(i,e){return a1(i,e).canonicalString()}function a1(i,e){const t=(function(s){return new mt(["projects",s.projectId,"databases",s.database])})(i).child("documents");return e===void 0?t:t.child(e)}function fE(i){const e=mt.fromString(i);return Ce(SE(e),10190,{key:e.toString()}),e}function Sd(i,e){return q1(i.databaseId,e.path)}function ro(i,e){const t=fE(e);if(t.get(1)!==i.databaseId.projectId)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ve(gE(t))}function dE(i,e){return q1(i.databaseId,e)}function mE(i){const e=fE(i);return e.length===4?mt.emptyPath():gE(e)}function i1(i){return new mt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gE(i){return Ce(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function db(i,e,t){return{name:Sd(i,e),fields:t.value.mapValue.fields}}function wz(i,e,t){const a=ro(i,e.name),s=jn(e.updateTime),l=e.createTime?jn(e.createTime):Oe.min(),c=new kn({mapValue:{fields:e.fields}}),d=Gt.newFoundDocument(a,s,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Iz(i,e){let t;if("targetChange"in e){e.targetChange;const a=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(Ce(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):(Ce(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const v=p.code===void 0?te.UNKNOWN:lE(p.code);return new me(v,p.message||"")})(c);t=new cE(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=ro(i,a.document.name),l=jn(a.document.updateTime),c=a.document.createTime?jn(a.document.createTime):Oe.min(),d=new kn({mapValue:{fields:a.document.fields}}),m=Gt.newFoundDocument(s,l,c,d),p=a.targetIds||[],v=a.removedTargetIds||[];t=new Wf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=ro(i,a.document),l=a.readTime?jn(a.readTime):Oe.min(),c=Gt.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Wf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=ro(i,a.document),l=a.removedTargetIds||[];t=new Wf([],l,s,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new gz(s,l),d=a.targetId;t=new uE(d,c)}}return t}function Td(i,e){let t;if(e instanceof au)t={update:db(i,e.key,e.value)};else if(e instanceof ah)t={delete:Sd(i,e.key)};else if(e instanceof sr)t={update:db(i,e.key,e.data),updateMask:Mz(e.fieldMask)};else{if(!(e instanceof oE))return Ae(16599,{Vt:e.type});t={verify:Sd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof qc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Yl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ql)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ae(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:Az(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(i,e.precondition)),t}function r1(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Dn.updateTime(jn(l.updateTime)):l.exists!==void 0?Dn.exists(l.exists):Dn.none()})(e.currentDocument):Dn.none(),a=e.updateTransforms?e.updateTransforms.map((s=>(function(c,d){let m=null;if("setToServerValue"in d)Ce(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new qc;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];m=new Yl(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];m=new ql(v)}else"increment"in d?m=new Gc(c,d.increment):Ae(16584,{proto:d});const p=Ut.fromServerFormat(d.fieldPath);return new cz(p,m)})(i,s))):[];if(e.update){e.update.name;const s=ro(i,e.update.name),l=new kn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const p=m.fieldPaths||[];return new ea(p.map((v=>Ut.fromServerFormat(v))))})(e.updateMask);return new sr(s,l,c,t,a)}return new au(s,l,t,a)}if(e.delete){const s=ro(i,e.delete);return new ah(s,t)}if(e.verify){const s=ro(i,e.verify);return new oE(s,t)}return Ae(1463,{proto:e})}function Dz(i,e){return i&&i.length>0?(Ce(e!==void 0,14353),i.map((t=>(function(s,l){let c=s.updateTime?jn(s.updateTime):jn(l);return c.isEqual(Oe.min())&&(c=jn(l)),new fz(c,s.transformResults||[])})(t,e)))):[]}function pE(i,e){return{documents:[dE(i,e.path)]}}function yE(i,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=dE(i,s);const l=(function(p){if(p.length!==0)return bE(bt.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(D){return{field:Tl(D.field),direction:Rz(D.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=n1(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function _E(i){let e=mE(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){Ce(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(S){const D=vE(S);return D instanceof bt&&L1(D)?D.getFilters():[D]})(t.where));let c=[];t.orderBy&&(c=(function(S){return S.map((D=>(function(H){return new _d(El(H.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(D)))})(t.orderBy));let d=null;t.limit&&(d=(function(S){let D;return D=typeof S=="object"?S.value:S,Hd(D)?null:D})(t.limit));let m=null;t.startAt&&(m=(function(S){const D=!!S.before,k=S.values||[];return new Hl(k,D)})(t.startAt));let p=null;return t.endAt&&(p=(function(S){const D=!S.before,k=S.values||[];return new Hl(k,D)})(t.endAt)),GT(e,s,c,l,d,"F",m,p)}function zz(i,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vE(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=El(t.unaryFilter.field);return it.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=El(t.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=El(t.unaryFilter.field);return it.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=El(t.unaryFilter.field);return it.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(t){return it.create(El(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return bt.create(t.compositeFilter.filters.map((a=>vE(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(i):Ae(30097,{filter:i})}function Rz(i){return bz[i]}function Cz(i){return Sz[i]}function Nz(i){return Tz[i]}function Tl(i){return{fieldPath:i.canonicalString()}}function El(i){return Ut.fromServerFormat(i.fieldPath)}function bE(i){return i instanceof it?(function(t){if(t.op==="=="){if(X2(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NAN"}};if($2(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(X2(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NAN"}};if($2(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(t.field),op:Cz(t.op),value:t.value}}})(i):i instanceof bt?(function(t){const a=t.getFilters().map((s=>bE(s)));return a.length===1?a[0]:{compositeFilter:{op:Nz(t.op),filters:a}}})(i):Ae(54877,{filter:i})}function Mz(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function SE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Ji{constructor(e,t,a,s,l=Oe.min(),c=Oe.min(),d=en.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class TE{constructor(e){this.yt=e}}function xz(i,e){let t;if(e.document)t=wz(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=ve.fromSegments(e.noDocument.path),s=go(e.noDocument.readTime);t=Gt.newNoDocument(a,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const a=ve.fromSegments(e.unknownDocument.path),s=go(e.unknownDocument.version);t=Gt.newUnknownDocument(a,s)}}return e.readTime&&t.setReadTime((function(s){const l=new vt(s[0],s[1]);return Oe.fromTimestamp(l)})(e.readTime)),t}function mb(i,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ed(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document=(function(l,c){return{name:Sd(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Gl(l,c.version.toTimestamp()),createTime:Gl(l,c.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:mo(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});a.unknownDocument={path:t.path.toArray(),version:mo(e.version)}}return a}function Ed(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function mo(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function go(i){const e=new vt(i.seconds,i.nanoseconds);return Oe.fromTimestamp(e)}function Zs(i,e){const t=(e.baseMutations||[]).map((l=>r1(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const a=e.mutations.map((l=>r1(i.yt,l))),s=vt.fromMillis(e.localWriteTimeMs);return new U1(e.batchId,s,t,a)}function pc(i){const e=go(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?go(i.lastLimboFreeSnapshotVersion):Oe.min();let a;return a=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return Ce(c===1,1966,{count:c}),ga(Qd(mE(l.documents[0])))})(i.query):(function(l){return ga(_E(l))})(i.query),new Ji(a,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,en.fromBase64String(i.resumeToken))}function EE(i,e){const t=mo(e.snapshotVersion),a=mo(e.lastLimboFreeSnapshotVersion);let s;s=vd(e.target)?pE(i.yt,e.target):yE(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:s}}function AE(i){const e=_E({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?t1(e,e.limit,"L"):e}function vp(i,e){return new F1(e.largestBatchId,r1(i.yt,e.overlayMutation))}function gb(i,e){const t=e.path.lastSegment();return[i,On(e.path.popLast()),t]}function pb(i,e,t,a){return{indexId:i,uid:e,sequenceNumber:t,readTime:mo(a.readTime),documentKey:On(a.documentKey.path),largestBatchId:a.largestBatchId}}class kz{getBundleMetadata(e,t){return yb(e).get(t).next((a=>{if(a)return(function(l){return{id:l.bundleId,createTime:go(l.createTime),version:l.version}})(a)}))}saveBundleMetadata(e,t){return yb(e).put((function(s){return{bundleId:s.id,createTime:mo(jn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return _b(e).get(t).next((a=>{if(a)return(function(l){return{name:l.name,query:AE(l.bundledQuery),readTime:go(l.readTime)}})(a)}))}saveNamedQuery(e,t){return _b(e).put((function(s){return{name:s.name,readTime:mo(jn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function yb(i){return pn(i,Fd)}function _b(i){return pn(i,Yd)}class Wd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const a=t.uid||"";return new Wd(e,a)}getOverlay(e,t){return lc(e).get(gb(this.userId,t)).next((a=>a?vp(this.serializer,a):null))}getOverlays(e,t){const a=pi();return j.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){const s=[];return a.forEach(((l,c)=>{const d=new F1(t,c);s.push(this.St(e,d))})),j.waitFor(s)}removeOverlaysForBatchId(e,t,a){const s=new Set;t.forEach((c=>s.add(On(c.getCollectionPath()))));const l=[];return s.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,a],[this.userId,c,a+1],!1,!0);l.push(lc(e).Z(Kp,d))})),j.waitFor(l)}getOverlaysForCollection(e,t,a){const s=pi(),l=On(t),c=IDBKeyRange.bound([this.userId,l,a],[this.userId,l,Number.POSITIVE_INFINITY],!0);return lc(e).J(Kp,c).next((d=>{for(const m of d){const p=vp(this.serializer,m);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,a,s){const l=pi();let c;const d=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lc(e).ee({index:AT,range:d},((m,p,v)=>{const S=vp(this.serializer,p);l.size()<s||S.largestBatchId===c?(l.set(S.getKey(),S),c=S.largestBatchId):v.done()})).next((()=>l))}St(e,t){return lc(e).put((function(s,l,c){const[d,m,p]=gb(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Td(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function lc(i){return pn(i,qd)}class Oz{bt(e){return pn(e,x1)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const a=t?.value;return a?en.fromUint8Array(a):en.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class eo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Pt(e.integerValue));else if("doubleValue"in e){const a=Pt(e.doubleValue);isNaN(a)?this.Ft(t,13):(this.Ft(t,15),Pc(a)?t.Mt(0):t.Mt(a))}else if("timestampValue"in e){let a=e.timestampValue;this.Ft(t,20),typeof a=="string"&&(a=tr(a)),t.xt(`${a.seconds||""}`),t.Mt(a.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(nr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.Ft(t,45),t.Mt(a.latitude||0),t.Mt(a.longitude||0)}else"mapValue"in e?VT(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Kd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const a=e.fields||{};this.Ft(t,55);for(const s of Object.keys(a))this.Ot(s,t),this.Ct(a[s],t)}kt(e,t){const a=e.fields||{};this.Ft(t,53);const s=jl,l=a[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Pt(l)),this.Ot(s,t),this.Ct(a[s],t)}Qt(e,t){const a=e.values||[];this.Ft(t,50);for(const s of a)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ve.fromName(e).path.forEach((a=>{this.Ft(t,60),this.Ut(a,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}eo.Kt=new eo;const pl=255;function Vz(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function vb(i){const e=64-(function(a){let s=0;for(let l=0;l<8;++l){const c=Vz(255&a[l]);if(s+=c,c!==8)break}return s})(i);return Math.ceil(e/8)}class Pz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Gt(a.value),a=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Jt(a.value),a=t.next();this.Ht()}Yt(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Gt(a);else if(a<2048)this.Gt(960|a>>>6),this.Gt(128|63&a);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Jt(a);else if(a<2048)this.Jt(960|a>>>6),this.Jt(128|63&a);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),a=vb(t);this.tn(1+a),this.buffer[this.position++]=255&a;for(let s=t.length-a;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),a=vb(t);this.tn(1+a),this.buffer[this.position++]=~(255&a);for(let s=t.length-a;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(pl),this.sn(255)}_n(){this.an(pl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),a=!!(128&t[0]);t[0]^=a?255:128;for(let s=1;s<t.length;++s)t[s]^=a?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===pl?(this.sn(pl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===pl?(this.an(pl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const s=new Uint8Array(a);s.set(this.buffer),this.buffer=s}}class Lz{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Bz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class uc{constructor(){this.cn=new Pz,this.ln=new Lz(this.cn),this.hn=new Bz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class to{constructor(e,t,a,s){this.Tn=e,this.In=t,this.En=a,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,a=new Uint8Array(t);return a.set(this.dn,0),t!==e?a.set([0],this.dn.length):++a[a.length-1],new to(this.Tn,this.In,this.En,a)}Rn(e,t,a){return{indexId:this.Tn,uid:e,arrayValue:Zf(this.En),directionalValue:Zf(this.dn),orderedDocumentKey:Zf(t),documentKey:a.path.toArray()}}Vn(e,t,a){const s=this.Rn(e,t,a);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Gr(i,e){let t=i.Tn-e.Tn;return t!==0?t:(t=bb(i.En,e.En),t!==0?t:(t=bb(i.dn,e.dn),t!==0?t:ve.comparator(i.In,e.In)))}function bb(i,e){for(let t=0;t<i.length&&t<e.length;++t){const a=i[t]-e[t];if(a!==0)return a}return i.length-e.length}function Zf(i){return $S()?(function(t){let a="";for(let s=0;s<t.length;s++)a+=String.fromCharCode(t[s]);return a})(i):i}function Sb(i){return typeof i!="string"?i:(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(i)}class Tb{constructor(e){this.mn=new St(((t,a)=>Ut.comparator(t.field,a.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const a=t;a.isInequality()?this.mn=this.mn.add(a):this.gn.push(a)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Yp(e);if(t!==void 0&&!this.wn(t))return!1;const a=$s(e);let s=new Set,l=0,c=0;for(;l<a.length&&this.wn(a[l]);++l)s=s.add(a[l].fieldPath.canonicalString());if(l===a.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!s.has(d.field.canonicalString())){const m=a[l];if(!this.Sn(d,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<a.length;++l){const d=a[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new St(Ut.comparator);const t=[];for(const a of this.gn)if(!a.field.isKeyField())if(a.op==="array-contains"||a.op==="array-contains-any")t.push(new qf(a.field,2));else{if(e.has(a.field))continue;e=e.add(a.field),t.push(new qf(a.field,0))}for(const a of this.fn)a.field.isKeyField()||e.has(a.field)||(e=e.add(a.field),t.push(new qf(a.field,a.dir==="asc"?0:1)));return new dd(dd.UNKNOWN_ID,this.collectionId,t,Vc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const a=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===a}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function wE(i){if(Ce(i instanceof it||i instanceof bt,20012),i instanceof it){if(i instanceof qT){const t=i.value.arrayValue?.values?.map((a=>it.create(i.field,"==",a)))||[];return bt.create(t,"or")}return i}const e=i.filters.map((t=>wE(t)));return bt.create(e,i.op)}function jz(i){if(i.getFilters().length===0)return[];const e=l1(wE(i));return Ce(IE(e),7391),s1(e)||o1(e)?[e]:e.getFilters()}function s1(i){return i instanceof it}function o1(i){return i instanceof bt&&L1(i)}function IE(i){return s1(i)||o1(i)||(function(t){if(t instanceof bt&&Xp(t)){for(const a of t.getFilters())if(!s1(a)&&!o1(a))return!1;return!0}return!1})(i)}function l1(i){if(Ce(i instanceof it||i instanceof bt,34018),i instanceof it)return i;if(i.filters.length===1)return l1(i.filters[0]);const e=i.filters.map((a=>l1(a)));let t=bt.create(e,i.op);return t=Ad(t),IE(t)?t:(Ce(t instanceof bt,64498),Ce(Fl(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((a,s)=>G1(a,s))))}function G1(i,e){let t;return Ce(i instanceof it||i instanceof bt,38388),Ce(e instanceof it||e instanceof bt,25473),t=i instanceof it?e instanceof it?(function(s,l){return bt.create([s,l],"and")})(i,e):Eb(i,e):e instanceof it?Eb(e,i):(function(s,l){if(Ce(s.filters.length>0&&l.filters.length>0,48005),Fl(s)&&Fl(l))return HT(s,l.getFilters());const c=Xp(s)?s:l,d=Xp(s)?l:s,m=c.filters.map((p=>G1(p,d)));return bt.create(m,"or")})(i,e),Ad(t)}function Eb(i,e){if(Fl(e))return HT(e,i.getFilters());{const t=e.filters.map((a=>G1(i,a)));return bt.create(t,"or")}}function Ad(i){if(Ce(i instanceof it||i instanceof bt,11850),i instanceof it)return i;const e=i.getFilters();if(e.length===1)return Ad(e[0]);if(jT(i))return i;const t=e.map((s=>Ad(s))),a=[];return t.forEach((s=>{s instanceof it?a.push(s):s instanceof bt&&(s.op===i.op?a.push(...s.filters):a.push(s))})),a.length===1?a[0]:bt.create(a,i.op)}class Uz{constructor(){this.Cn=new K1}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(pa.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(pa.min())}updateCollectionGroup(e,t,a){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class K1{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new St(mt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new St(mt.comparator)).toArray()}}const Ab="IndexedDbIndexManager",Pf=new Uint8Array(0);class Hz{constructor(e,t){this.databaseId=t,this.vn=new K1,this.Fn=new rr((a=>fo(a)),((a,s)=>eh(a,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const a=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:a,parent:On(s)};return wb(e).put(l)}return j.resolve()}getCollectionParents(e,t){const a=[],s=IDBKeyRange.bound([t,""],[cT(t),""],!1,!0);return wb(e).J(s).next((l=>{for(const c of l){if(c.collectionId!==t)break;a.push(gi(c.parent))}return a}))}addFieldIndex(e,t){const a=cc(e),s=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete s.indexId;const l=a.add(s);if(t.indexState){const c=_l(e);return l.next((d=>{c.put(pb(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const a=cc(e),s=_l(e),l=yl(e);return a.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=cc(e),a=yl(e),s=_l(e);return t.Z().next((()=>a.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return j.forEach(this.Mn(t),(a=>this.getIndexType(e,a).next((s=>{if(s===0||s===1){const l=new Tb(a).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const a=yl(e);let s=!0;const l=new Map;return j.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{s&&(s=!!d),l.set(c,d)})))).next((()=>{if(s){let c=$e();const d=[];return j.forEach(l,((m,p)=>{oe(Ab,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((fe=>`${fe.fieldPath}:${fe.kind}`)).join(",")}`})(m)} to execute ${fo(t)}`);const v=(function(Q,fe){const he=Yp(fe);if(he===void 0)return null;for(const ne of bd(Q,he.fieldPath))switch(ne.op){case"array-contains-any":return ne.value.arrayValue.values||[];case"array-contains":return[ne.value]}return null})(p,m),S=(function(Q,fe){const he=new Map;for(const ne of $s(fe))for(const A of bd(Q,ne.fieldPath))switch(A.op){case"==":case"in":he.set(ne.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return he.set(ne.fieldPath.canonicalString(),A.value),Array.from(he.values())}return null})(p,m),D=(function(Q,fe){const he=[];let ne=!0;for(const A of $s(fe)){const I=A.kind===0?nb(Q,A.fieldPath,Q.startAt):ab(Q,A.fieldPath,Q.startAt);he.push(I.value),ne&&(ne=I.inclusive)}return new Hl(he,ne)})(p,m),k=(function(Q,fe){const he=[];let ne=!0;for(const A of $s(fe)){const I=A.kind===0?ab(Q,A.fieldPath,Q.endAt):nb(Q,A.fieldPath,Q.endAt);he.push(I.value),ne&&(ne=I.inclusive)}return new Hl(he,ne)})(p,m),H=this.On(m,p,D),q=this.On(m,p,k),$=this.Nn(m,p,S),W=this.Bn(m.indexId,v,H,D.inclusive,q,k.inclusive,$);return j.forEach(W,(le=>a.Y(le,t.limit).next((Q=>{Q.forEach((fe=>{const he=ve.fromSegments(fe.documentKey);c.has(he)||(c=c.add(he),d.push(he))}))}))))})).next((()=>d))}return j.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=jz(bt.create(e.filters,"and")).map((a=>Zp(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,a,s,l,c,d){const m=(t!=null?t.length:1)*Math.max(a.length,l.length),p=m/(t!=null?t.length:1),v=[];for(let S=0;S<m;++S){const D=t?this.Ln(t[S/p]):Pf,k=this.kn(e,D,a[S%p],s),H=this.qn(e,D,l[S%p],c),q=d.map(($=>this.kn(e,D,$,!0)));v.push(...this.createRange(k,H,q))}return v}kn(e,t,a,s){const l=new to(e,ve.empty(),t,a);return s?l:l.An()}qn(e,t,a,s){const l=new to(e,ve.empty(),t,a);return s?l.An():l}xn(e,t){const a=new Tb(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((l=>{let c=null;for(const d of l)a.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let a=2;const s=this.Mn(t);return j.forEach(s,(l=>this.xn(e,l).next((c=>{c?a!==0&&c.fields.length<(function(m){let p=new St(Ut.comparator),v=!1;for(const S of m.filters)for(const D of S.getFlattenedFilters())D.field.isKeyField()||(D.op==="array-contains"||D.op==="array-contains-any"?v=!0:p=p.add(D.field));for(const S of m.orderBy)S.field.isKeyField()||(p=p.add(S.field));return p.size+(v?1:0)})(l)&&(a=1):a=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&a===2?1:a))}Qn(e,t){const a=new uc;for(const s of $s(e)){const l=t.data.field(s.fieldPath);if(l==null)return null;const c=a.Pn(s.kind);eo.Kt.Dt(l,c)}return a.un()}Ln(e){const t=new uc;return eo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const a=new uc;return eo.Kt.Dt(Fc(this.databaseId,t),a.Pn((function(l){const c=$s(l);return c.length===0?0:c[c.length-1].kind})(e))),a.un()}Nn(e,t,a){if(a===null)return[];let s=[];s.push(new uc);let l=0;for(const c of $s(e)){const d=a[l++];for(const m of s)if(this.Un(t,c.fieldPath)&&Yc(d))s=this.Kn(s,c,d);else{const p=m.Pn(c.kind);eo.Kt.Dt(d,p)}}return this.Wn(s)}On(e,t,a){return this.Nn(e,t,a.position)}Wn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].un();return t}Kn(e,t,a){const s=[...e],l=[];for(const c of a.arrayValue.values||[])for(const d of s){const m=new uc;m.seed(d.un()),eo.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((a=>a instanceof it&&a.field.isEqual(t)&&(a.op==="in"||a.op==="not-in")))}getFieldIndexes(e,t){const a=cc(e),s=_l(e);return(t?a.J(Gp,IDBKeyRange.bound(t,t)):a.J()).next((l=>{const c=[];return j.forEach(l,(d=>s.get([d.indexId,this.uid]).next((m=>{c.push((function(v,S){const D=S?new Vc(S.sequenceNumber,new pa(go(S.readTime),new ve(gi(S.documentKey)),S.largestBatchId)):Vc.empty(),k=v.fields.map((([H,q])=>new qf(Ut.fromServerFormat(H),q)));return new dd(v.indexId,v.collectionGroup,k,D)})(d,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((a,s)=>{const l=a.indexState.sequenceNumber-s.indexState.sequenceNumber;return l!==0?l:Fe(a.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,a){const s=cc(e),l=_l(e);return this.Gn(e).next((c=>s.J(Gp,IDBKeyRange.bound(t,t)).next((d=>j.forEach(d,(m=>l.put(pb(m.indexId,this.uid,c,a))))))))}updateIndexEntries(e,t){const a=new Map;return j.forEach(t,((s,l)=>{const c=a.get(s.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((d=>(a.set(s.collectionGroup,d),j.forEach(d,(m=>this.zn(e,s,m).next((p=>{const v=this.jn(l,m);return p.isEqual(v)?j.resolve():this.Jn(e,l,m,p,v)})))))))}))}Hn(e,t,a,s){return yl(e).put(s.Rn(this.uid,this.$n(a,t.key),t.key))}Yn(e,t,a,s){return yl(e).delete(s.Vn(this.uid,this.$n(a,t.key),t.key))}zn(e,t,a){const s=yl(e);let l=new St(Gr);return s.ee({index:ET,range:IDBKeyRange.only([a.indexId,this.uid,Zf(this.$n(a,t))])},((c,d)=>{l=l.add(new to(a.indexId,t,Sb(d.arrayValue),Sb(d.directionalValue)))})).next((()=>l))}jn(e,t){let a=new St(Gr);const s=this.Qn(t,e);if(s==null)return a;const l=Yp(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Yc(c))for(const d of c.arrayValue.values||[])a=a.add(new to(t.indexId,e.key,this.Ln(d),s))}else a=a.add(new to(t.indexId,e.key,Pf,s));return a}Jn(e,t,a,s,l){oe(Ab,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,p,v,S,D){const k=m.getIterator(),H=p.getIterator();let q=gl(k),$=gl(H);for(;q||$;){let W=!1,le=!1;if(q&&$){const Q=v(q,$);Q<0?le=!0:Q>0&&(W=!0)}else q!=null?le=!0:W=!0;W?(S($),$=gl(H)):le?(D(q),q=gl(k)):(q=gl(k),$=gl(H))}})(s,l,Gr,(d=>{c.push(this.Hn(e,t,a,d))}),(d=>{c.push(this.Yn(e,t,a,d))})),j.waitFor(c)}Gn(e){let t=1;return _l(e).ee({index:TT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((a,s,l)=>{l.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,a){a=a.sort(((c,d)=>Gr(c,d))).filter(((c,d,m)=>!d||Gr(c,m[d-1])!==0));const s=[];s.push(e);for(const c of a){const d=Gr(c,e),m=Gr(c,t);if(d===0)s[0]=e.An();else if(d>0&&m<0)s.push(c),s.push(c.An());else if(m>0)break}s.push(t);const l=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const d=s[c].Vn(this.uid,Pf,ve.empty()),m=s[c+1].Vn(this.uid,Pf,ve.empty());l.push(IDBKeyRange.bound(d,m))}return l}Zn(e,t){return Gr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ib)}getMinOffset(e,t){return j.mapArray(this.Mn(t),(a=>this.xn(e,a).next((s=>s||Ae(44426))))).next(Ib)}}function wb(i){return pn(i,jc)}function yl(i){return pn(i,wc)}function cc(i){return pn(i,M1)}function _l(i){return pn(i,Ac)}function Ib(i){Ce(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<i.length;a++){const s=i[a].indexState.offset;R1(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new pa(e.readTime,e.documentKey,t)}const Db={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DE=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}function zE(i,e,t){const a=i.store(Qa),s=i.store(Vl),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=a.ee({range:c},((v,S,D)=>(d++,D.delete())));l.push(m.next((()=>{Ce(d===1,47070,{batchId:t.batchId})})));const p=[];for(const v of t.mutations){const S=vT(e,v.key.path,t.batchId);l.push(s.delete(S)),p.push(v.key)}return j.waitFor(l).next((()=>p))}function wd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ae(14731);e=i.noDocument}return JSON.stringify(e).length}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(DE,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Zd{constructor(e,t,a,s){this.userId=e,this.serializer=t,this.indexManager=a,this.referenceDelegate=s,this.Xn={}}static wt(e,t,a,s){Ce(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Zd(l,t,a,s)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).ee({index:no,range:a},((s,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,a,s){const l=Al(e),c=Kr(e);return c.add({}).next((d=>{Ce(typeof d=="number",49019);const m=new U1(d,t,a,s),p=(function(k,H,q){const $=q.baseMutations.map((le=>Td(k.yt,le))),W=q.mutations.map((le=>Td(k.yt,le)));return{userId:H,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:$,mutations:W}})(this.serializer,this.userId,m),v=[];let S=new St(((D,k)=>Fe(D.canonicalString(),k.canonicalString())));for(const D of s){const k=vT(this.userId,D.key.path,d);S=S.add(D.key.path.popLast()),v.push(c.put(p)),v.push(l.put(k,vD))}return S.forEach((D=>{v.push(this.indexManager.addToCollectionParentIndex(e,D))})),e.addOnCommittedListener((()=>{this.Xn[d]=m.keys()})),j.waitFor(v).next((()=>m))}))}lookupMutationBatch(e,t){return Kr(e).get(t).next((a=>a?(Ce(a.userId===this.userId,48,"Unexpected user for mutation batch",{userId:a.userId,batchId:t}),Zs(this.serializer,a)):null))}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((a=>{if(a){const s=a.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=IDBKeyRange.lowerBound([this.userId,a]);let l=null;return Kr(e).ee({index:no,range:s},((c,d,m)=>{d.userId===this.userId&&(Ce(d.batchId>=a,47524,{tr:a}),l=Zs(this.serializer,d)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=ao;return Kr(e).ee({index:no,range:t,reverse:!0},((s,l,c)=>{a=l.batchId,c.done()})).next((()=>a))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ao],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).J(no,t).next((a=>a.map((s=>Zs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Gf(this.userId,t.path),s=IDBKeyRange.lowerBound(a),l=[];return Al(e).ee({range:s},((c,d,m)=>{const[p,v,S]=c,D=gi(v);if(p===this.userId&&t.path.isEqual(D))return Kr(e).get(S).next((k=>{if(!k)throw Ae(61480,{nr:c,batchId:S});Ce(k.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:k.userId,batchId:S}),l.push(Zs(this.serializer,k))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new St(Fe);const s=[];return t.forEach((l=>{const c=Gf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Al(e).ee({range:d},((p,v,S)=>{const[D,k,H]=p,q=gi(k);D===this.userId&&l.path.isEqual(q)?a=a.add(H):S.done()}));s.push(m)})),j.waitFor(s).next((()=>this.rr(e,a)))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1,l=Gf(this.userId,a),c=IDBKeyRange.lowerBound(l);let d=new St(Fe);return Al(e).ee({range:c},((m,p,v)=>{const[S,D,k]=m,H=gi(D);S===this.userId&&a.isPrefixOf(H)?H.length===s&&(d=d.add(k)):v.done()})).next((()=>this.rr(e,d)))}rr(e,t){const a=[],s=[];return t.forEach((l=>{s.push(Kr(e).get(l).next((c=>{if(c===null)throw Ae(35274,{batchId:l});Ce(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),a.push(Zs(this.serializer,c))})))})),j.waitFor(s).next((()=>a))}removeMutationBatch(e,t){return zE(e.le,this.userId,t).next((a=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),j.forEach(a,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const a=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Al(e).ee({range:a},((l,c,d)=>{if(l[0]===this.userId){const m=gi(l[1]);s.push(m)}else d.done()})).next((()=>{Ce(s.length===0,56720,{sr:s.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return RE(e,this.userId,t)}_r(e){return CE(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ao,lastStreamToken:""}))}}function RE(i,e,t){const a=Gf(e,t.path),s=a[1],l=IDBKeyRange.lowerBound(a);let c=!1;return Al(i).ee({range:l,X:!0},((d,m,p)=>{const[v,S,D]=d;v===e&&S===s&&(c=!0),p.done()})).next((()=>c))}function Kr(i){return pn(i,Qa)}function Al(i){return pn(i,Vl)}function CE(i){return pn(i,Lc)}class po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new po(0)}static cr(){return new po(-1)}}class Fz{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const a=new po(t.highestTargetId);return t.highestTargetId=a.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Oe.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,a){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,a&&(s.lastRemoteSnapshotVersion=a.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((a=>(a.targetCount+=1,this.Tr(t,a),this.hr(e,a))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>vl(e).delete(t.targetId))).next((()=>this.lr(e))).next((a=>(Ce(a.targetCount>0,8065),a.targetCount-=1,this.hr(e,a))))}removeTargets(e,t,a){let s=0;const l=[];return vl(e).ee(((c,d)=>{const m=pc(d);m.sequenceNumber<=t&&a.get(m.targetId)===null&&(s++,l.push(this.removeTargetData(e,m)))})).next((()=>j.waitFor(l))).next((()=>s))}forEachTarget(e,t){return vl(e).ee(((a,s)=>{const l=pc(s);t(l)}))}lr(e){return zb(e).get(pd).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return zb(e).put(pd,t)}Pr(e,t){return vl(e).put(EE(this.serializer,t))}Tr(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const a=fo(t),s=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let l=null;return vl(e).ee({range:s,index:ST},((c,d,m)=>{const p=pc(d);eh(t,p.target)&&(l=p,m.done())})).next((()=>l))}addMatchingKeys(e,t,a){const s=[],l=Xr(e);return t.forEach((c=>{const d=On(c.path);s.push(l.put({targetId:a,path:d})),s.push(this.referenceDelegate.addReference(e,a,c))})),j.waitFor(s)}removeMatchingKeys(e,t,a){const s=Xr(e);return j.forEach(t,(l=>{const c=On(l.path);return j.waitFor([s.delete([a,c]),this.referenceDelegate.removeReference(e,a,l)])}))}removeMatchingKeysForTargetId(e,t){const a=Xr(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(s)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),s=Xr(e);let l=$e();return s.ee({range:a,X:!0},((c,d,m)=>{const p=gi(c[1]),v=new ve(p);l=l.add(v)})).next((()=>l))}containsKey(e,t){const a=On(t.path),s=IDBKeyRange.bound([a],[cT(a)],!1,!0);let l=0;return Xr(e).ee({index:N1,X:!0,range:s},(([c,d],m,p)=>{c!==0&&(l++,p.done())})).next((()=>l>0))}At(e,t){return vl(e).get(t).next((a=>a?pc(a):null))}}function vl(i){return pn(i,Pl)}function zb(i){return pn(i,io)}function Xr(i){return pn(i,Ll)}const Rb="LruGarbageCollector",NE=1048576;function Cb([i,e],[t,a]){const s=Fe(i,t);return s===0?Fe(e,a):s}class Yz{constructor(e){this.Ir=e,this.buffer=new St(Cb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Cb(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ME{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(Rb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ms(t)?oe(Rb,"Ignoring IndexedDB error during garbage collection: ",t):await ds(t)}await this.Vr(3e5)}))}}class qz{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Zn.ce);const a=new Yz(t);return this.mr.forEachTarget(e,(s=>a.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>a.Ar(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Db)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Db):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,s,l,c,d,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,c=Date.now(),this.nthSequenceNumber(e,s)))).next((S=>(a=S,d=Date.now(),this.removeTargets(e,a,t)))).next((S=>(l=S,m=Date.now(),this.removeOrphanedDocuments(e,a)))).next((S=>(p=Date.now(),bl()<=at.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${S} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:S}))))}}function xE(i,e){return new qz(i,e)}class Gz{constructor(e,t){this.db=e,this.garbageCollector=xE(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((a,s)=>t(s)))}addReference(e,t,a){return Lf(e,a)}removeReference(e,t,a){return Lf(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return Lf(e,t)}br(e,t){return(function(s,l){let c=!1;return CE(s).te((d=>RE(s,d,l).next((m=>(m&&(c=!0),j.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const m=this.br(e,c).next((p=>{if(!p)return l++,a.getEntry(e,c).next((()=>(a.removeEntry(c,Oe.min()),Xr(e).delete((function(S){return[0,On(S.path)]})(c)))))}));s.push(m)}})).next((()=>j.waitFor(s))).next((()=>a.apply(e))).next((()=>l))}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return Lf(e,t)}Sr(e,t){const a=Xr(e);let s,l=Zn.ce;return a.ee({index:N1},(([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==Zn.ce&&t(new ve(gi(s)),l),l=p,s=m):l=Zn.ce})).next((()=>{l!==Zn.ce&&t(new ve(gi(s)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(i,e){return Xr(i).put((function(a,s){return{targetId:0,path:On(a.path),sequenceNumber:s}})(e,i.currentSequenceNumber))}class kE{constructor(){this.changes=new rr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?j.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return Qs(e).put(a)}removeEntry(e,t,a){return Qs(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ed(c),d[d.length-1]]})(t,a))}updateMetadata(e,t){return this.getMetadata(e).next((a=>(a.byteSize+=t,this.Dr(e,a))))}getEntry(e,t){let a=Gt.newInvalidDocument(t);return Qs(e).ee({index:Kf,range:IDBKeyRange.only(hc(t))},((s,l)=>{a=this.Cr(t,l)})).next((()=>a))}vr(e,t){let a={size:0,document:Gt.newInvalidDocument(t)};return Qs(e).ee({index:Kf,range:IDBKeyRange.only(hc(t))},((s,l)=>{a={document:this.Cr(t,l),size:wd(l)}})).next((()=>a))}getEntries(e,t){let a=ma();return this.Fr(e,t,((s,l)=>{const c=this.Cr(s,l);a=a.insert(s,c)})).next((()=>a))}Mr(e,t){let a=ma(),s=new Rt(ve.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);a=a.insert(l,d),s=s.insert(l,wd(c))})).next((()=>({documents:a,Or:s})))}Fr(e,t,a){if(t.isEmpty())return j.resolve();let s=new St(xb);t.forEach((m=>s=s.add(m)));const l=IDBKeyRange.bound(hc(s.first()),hc(s.last())),c=s.getIterator();let d=c.getNext();return Qs(e).ee({index:Kf,range:l},((m,p,v)=>{const S=ve.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&xb(d,S)<0;)a(d,null),d=c.getNext();d&&d.isEqual(S)&&(a(d,p),d=c.hasNext()?c.getNext():null),d?v.j(hc(d)):v.done()})).next((()=>{for(;d;)a(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,a,s,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Ed(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qs(e).J(IDBKeyRange.bound(d,m,!0)).next((p=>{l?.incrementDocumentReadCount(p.length);let v=ma();for(const S of p){const D=this.Cr(ve.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);D.isFoundDocument()&&(nh(t,D)||s.has(D.key))&&(v=v.insert(D.key,D))}return v}))}getAllFromCollectionGroup(e,t,a,s){let l=ma();const c=Mb(t,a),d=Mb(t,pa.max());return Qs(e).ee({index:bT,range:IDBKeyRange.bound(c,d,!0)},((m,p,v)=>{const S=this.Cr(ve.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(S.key,S),l.size===s&&v.done()})).next((()=>l))}newChangeBuffer(e){return new Qz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Nb(e).get(qp).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return Nb(e).put(qp,t)}Cr(e,t){if(t){const a=xz(this.serializer,t);if(!(a.isNoDocument()&&a.version.isEqual(Oe.min())))return a}return Gt.newInvalidDocument(e)}}function OE(i){return new Kz(i)}class Qz extends kE{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new rr((a=>a.toString()),((a,s)=>a.isEqual(s)))}applyChanges(e){const t=[];let a=0,s=new St(((l,c)=>Fe(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=mb(this.Nr.serializer,c);s=s.add(l.path.popLast());const p=wd(m);a+=p-d.size,t.push(this.Nr.addEntry(e,l,m))}else if(a-=d.size,this.trackRemovals){const m=mb(this.Nr.serializer,c.convertToNoDocument(Oe.min()));t.push(this.Nr.addEntry(e,l,m))}})),s.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,a)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((a=>(this.Br.set(t,{size:a.size,readTime:a.document.readTime}),a.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:a,Or:s})=>(s.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:a.get(l).readTime})})),a)))}}function Nb(i){return pn(i,Bc)}function Qs(i){return pn(i,gd)}function hc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Mb(i,e){const t=e.documentKey.path.toArray();return[i,Ed(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function xb(i,e){const t=i.path.toArray(),a=e.path.toArray();let s=0;for(let l=0;l<t.length-2&&l<a.length-2;++l)if(s=Fe(t[l],a[l]),s)return s;return s=Fe(t.length,a.length),s||(s=Fe(t[t.length-2],a[a.length-2]),s||Fe(t[t.length-1],a[a.length-1]))}class Jz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class VE{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&Rc(a.mutation,s,ea.empty(),vt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,$e()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=$e()){const s=pi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=mc();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=pi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,$e())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=ma();const c=zc(),d=(function(){return zc()})();return t.forEach(((m,p)=>{const v=a.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof sr)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Rc(v.mutation,p,v.mutation.getFieldMask(),vt.now())):c.set(p.key,ea.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>d.set(p,new Jz(v,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=zc();let s=new Rt(((c,d)=>c-d)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=a.get(m)||ea.empty();v=d.applyToLocalView(p,v),a.set(m,v);const S=(s.get(d.batchId)||$e()).add(m);s=s.insert(d.batchId,S)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,v=m.value,S=ZT();v.forEach((D=>{if(!l.has(D)){const k=rE(t.get(D),a.get(D));k!==null&&S.set(D,k),l=l.add(D)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,S))}return j.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):j.resolve(pi());let d=Ol,m=l;return c.next((p=>j.forEach(p,((v,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),l.get(v)?j.resolve():this.remoteDocumentCache.getEntry(e,v).next((D=>{m=m.insert(v,D)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,$e()))).next((v=>({batchId:d,changes:WT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((a=>{let s=mc();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=mc();return this.indexManager.getCollectionParents(e,l).next((d=>j.forEach(d,(m=>{const p=(function(S,D){return new th(D,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,a,s).next((v=>{v.forEach(((S,D)=>{c=c.insert(S,D)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Gt.newInvalidDocument(v)))}));let d=mc();return c.forEach(((m,p)=>{const v=l.get(m);v!==void 0&&Rc(v.mutation,p,ea.empty(),vt.now()),nh(t,p)&&(d=d.insert(m,p))})),d}))}}class $z{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:jn(s.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:AE(s.bundledQuery),readTime:jn(s.readTime)}})(t)),j.resolve()}}class Xz{constructor(){this.overlays=new Rt(ve.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const a=pi();return j.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.St(e,t,l)})),j.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.qr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(a)),j.resolve()}getOverlaysForCollection(e,t,a){const s=pi(),l=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>a&&s.set(m.getKey(),m)}return j.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new Rt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>a){let v=l.get(p.largestBatchId);v===null&&(v=pi(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=pi(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=s)););return j.resolve(d)}St(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(a.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new F1(t,a));let l=this.qr.get(t);l===void 0&&(l=$e(),this.qr.set(t,l)),this.qr.set(t,l.add(a.key))}}class Wz{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}class Q1{constructor(){this.Qr=new St(vn.$r),this.Ur=new St(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new vn(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new vn(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new ve(new mt([])),a=new vn(t,e),s=new vn(t,e+1),l=[];return this.Ur.forEachInRange([a,s],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new mt([])),a=new vn(t,e),s=new vn(t,e+1);let l=$e();return this.Ur.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new vn(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class vn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}class Zz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new St(vn.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new U1(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Zr=this.Zr.add(new vn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.ei(a),l=s<0?0:s;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?ao:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new vn(t,0),s=new vn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([a,s],(c=>{const d=this.Xr(c.Yr);l.push(d)})),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new St(Fe);return t.forEach((s=>{const l=new vn(s,0),c=new vn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{a=a.add(d.Yr)}))})),j.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;ve.isDocumentKey(l)||(l=l.child(""));const c=new vn(new ve(l),0);let d=new St(Fe);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!a.isPrefixOf(p)&&(p.length===s&&(d=d.add(m.Yr)),!0)}),c),j.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((a=>{const s=this.Xr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return j.forEach(t.mutations,(s=>{const l=new vn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new vn(t,0),s=this.Zr.firstAfterOrEqual(a);return j.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eR{constructor(e){this.ri=e,this.docs=(function(){return new Rt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return j.resolve(a?a.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let a=ma();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():Gt.newInvalidDocument(s))})),j.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=ma();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||R1(mT(v),a)<=0||(s.has(v.key)||nh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Ae(9500)}ii(e,t){return j.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new tR(this)}getSize(e){return j.resolve(this.size)}}class tR extends kE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(a)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class nR{constructor(e){this.persistence=e,this.si=new rr((t=>fo(t)),eh),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Q1,this.targetCount=0,this.ai=po.ur()}forEachTarget(e,t){return this.si.forEach(((a,s)=>t(s))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),j.waitFor(l).next((()=>s))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return j.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),j.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return j.resolve(a)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}class J1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zn(0),this.li=!1,this.li=!0,this.hi=new Wz,this.referenceDelegate=e(this),this.Pi=new nR(this),this.indexManager=new Uz,this.remoteDocumentCache=(function(s){return new eR(s)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new TE(t),this.Ii=new $z(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new Zz(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){oe("MemoryPersistence","Starting transaction:",e);const s=new aR(this.ci.next());return this.referenceDelegate.Ei(),a(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ai(e,t){return j.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class aR extends pT{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.Ri=new Q1,this.Vi=null}static mi(e){return new em(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),j.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.fi.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(a=>{const s=ve.fromPath(a);return this.gi(e,s).next((l=>{l||t.removeEntry(s,Oe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Id{constructor(e,t){this.persistence=e,this.pi=new rr((a=>On(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=xE(this,t)}static mi(e,t){return new Id(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((a,s)=>this.br(e,a,s).next((l=>l?j.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Oe.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),j.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jf(e.data.value)),t}br(e,t,a){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return j.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class iR{constructor(e){this.serializer=e}k(e,t,a,s){const l=new Ud("createOrUpgrade",t);a<1&&s>=1&&((function(m){m.createObjectStore(Zc)})(e),(function(m){m.createObjectStore(Lc,{keyPath:_D}),m.createObjectStore(Qa,{keyPath:Y2,autoIncrement:!0}).createIndex(no,q2,{unique:!0}),m.createObjectStore(Vl)})(e),kb(e),(function(m){m.createObjectStore(Xs)})(e));let c=j.resolve();return a<3&&s>=3&&(a!==0&&((function(m){m.deleteObjectStore(Ll),m.deleteObjectStore(Pl),m.deleteObjectStore(io)})(e),kb(e)),c=c.next((()=>(function(m){const p=m.store(io),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Oe.min().toTimestamp(),targetCount:0};return p.put(pd,v)})(l)))),a<4&&s>=4&&(a!==0&&(c=c.next((()=>(function(m,p){return p.store(Qa).J().next((S=>{m.deleteObjectStore(Qa),m.createObjectStore(Qa,{keyPath:Y2,autoIncrement:!0}).createIndex(no,q2,{unique:!0});const D=p.store(Qa),k=S.map((H=>D.put(H)));return j.waitFor(k)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(Bl,{keyPath:DD})})(e)}))),a<5&&s>=5&&(c=c.next((()=>this.yi(l)))),a<6&&s>=6&&(c=c.next((()=>((function(m){m.createObjectStore(Bc)})(e),this.wi(l))))),a<7&&s>=7&&(c=c.next((()=>this.Si(l)))),a<8&&s>=8&&(c=c.next((()=>this.bi(e,l)))),a<9&&s>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),a<10&&s>=10&&(c=c.next((()=>this.Di(l)))),a<11&&s>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Fd,{keyPath:zD})})(e),(function(m){m.createObjectStore(Yd,{keyPath:RD})})(e)}))),a<12&&s>=12&&(c=c.next((()=>{(function(m){const p=m.createObjectStore(qd,{keyPath:VD});p.createIndex(Kp,PD,{unique:!1}),p.createIndex(AT,LD,{unique:!1})})(e)}))),a<13&&s>=13&&(c=c.next((()=>(function(m){const p=m.createObjectStore(gd,{keyPath:bD});p.createIndex(Kf,SD),p.createIndex(bT,TD)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(Xs)))),a<14&&s>=14&&(c=c.next((()=>this.Fi(e,l)))),a<15&&s>=15&&(c=c.next((()=>(function(m){m.createObjectStore(M1,{keyPath:CD,autoIncrement:!0}).createIndex(Gp,ND,{unique:!1}),m.createObjectStore(Ac,{keyPath:MD}).createIndex(TT,xD,{unique:!1}),m.createObjectStore(wc,{keyPath:kD}).createIndex(ET,OD,{unique:!1})})(e)))),a<16&&s>=16&&(c=c.next((()=>{t.objectStore(Ac).clear()})).next((()=>{t.objectStore(wc).clear()}))),a<17&&s>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(x1,{keyPath:BD})})(e)}))),a<18&&s>=18&&$S()&&(c=c.next((()=>{t.objectStore(Ac).clear()})).next((()=>{t.objectStore(wc).clear()}))),c}wi(e){let t=0;return e.store(Xs).ee(((a,s)=>{t+=wd(s)})).next((()=>{const a={byteSize:t};return e.store(Bc).put(qp,a)}))}yi(e){const t=e.store(Lc),a=e.store(Qa);return t.J().next((s=>j.forEach(s,(l=>{const c=IDBKeyRange.bound([l.userId,ao],[l.userId,l.lastAcknowledgedBatchId]);return a.J(no,c).next((d=>j.forEach(d,(m=>{Ce(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const p=Zs(this.serializer,m);return zE(e,l.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ll),a=e.store(Xs);return e.store(io).get(pd).next((s=>{const l=[];return a.ee(((c,d)=>{const m=new mt(c),p=(function(S){return[0,On(S)]})(m);l.push(t.get(p).next((v=>v?j.resolve():(S=>t.put({targetId:0,path:On(S),sequenceNumber:s.highestListenSequenceNumber}))(m))))})).next((()=>j.waitFor(l)))}))}bi(e,t){e.createObjectStore(jc,{keyPath:ID});const a=t.store(jc),s=new K1,l=c=>{if(s.add(c)){const d=c.lastSegment(),m=c.popLast();return a.put({collectionId:d,parent:On(m)})}};return t.store(Xs).ee({X:!0},((c,d)=>{const m=new mt(c);return l(m.popLast())})).next((()=>t.store(Vl).ee({X:!0},(([c,d,m],p)=>{const v=gi(d);return l(v.popLast())}))))}Di(e){const t=e.store(Pl);return t.ee(((a,s)=>{const l=pc(s),c=EE(this.serializer,l);return t.put(c)}))}Ci(e,t){const a=t.store(Xs),s=[];return a.ee(((l,c)=>{const d=t.store(gd),m=(function(S){return S.document?new ve(mt.fromString(S.document.name).popFirst(5)):S.noDocument?ve.fromSegments(S.noDocument.path):S.unknownDocument?ve.fromSegments(S.unknownDocument.path):Ae(36783)})(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(d.put(p))})).next((()=>j.waitFor(s)))}Fi(e,t){const a=t.store(Qa),s=OE(this.serializer),l=new J1(em.mi,this.serializer.yt);return a.J().next((c=>{const d=new Map;return c.forEach((m=>{let p=d.get(m.userId)??$e();Zs(this.serializer,m).keys().forEach((v=>p=p.add(v))),d.set(m.userId,p)})),j.forEach(d,((m,p)=>{const v=new Mn(p),S=Wd.wt(this.serializer,v),D=l.getIndexManager(v),k=Zd.wt(v,this.serializer,D,l.referenceDelegate);return new VE(s,k,S,D).recalculateAndSaveOverlaysForDocumentKeys(new Qp(t,Zn.ce),m).next()}))}))}}function kb(i){i.createObjectStore(Ll,{keyPath:AD}).createIndex(N1,wD,{unique:!0}),i.createObjectStore(Pl,{keyPath:"targetId"}).createIndex(ST,ED,{unique:!0}),i.createObjectStore(io)}const Qr="IndexedDbPersistence",bp=18e5,Sp=5e3,Tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rR="main";class $1{constructor(e,t,a,s,l,c,d,m,p,v,S=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.Mi=l,this.window=c,this.document=d,this.xi=p,this.Oi=v,this.Ni=S,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=D=>Promise.resolve(),!$1.v())throw new me(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gz(this,s),this.$i=t+rR,this.serializer=new TE(m),this.Ui=new ss(this.$i,this.Ni,new iR(this.serializer)),this.hi=new Oz,this.Pi=new Fz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OE(this.serializer),this.Ii=new kz,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Zt(Qr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(te.FAILED_PRECONDITION,Tp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ms(e))return oe(Qr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(Qr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return fc(e).get(ml).next((t=>j.resolve(this.es(t))))}ts(e){return Bf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,bp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const a=pn(t,Bl);return a.J().next((s=>{const l=this.ss(s,bp),c=s.filter((d=>l.indexOf(d)===-1));return j.forEach(c,(d=>a.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):fc(e).get(ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Sp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new me(te.FAILED_PRECONDITION,Tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bf(e).J().next((a=>this.ss(a,Sp).find((s=>{if(this.clientId!==s.clientId){const l=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,d=this.networkEnabled===s.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&oe(Qr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Zc,Bl],(e=>{const t=new Qp(e,Zn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((a=>this.rs(a.updateTimeMs,t)&&!this.us(a.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Bf(e).J().next((t=>this.ss(t,bp).map((a=>a.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Zd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Wd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,a){oe(Qr,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?HD:m===17?zT:m===16?UD:m===15?k1:m===14?DT:m===13?IT:m===12?jD:m===11?wT:void Ae(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,l,(d=>(c=new Qp(d,this.ci?this.ci.next():Zn.ce),t==="readwrite-primary"?this.Hi(c).next((m=>!!m||this.Yi(c))).next((m=>{if(!m)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new me(te.FAILED_PRECONDITION,gT);return a(c)})).next((m=>this.Xi(c).next((()=>m)))):this.Is(c).next((()=>a(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return fc(e).get(ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Sp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(te.FAILED_PRECONDITION,Tp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fc(e).put(ml,t)}static v(){return ss.v()}Zi(e){const t=fc(e);return t.get(ml).next((a=>this.es(a)?(oe(Qr,"Releasing primary lease."),t.delete(ml)):j.resolve()))}rs(e,t){const a=Date.now();return!(e<a-t)&&(!(e>a)||(Zt(`Detected an update time that is in the future: ${e} > ${a}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;JS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return oe(Qr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Zt(Qr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fc(i){return pn(i,Zc)}function Bf(i){return pn(i,Bl)}function PE(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class X1{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=s}static As(e,t){let a=$e(),s=$e();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new X1(e,t.fromCache,a,s)}}class sR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class LE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JS()?8:yT(gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new sR;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,a,s){return a.documentReadCount<this.fs?(bl()<=at.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(bl()<=at.DEBUG&&oe("QueryEngine","Query:",Sl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.gs*s?(bl()<=at.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ga(t))):j.resolve())}ys(e,t){if(ib(t))return j.resolve(null);let a=ga(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=t1(t,null,"F"),a=ga(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=$e(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((m=>{const p=this.Ds(t,d);return this.Cs(t,p,c,m.readTime)?this.ys(e,t1(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,a,s){return ib(t)||s.isEqual(Oe.min())?j.resolve(null):this.ps.getDocuments(e,a).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,a,s)?j.resolve(null):(bl()<=at.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sl(t)),this.vs(e,c,t,dT(s,Ol)).next((d=>d)))}))}Ds(e,t){let a=new St($T(e));return t.forEach(((s,l)=>{nh(e,l)&&(a=a.add(l))})),a}Cs(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Ss(e,t,a){return bl()<=at.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Sl(t)),this.ps.getDocumentsMatchingQuery(e,t,pa.min(),a)}vs(e,t,a,s){return this.ps.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const W1="LocalStore",oR=3e8;class lR{constructor(e,t,a,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Rt(Fe),this.xs=new rr((l=>fo(l)),eh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BE(i,e,t,a){return new lR(i,e,t,a)}async function jE(i,e){const t=De(i);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let m=$e();for(const p of s){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(a,m).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function uR(i,e){const t=De(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,v){const S=p.batch,D=S.keys();let k=j.resolve();return D.forEach((H=>{k=k.next((()=>v.getEntry(m,H))).next((q=>{const $=p.docVersions.get(H);Ce($!==null,48541),q.version.compareTo($)<0&&(S.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),v.addEntry(q)))}))})),k.next((()=>d.mutationQueue.removeMutationBatch(m,S)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let m=$e();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function UE(i){const e=De(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function cR(i,e){const t=De(i),a=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const d=[];e.targetChanges.forEach(((v,S)=>{const D=s.get(S);if(!D)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,S).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,S))));let k=D.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?k=k.withResumeToken(en.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(v.resumeToken,a)),s=s.insert(S,k),(function(q,$,W){return q.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=oR?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(D,k,v)&&d.push(t.Pi.updateTargetData(l,k))}));let m=ma(),p=$e();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(hR(l,c,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!a.isEqual(Oe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((S=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(v)}return j.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=s,l)))}function hR(i,e,t){let a=$e(),s=$e();return t.forEach((l=>a=a.add(l))),e.getEntries(i,a).next((l=>{let c=ma();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),m.isNoDocument()&&m.version.isEqual(Oe.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):oe(W1,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{ks:c,qs:s}}))}function fR(i,e){const t=De(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=ao),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function Dd(i,e){const t=De(i);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.Pi.getTargetData(a,e).next((l=>l?(s=l,j.resolve(s)):t.Pi.allocateTargetId(a).next((c=>(s=new Ji(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.Ms.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function Kl(i,e,t){const a=De(i),s=a.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ms(c))throw c;oe(W1,`Failed to update sequence numbers for target ${e}: ${c}`)}a.Ms=a.Ms.remove(e),a.xs.delete(s.target)}function u1(i,e,t){const a=De(i);let s=Oe.min(),l=$e();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,v){const S=De(m),D=S.xs.get(v);return D!==void 0?j.resolve(S.Ms.get(D)):S.Pi.getTargetData(p,v)})(a,c,ga(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>a.Fs.getDocumentsMatchingQuery(c,e,t?s:Oe.min(),t?l:$e()))).next((d=>(YE(a,JT(e),d),{documents:d,Qs:l})))))}function HE(i,e){const t=De(i),a=De(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(l=>a.At(l,e).next((c=>c?c.target:null))))}function FE(i,e){const t=De(i),a=t.Os.get(e)||Oe.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,dT(a,Ol),Number.MAX_SAFE_INTEGER))).then((s=>(YE(t,e,s),s)))}function YE(i,e,t){let a=i.Os.get(e)||Oe.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),i.Os.set(e,a)}const qE="firestore_clients";function Ob(i,e){return`${qE}_${i}_${e}`}const GE="firestore_mutations";function Vb(i,e,t){let a=`${GE}_${i}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}const KE="firestore_targets";function Ep(i,e){return`${KE}_${i}_${e}`}const di="SharedClientState";class zd{constructor(e,t,a,s){this.user=e,this.batchId=t,this.state=a,this.error=s}static Ws(e,t,a){const s=JSON.parse(a);let l,c=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new me(s.error.code,s.error.message))),c?new zd(e,t,s.state,l):(Zt(di,`Failed to parse mutation state for ID '${t}': ${a}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cc{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static Ws(e,t){const a=JSON.parse(t);let s,l=typeof a=="object"&&["not-current","current","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return l&&a.error&&(l=typeof a.error.message=="string"&&typeof a.error.code=="string",l&&(s=new me(a.error.code,a.error.message))),l?new Cc(e,a.state,s):(Zt(di,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const a=JSON.parse(t);let s=typeof a=="object"&&a.activeTargetIds instanceof Array,l=B1();for(let c=0;s&&c<a.activeTargetIds.length;++c)s=_T(a.activeTargetIds[c]),l=l.add(a.activeTargetIds[c]);return s?new Rd(e,l):(Zt(di,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Z1{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Z1(t.clientId,t.onlineState):(Zt(di,`Failed to parse online state: ${e}`),null)}}class c1{constructor(){this.activeTargetIds=B1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ap{constructor(e,t,a,s,l){this.window=e,this.Mi=t,this.persistenceKey=a,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Rt(Fe),this.started=!1,this.Xs=[];const c=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=Ob(this.persistenceKey,this.Js),this.no=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new c1),this.ro=new RegExp(`^${qE}_${c}_([^_]*)$`),this.io=new RegExp(`^${GE}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${KE}_${c}_(\\d+)$`),this.oo=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this._o=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const a of e){if(a===this.Js)continue;const s=this.getItem(Ob(this.persistenceKey,a));if(s){const l=Rd.Ws(a,s);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const a=this.uo(t);a&&this.co(a)}for(const a of this.Xs)this.Ys(a);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((a,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,a){this.ho(e,t,a),this.Po(e)}addLocalQueryTarget(e,t=!0){let a="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ep(this.persistenceKey,e));if(s){const l=Cc.Ws(e,s);l&&(a=l.state)}}return t&&this.To.zs(e),this.ao(),a}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ep(this.persistenceKey,e))}updateQueryState(e,t,a){this.Io(e,t,a)}handleUserChange(e,t,a){t.forEach((s=>{this.Po(s)})),this.currentUser=e,a.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe(di,"READ",e,t),t}setItem(e,t){oe(di,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe(di,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(oe(di,"EVENT",t.key,t.newValue),t.key===this.eo)return void Zt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const a=this.Ro(t.key);return this.Vo(a,null)}{const a=this.mo(t.key,t.newValue);if(a)return this.Vo(a.clientId,a)}}else if(this.io.test(t.key)){if(t.newValue!==null){const a=this.fo(t.key,t.newValue);if(a)return this.po(a)}}else if(this.so.test(t.key)){if(t.newValue!==null){const a=this.yo(t.key,t.newValue);if(a)return this.wo(a)}}else if(t.key===this.oo){if(t.newValue!==null){const a=this.uo(t.newValue);if(a)return this.co(a)}}else if(t.key===this.no){const a=(function(l){let c=Zn.ce;if(l!=null)try{const d=JSON.parse(l);Ce(typeof d=="number",30636,{So:l}),c=d}catch(d){Zt(di,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);a!==Zn.ce&&this.sequenceNumberHandler(a)}else if(t.key===this._o){const a=this.bo(t.newValue);await Promise.all(a.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,a){const s=new zd(this.currentUser,e,t,a),l=Vb(this.persistenceKey,this.currentUser,e);this.setItem(l,s.Gs())}Po(e){const t=Vb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,a){const s=Ep(this.persistenceKey,e),l=new Cc(e,t,a);this.setItem(s,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const a=this.Ro(e);return Rd.Ws(a,t)}fo(e,t){const a=this.io.exec(e),s=Number(a[1]),l=a[2]!==void 0?a[2]:null;return zd.Ws(new Mn(l),s,t)}yo(e,t){const a=this.so.exec(e),s=Number(a[1]);return Cc.Ws(s,t)}uo(e){return Z1.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);oe(di,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const a=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),l=this.lo(a),c=[],d=[];return l.forEach((m=>{s.has(m)||c.push(m)})),s.forEach((m=>{l.has(m)||d.push(m)})),this.syncEngine.Fo(c,d).then((()=>{this.Zs=a}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=B1();return e.forEach(((a,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class QE{constructor(){this.Mo=new c1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new c1,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dR{Oo(e){}shutdown(){}}const Pb="ConnectivityMonitor";class Lb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Pb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Pb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let jf=null;function h1(){return jf===null?jf=(function(){return 268435456+Math.round(2147483648*Math.random())})():jf++,"0x"+jf.toString(16)}const wp="RestConnection",mR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${s}`,this.Wo=this.databaseId.database===yd?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Go(e,t,a,s,l){const c=h1(),d=this.zo(e,t.toUriEncodedString());oe(wp,`Sending RPC '${e}' ${c}:`,d,a);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,s,l);const{host:p}=new URL(d),v=eu(p);return this.Jo(e,d,m,a,v).then((S=>(oe(wp,`Received RPC '${e}' ${c}: `,S),S)),(S=>{throw Oc(wp,`RPC '${e}' ${c} failed with error: `,S,"url: ",d,"request:",a),S}))}Ho(e,t,a,s,l,c){return this.Go(e,t,a,s,l)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}zo(e,t){const a=mR[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}class pR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Cn="WebChannelConnection";class yR extends gR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,s,l){const c=h1();return new Promise(((d,m)=>{const p=new iT;p.setWithCredentials(!0),p.listenOnce(rT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Yf.NO_ERROR:const S=p.getResponseJson();oe(Cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),d(S);break;case Yf.TIMEOUT:oe(Cn,`RPC '${e}' ${c} timed out`),m(new me(te.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const D=p.getStatus();if(oe(Cn,`RPC '${e}' ${c} failed with status:`,D,"response text:",p.getResponseText()),D>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const H=k?.error;if(H&&H.status&&H.message){const q=(function(W){const le=W.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(le)>=0?le:te.UNKNOWN})(H.status);m(new me(q,H.message))}else m(new me(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new me(te.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{oe(Cn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(s);oe(Cn,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",v,a,15)}))}T_(e,t,a){const s=h1(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lT(),d=oT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,a),m.encodeInitMessageHeaders=!0;const v=l.join("");oe(Cn,`Creating RPC '${e}' stream ${s}: ${v}`,m);const S=c.createWebChannel(v,m);this.I_(S);let D=!1,k=!1;const H=new pR({Yo:$=>{k?oe(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(D||(oe(Cn,`Opening RPC '${e}' stream ${s} transport.`),S.open(),D=!0),oe(Cn,`RPC '${e}' stream ${s} sending:`,$),S.send($))},Zo:()=>S.close()}),q=($,W,le)=>{$.listen(W,(Q=>{try{le(Q)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return q(S,dc.EventType.OPEN,(()=>{k||(oe(Cn,`RPC '${e}' stream ${s} transport opened.`),H.o_())})),q(S,dc.EventType.CLOSE,(()=>{k||(k=!0,oe(Cn,`RPC '${e}' stream ${s} transport closed`),H.a_(),this.E_(S))})),q(S,dc.EventType.ERROR,($=>{k||(k=!0,Oc(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,$.name,"Message:",$.message),H.a_(new me(te.UNAVAILABLE,"The operation could not be completed")))})),q(S,dc.EventType.MESSAGE,($=>{if(!k){const W=$.data[0];Ce(!!W,16349);const le=W,Q=le?.error||le[0]?.error;if(Q){oe(Cn,`RPC '${e}' stream ${s} received error:`,Q);const fe=Q.status;let he=(function(I){const z=ln[I];if(z!==void 0)return lE(z)})(fe),ne=Q.message;he===void 0&&(he=te.INTERNAL,ne="Unknown error status: "+fe+" with message "+Q.message),k=!0,H.a_(new me(he,ne)),S.close()}else oe(Cn,`RPC '${e}' stream ${s} received:`,W),H.u_(W)}})),q(d,sT.STAT_EVENT,($=>{$.stat===Hp.PROXY?oe(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===Hp.NOPROXY&&oe(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function JE(){return typeof window<"u"?window:null}function ed(){return typeof document<"u"?document:null}function tm(i){return new Ez(i,!0)}class $E{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=s,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Bb="PersistentStream";class XE{constructor(e,t,a,s,l,c,d,m){this.Mi=e,this.S_=a,this.b_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $E(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Zt(t.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new me(te.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(Bb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(oe(Bb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _R extends XE{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Iz(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Oe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Oe.min():c.readTime?jn(c.readTime):Oe.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=i1(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=vd(m)?{documents:pE(l,m)}:{query:yE(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=hE(l,c.resumeToken);const p=n1(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Oe.min())>0){d.readTime=Gl(l,c.snapshotVersion.toTimestamp());const p=n1(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const a=zz(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=i1(this.serializer),t.removeTarget=e,this.q_(t)}}class vR extends XE{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Dz(e.writeResults,e.commitTime),a=jn(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=i1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>Td(this.serializer,a)))};this.q_(t)}}class bR{}class SR extends bR{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,a1(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(te.UNKNOWN,l.toString())}))}Ho(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,a1(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(te.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zt(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const yo="RemoteStore";class ER{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{a.enqueueAndForget((async()=>{bo(this)&&(oe(yo,"Restarting streams for network reachability change."),await(async function(m){const p=De(m);p.Ea.add(4),await sh(p),p.Ra.set("Unknown"),p.Ea.delete(4),await nm(p)})(this))}))})),this.Ra=new TR(a,s)}}async function nm(i){if(bo(i))for(const e of i.da)await e(!0)}async function sh(i){for(const e of i.da)await e(!1)}function am(i,e){const t=De(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ny(t)?ty(t):ru(t).O_()&&ey(t,e))}function Ql(i,e){const t=De(i),a=ru(t);t.Ia.delete(e),a.O_()&&WE(t,e),t.Ia.size===0&&(a.O_()?a.L_():bo(t)&&t.Ra.set("Unknown"))}function ey(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ru(i).Y_(e)}function WE(i,e){i.Va.Ue(e),ru(i).Z_(e)}function ty(i){i.Va=new vz({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ru(i).start(),i.Ra.ua()}function ny(i){return bo(i)&&!ru(i).x_()&&i.Ia.size>0}function bo(i){return De(i).Ea.size===0}function ZE(i){i.Va=void 0}async function AR(i){i.Ra.set("Online")}async function wR(i){i.Ia.forEach(((e,t)=>{ey(i,e)}))}async function IR(i,e){ZE(i),ny(i)?(i.Ra.ha(e),ty(i)):i.Ra.set("Unknown")}async function DR(i,e,t){if(i.Ra.set("Online"),e instanceof cE&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.Va.removeTarget(d))})(i,e)}catch(a){oe(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Cd(i,a)}else if(e instanceof Wf?i.Va.Ze(e):e instanceof uE?i.Va.st(e):i.Va.tt(e),!t.isEqual(Oe.min()))try{const a=await UE(i.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,p)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),WE(l,m);const S=new Ji(v.target,m,p,v.sequenceNumber);ey(l,S)})),l.remoteSyncer.applyRemoteEvent(d)})(i,t)}catch(a){oe(yo,"Failed to raise snapshot:",a),await Cd(i,a)}}async function Cd(i,e,t){if(!ms(e))throw e;i.Ea.add(1),await sh(i),i.Ra.set("Offline"),t||(t=()=>UE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{oe(yo,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await nm(i)}))}function eA(i,e){return e().catch((t=>Cd(i,t,e)))}async function iu(i){const e=De(i),t=hs(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ao;for(;zR(e);)try{const s=await fR(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,RR(e,s)}catch(s){await Cd(e,s)}tA(e)&&nA(e)}function zR(i){return bo(i)&&i.Ta.length<10}function RR(i,e){i.Ta.push(e);const t=hs(i);t.O_()&&t.X_&&t.ea(e.mutations)}function tA(i){return bo(i)&&!hs(i).x_()&&i.Ta.length>0}function nA(i){hs(i).start()}async function CR(i){hs(i).ra()}async function NR(i){const e=hs(i);for(const t of i.Ta)e.ea(t.mutations)}async function MR(i,e,t){const a=i.Ta.shift(),s=H1.from(a,e,t);await eA(i,(()=>i.remoteSyncer.applySuccessfulWrite(s))),await iu(i)}async function xR(i,e){e&&hs(i).X_&&await(async function(a,s){if((function(c){return pz(c)&&c!==te.ABORTED})(s.code)){const l=a.Ta.shift();hs(a).B_(),await eA(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await iu(a)}})(i,e),tA(i)&&nA(i)}async function jb(i,e){const t=De(i);t.asyncQueue.verifyOperationInProgress(),oe(yo,"RemoteStore received new credentials");const a=bo(t);t.Ea.add(3),await sh(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nm(t)}async function f1(i,e){const t=De(i);e?(t.Ea.delete(2),await nm(t)):e||(t.Ea.add(2),await sh(t),t.Ra.set("Unknown"))}function ru(i){return i.ma||(i.ma=(function(t,a,s){const l=De(t);return l.sa(),new _R(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(i.datastore,i.asyncQueue,{Xo:AR.bind(null,i),t_:wR.bind(null,i),r_:IR.bind(null,i),H_:DR.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),ny(i)?ty(i):i.Ra.set("Unknown")):(await i.ma.stop(),ZE(i))}))),i.ma}function hs(i){return i.fa||(i.fa=(function(t,a,s){const l=De(t);return l.sa(),new vR(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:CR.bind(null,i),r_:xR.bind(null,i),ta:NR.bind(null,i),na:MR.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await iu(i)):(await i.fa.stop(),i.Ta.length>0&&(oe(yo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class ay{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new ay(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iy(i,e){if(Zt("AsyncQueue",`${e}: ${i}`),ms(i))return new me(te.UNAVAILABLE,`${e}: ${i}`);throw i}class zl{static emptySet(e){return new zl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||ve.comparator(t.key,a.key):(t,a)=>ve.comparator(t.key,a.key),this.keyedMap=mc(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new zl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Ub{constructor(){this.ga=new Rt(ve.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Jl{constructor(e,t,a,s,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Jl(e,t,zl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}class kR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class OR{constructor(){this.queries=Hb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=De(t),l=s.queries;s.queries=Hb(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(a)}))})(this,new me(te.ABORTED,"Firestore shutting down"))}}function Hb(){return new rr((i=>QT(i)),Jd)}async function aA(i,e){const t=De(i);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.ba()&&e.Da()&&(a=2):(l=new kR,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=iy(c,`Initialization of query '${Sl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ry(t)}async function iA(i,e){const t=De(i),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?s=e.Da()?0:1:!l.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function VR(i,e){const t=De(i);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(s)&&(a=!0);c.wa=s}}a&&ry(t)}function PR(i,e,t){const a=De(i),s=a.queries.get(e);if(s)for(const l of s.Sa)l.onError(t);a.queries.delete(e)}function ry(i){i.Ca.forEach((e=>{e.next()}))}var d1,Fb;(Fb=d1||(d1={})).Ma="default",Fb.Cache="cache";class rA{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Jl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==d1.Cache}}class sA{constructor(e){this.key=e}}class oA{constructor(e){this.key=e}}class LR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=$T(e),this.tu=new zl(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new Ub,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,S)=>{const D=s.get(v),k=nh(this.query,S)?S:null,H=!!D&&this.mutatedKeys.has(D.key),q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let $=!1;D&&k?D.data.isEqual(k.data)?H!==q&&(a.track({type:3,doc:k}),$=!0):this.su(D,k)||(a.track({type:2,doc:k}),$=!0,(m&&this.eu(k,m)>0||p&&this.eu(k,p)<0)&&(d=!0)):!D&&k?(a.track({type:0,doc:k}),$=!0):D&&!k&&(a.track({type:1,doc:D}),$=!0,(m||p)&&(d=!0)),$&&(k?(c=c.add(k),l=q?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:c,iu:a,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,S)=>(function(k,H){const q=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:$})}};return q(k)-q(H)})(v.type,S.type)||this.eu(v.doc,S.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],m=this.Xa.size===0&&this.current&&!s?1:0,p=m!==this.Za;return this.Za=m,c.length!==0||p?{snapshot:new Jl(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ub,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new oA(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new sA(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const su="SyncEngine";class BR{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class jR{constructor(e){this.key=e,this.hu=!1}}class UR{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new rr((d=>QT(d)),Jd),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(ve.comparator),this.Au=new Map,this.Ru=new Q1,this.Vu={},this.mu=new Map,this.fu=po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HR(i,e,t=!0){const a=im(i);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await lA(a,e,t,!0),s}async function FR(i,e){const t=im(i);await lA(t,e,!0,!1)}async function lA(i,e,t,a){const s=await Dd(i.localStore,ga(e)),l=s.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await sy(i,e,l,c==="current",s.resumeToken)),i.isPrimaryClient&&t&&am(i.remoteStore,s),d}async function sy(i,e,t,a,s){i.pu=(S,D,k)=>(async function(q,$,W,le){let Q=$.view.ru(W);Q.Cs&&(Q=await u1(q.localStore,$.query,!1).then((({documents:A})=>$.view.ru(A,Q))));const fe=le&&le.targetChanges.get($.targetId),he=le&&le.targetMismatches.get($.targetId)!=null,ne=$.view.applyChanges(Q,q.isPrimaryClient,fe,he);return m1(q,$.targetId,ne.au),ne.snapshot})(i,S,D,k);const l=await u1(i.localStore,e,!0),c=new LR(e,l.Qs),d=c.ru(l.documents),m=rh.createSynthesizedTargetChangeForCurrentChange(t,a&&i.onlineState!=="Offline",s),p=c.applyChanges(d,i.isPrimaryClient,m);m1(i,t,p.au);const v=new BR(e,t,c);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function YR(i,e,t){const a=De(i),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Jd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await Kl(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&Ql(a.remoteStore,s.targetId),$l(a,s.targetId)})).catch(ds)):($l(a,s.targetId),await Kl(a.localStore,s.targetId,!0))}async function qR(i,e){const t=De(i),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Ql(t.remoteStore,a.targetId))}async function GR(i,e,t){const a=cy(i);try{const s=await(function(c,d){const m=De(c),p=vt.now(),v=d.reduce(((k,H)=>k.add(H.key)),$e());let S,D;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let H=ma(),q=$e();return m.Ns.getEntries(k,v).next(($=>{H=$,H.forEach(((W,le)=>{le.isValidDocument()||(q=q.add(W))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,H))).next(($=>{S=$;const W=[];for(const le of d){const Q=mz(le,S.get(le.key).overlayedDocument);Q!=null&&W.push(new sr(le.key,Q,LT(Q.value.mapValue),Dn.exists(!0)))}return m.mutationQueue.addMutationBatch(k,p,W,d)})).next(($=>{D=$;const W=$.applyToLocalDocumentSet(S,q);return m.documentOverlayCache.saveOverlays(k,$.batchId,W)}))})).then((()=>({batchId:D.batchId,changes:WT(S)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,m){let p=c.Vu[c.currentUser.toKey()];p||(p=new Rt(Fe)),p=p.insert(d,m),c.Vu[c.currentUser.toKey()]=p})(a,s.batchId,t),await ps(a,s.changes),await iu(a.remoteStore)}catch(s){const l=iy(s,"Failed to persist write");t.reject(l)}}async function uA(i,e){const t=De(i);try{const a=await cR(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ce(c.hu,14607):s.removedDocuments.size>0&&(Ce(c.hu,42227),c.hu=!1))})),await ps(t,a,e)}catch(a){await ds(a)}}function Yb(i,e,t){const a=De(i);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const m=De(c);m.onlineState=d;let p=!1;m.queries.forEach(((v,S)=>{for(const D of S.Sa)D.va(d)&&(p=!0)})),p&&ry(m)})(a.eventManager,e),s.length&&a.Pu.H_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function KR(i,e,t){const a=De(i);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new Rt(ve.comparator);c=c.insert(l,Gt.newNoDocument(l,Oe.min()));const d=$e().add(l),m=new ih(Oe.min(),new Map,new Rt(Fe),c,d);await uA(a,m),a.du=a.du.remove(l),a.Au.delete(e),uy(a)}else await Kl(a.localStore,e,!1).then((()=>$l(a,e,t))).catch(ds)}async function QR(i,e){const t=De(i),a=e.batch.batchId;try{const s=await uR(t.localStore,e);ly(t,a,null),oy(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await ps(t,s)}catch(s){await ds(s)}}async function JR(i,e,t){const a=De(i);try{const s=await(function(c,d){const m=De(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,d).next((S=>(Ce(S!==null,37113),v=S.keys(),m.mutationQueue.removeMutationBatch(p,S)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(a.localStore,e);ly(a,e,t),oy(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await ps(a,s)}catch(s){await ds(s)}}function oy(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function ly(i,e,t){const a=De(i);let s=a.Vu[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.Vu[a.currentUser.toKey()]=s}}function $l(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.Iu.get(e))i.Tu.delete(a),t&&i.Pu.yu(a,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((a=>{i.Ru.containsKey(a)||cA(i,a)}))}function cA(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Ql(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),uy(i))}function m1(i,e,t){for(const a of t)a instanceof sA?(i.Ru.addReference(a.key,e),$R(i,a)):a instanceof oA?(oe(su,"Document no longer in limbo: "+a.key),i.Ru.removeReference(a.key,e),i.Ru.containsKey(a.key)||cA(i,a.key)):Ae(19791,{wu:a})}function $R(i,e){const t=e.key,a=t.path.canonicalString();i.du.get(t)||i.Eu.has(a)||(oe(su,"New document in limbo: "+t),i.Eu.add(a),uy(i))}function uy(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ve(mt.fromString(e)),a=i.fu.next();i.Au.set(a,new jR(t)),i.du=i.du.insert(t,a),am(i.remoteStore,new Ji(ga(Qd(t.path)),a,"TargetPurposeLimboResolution",Zn.ce))}}async function ps(i,e,t){const a=De(i),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,m)=>{c.push(a.pu(m,e,t).then((p=>{if((p||t)&&a.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;a.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){s.push(p);const v=X1.As(m.targetId,p);l.push(v)}})))})),await Promise.all(c),a.Pu.H_(s),await(async function(m,p){const v=De(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>j.forEach(p,(D=>j.forEach(D.Es,(k=>v.persistence.referenceDelegate.addReference(S,D.targetId,k))).next((()=>j.forEach(D.ds,(k=>v.persistence.referenceDelegate.removeReference(S,D.targetId,k)))))))))}catch(S){if(!ms(S))throw S;oe(W1,"Failed to update sequence numbers: "+S)}for(const S of p){const D=S.targetId;if(!S.fromCache){const k=v.Ms.get(D),H=k.snapshotVersion,q=k.withLastLimboFreeSnapshotVersion(H);v.Ms=v.Ms.insert(D,q)}}})(a.localStore,l))}async function XR(i,e){const t=De(i);if(!t.currentUser.isEqual(e)){oe(su,"User change. New user:",e.toKey());const a=await jE(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new me(te.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await ps(t,a.Ls)}}function WR(i,e){const t=De(i),a=t.Au.get(e);if(a&&a.hu)return $e().add(a.key);{let s=$e();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}async function ZR(i,e){const t=De(i),a=await u1(t.localStore,e.query,!0),s=e.view.cu(a);return t.isPrimaryClient&&m1(t,e.targetId,s.au),s}async function e8(i,e){const t=De(i);return FE(t.localStore,e).then((a=>ps(t,a)))}async function t8(i,e,t,a){const s=De(i),l=await(function(d,m){const p=De(d),v=De(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(S=>v.er(S,m).next((D=>D?p.localDocuments.getDocuments(S,D):j.resolve(null)))))})(s.localStore,e);l!==null?(t==="pending"?await iu(s.remoteStore):t==="acknowledged"||t==="rejected"?(ly(s,e,a||null),oy(s,e),(function(d,m){De(De(d).mutationQueue).ir(m)})(s.localStore,e)):Ae(6720,"Unknown batchState",{Su:t}),await ps(s,l)):oe(su,"Cannot apply mutation batch with id: "+e)}async function n8(i,e){const t=De(i);if(im(t),cy(t),e===!0&&t.gu!==!0){const a=t.sharedClientState.getAllActiveQueryTargets(),s=await qb(t,a.toArray());t.gu=!0,await f1(t.remoteStore,!0);for(const l of s)am(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const a=[];let s=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?a.push(c):s=s.then((()=>($l(t,c),Kl(t.localStore,c,!0)))),Ql(t.remoteStore,c)})),await s,await qb(t,a),(function(c){const d=De(c);d.Au.forEach(((m,p)=>{Ql(d.remoteStore,p)})),d.Ru.Jr(),d.Au=new Map,d.du=new Rt(ve.comparator)})(t),t.gu=!1,await f1(t.remoteStore,!1)}}async function qb(i,e,t){const a=De(i),s=[],l=[];for(const c of e){let d;const m=a.Iu.get(c);if(m&&m.length!==0){d=await Dd(a.localStore,ga(m[0]));for(const p of m){const v=a.Tu.get(p),S=await ZR(a,v);S.snapshot&&l.push(S.snapshot)}}else{const p=await HE(a.localStore,c);d=await Dd(a.localStore,p),await sy(a,hA(p),c,!1,d.resumeToken)}s.push(d)}return a.Pu.H_(l),s}function hA(i){return GT(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function a8(i){return(function(t){return De(De(t).persistence).Ts()})(De(i).localStore)}async function i8(i,e,t,a){const s=De(i);if(s.gu)return void oe(su,"Ignoring unexpected query state notification.");const l=s.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await FE(s.localStore,JT(l[0])),d=ih.createSynthesizedRemoteEventForCurrentChange(e,t==="current",en.EMPTY_BYTE_STRING);await ps(s,c,d);break}case"rejected":await Kl(s.localStore,e,!0),$l(s,e,a);break;default:Ae(64155,t)}}async function r8(i,e,t){const a=im(i);if(a.gu){for(const s of e){if(a.Iu.has(s)&&a.sharedClientState.isActiveQueryTarget(s)){oe(su,"Adding an already active target "+s);continue}const l=await HE(a.localStore,s),c=await Dd(a.localStore,l);await sy(a,hA(l),c.targetId,!1,c.resumeToken),am(a.remoteStore,c)}for(const s of t)a.Iu.has(s)&&await Kl(a.localStore,s,!1).then((()=>{Ql(a.remoteStore,s),$l(a,s)})).catch(ds)}}function im(i){const e=De(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=uA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KR.bind(null,e),e.Pu.H_=VR.bind(null,e.eventManager),e.Pu.yu=PR.bind(null,e.eventManager),e}function cy(i){const e=De(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JR.bind(null,e),e}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BE(this.persistence,new LE,e.initialUser,this.serializer)}Cu(e){return new J1(em.mi,this.serializer)}Du(e){return new QE}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class s8 extends Kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof Id,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new ME(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new J1((a=>Id.mi(a,t)),this.serializer)}}class fA extends Kc{constructor(e,t,a){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await cy(this.xu.syncEngine),await iu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return BE(this.persistence,new LE,e.initialUser,this.serializer)}Fu(e,t){const a=this.persistence.referenceDelegate.garbageCollector;return new ME(a,e.asyncQueue,t)}Mu(e,t){const a=new pD(t,this.persistence);return new gD(e.asyncQueue,a)}Cu(e){const t=PE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new $1(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,JE(),ed(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new QE}}class o8 extends fA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ap&&(this.sharedClientState.syncEngine={Co:t8.bind(null,t),vo:i8.bind(null,t),Fo:r8.bind(null,t),Ts:a8.bind(null,t),Do:e8.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async a=>{await n8(this.xu.syncEngine,a),this.gcScheduler&&(a&&!this.gcScheduler.started?this.gcScheduler.start():a||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(a&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():a||this.indexBackfillerScheduler.stop())}))}Du(e){const t=JE();if(!Ap.v(t))throw new me(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=PE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ap(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class Qc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Yb(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=XR.bind(null,this.syncEngine),await f1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OR})()}createDatastore(e){const t=tm(e.databaseInfo.databaseId),a=(function(l){return new yR(l)})(e.databaseInfo);return(function(l,c,d,m){return new SR(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new ER(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Yb(this.syncEngine,t,0)),(function(){return Lb.v()?new Lb:new dR})())}createSyncEngine(e,t){return(function(s,l,c,d,m,p,v){const S=new UR(s,l,c,d,m,p);return v&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=De(t);oe(yo,"RemoteStore shutting down."),a.Ea.add(5),await sh(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qc.provider={build:()=>new Qc};class dA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const fs="FirestoreClient";class l8{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=s,this.user=Mn.UNAUTHENTICATED,this.clientId=z1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{oe(fs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(oe(fs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=iy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Ip(i,e){i.asyncQueue.verifyOperationInProgress(),oe(fs,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener((async s=>{a.isEqual(s)||(await jE(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Gb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await u8(i);oe(fs,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((a=>jb(e.remoteStore,a))),i.setAppCheckTokenChangeListener(((a,s)=>jb(e.remoteStore,s))),i._onlineComponents=e}async function u8(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){oe(fs,"Using user provided OfflineComponentProvider");try{await Ip(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Oc("Error using user provided cache. Falling back to memory cache: "+t),await Ip(i,new Kc)}}else oe(fs,"Using default OfflineComponentProvider"),await Ip(i,new s8(void 0));return i._offlineComponents}async function mA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(oe(fs,"Using user provided OnlineComponentProvider"),await Gb(i,i._uninitializedComponentsProvider._online)):(oe(fs,"Using default OnlineComponentProvider"),await Gb(i,new Qc))),i._onlineComponents}function c8(i){return mA(i).then((e=>e.syncEngine))}async function g1(i){const e=await mA(i),t=e.eventManager;return t.onListen=HR.bind(null,e.syncEngine),t.onUnlisten=YR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qR.bind(null,e.syncEngine),t}function h8(i,e,t={}){const a=new Wi;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const v=new dA({next:D=>{v.Nu(),c.enqueueAndForget((()=>iA(l,S))),D.fromCache&&m.source==="server"?p.reject(new me(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),S=new rA(d,v,{includeMetadataChanges:!0,qa:!0});return aA(l,S)})(await g1(i),i.asyncQueue,e,t,a))),a.promise}function gA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Kb=new Map;const f8="firestore.googleapis.com",Qb=!0;class Jb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f8,this.ssl=Qb}else this.host=e.host,this.ssl=e.ssl??Qb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NE)throw new me(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hy{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new aD;switch(a.type){case"firstParty":return new sD(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new me(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Kb.get(t);a&&(oe("ComponentProvider","Removing Datastore"),Kb.delete(t),a.terminate())})(this),Promise.resolve()}}class So{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class hn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}toJSON(){return{type:hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Wc(t,hn._jsonSchema))return new hn(e,a||null,new ve(mt.fromString(t.referencePath)))}}hn._jsonSchemaVersion="firestore/documentReference/1.0",hn._jsonSchema={type:cn("string",hn._jsonSchemaVersion),referencePath:cn("string")};class os extends So{constructor(e,t,a){super(e,t,Qd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new ve(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function $b(i,e,...t){if(i=fn(i),hT("collection","path",e),i instanceof hy){const a=mt.fromString(e,...t);return B2(a),new os(i,null,a)}{if(!(i instanceof hn||i instanceof os))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(mt.fromString(e,...t));return B2(a),new os(i.firestore,null,a)}}function Jr(i,e,...t){if(i=fn(i),arguments.length===1&&(e=z1.newId()),hT("doc","path",e),i instanceof hy){const a=mt.fromString(e,...t);return L2(a),new hn(i,null,new ve(a))}{if(!(i instanceof hn||i instanceof os))throw new me(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(mt.fromString(e,...t));return L2(a),new hn(i.firestore,i instanceof os?i.converter:null,new ve(a))}}const Xb="AsyncQueue";class Wb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $E(this,"async_queue_retry"),this._c=()=>{const a=ed();a&&oe(Xb,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=ed();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ed();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ms(e))throw e;oe(Xb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Zt("INTERNAL UNHANDLED ERROR: ",Zb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=ay.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:Zb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function eS(i){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(i,["next","error","complete"])}class _o extends hy{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new Wb,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wb(e),this._firestoreClient=void 0,await e}}}function d8(i,e,t){t||(t=yd);const a=I1(i,"firestore");if(a.isInitialized(t)){const s=a.getImmediate({identifier:t}),l=a.getOptions(t);if(lo(l,e))return s;throw new me(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new me(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NE)throw new me(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&eu(e.host)&&KS(e.host),a.initialize({options:e,instanceIdentifier:t})}function rm(i){if(i._terminated)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||m8(i),i._firestoreClient}function m8(i){const e=i._freezeSettings(),t=(function(s,l,c,d){return new YD(s,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new l8(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(s){const l=s?._online.build();return{_offline:s?._offline.build(l),_online:l}})(i._componentsProvider))}class ka{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ka(en.fromBase64String(e))}catch(t){throw new me(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ka(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ka._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,ka._jsonSchema))return ka.fromBase64String(e.bytes)}}ka._jsonSchemaVersion="firestore/bytes/1.0",ka._jsonSchema={type:cn("string",ka._jsonSchemaVersion),bytes:cn("string")};class sm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fy{constructor(e){this._methodName=e}}class yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yi._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,yi._jsonSchema))return new yi(e.latitude,e.longitude)}}yi._jsonSchemaVersion="firestore/geoPoint/1.0",yi._jsonSchema={type:cn("string",yi._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class _i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,_i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _i(e.vectorValues);throw new me(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_i._jsonSchemaVersion="firestore/vectorValue/1.0",_i._jsonSchema={type:cn("string",_i._jsonSchemaVersion),vectorValues:cn("object")};const g8=/^__.*__$/;class p8{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,t,this.fieldTransforms):new au(e,this.data,t,this.fieldTransforms)}}class pA{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new sr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:i})}}class dy{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yA(this.Ac)&&g8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class y8{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||tm(e)}Cc(e,t,a,s=!1){return new dy({Ac:e,methodName:t,Dc:a,path:Ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function my(i){const e=i._freezeSettings(),t=tm(i._databaseId);return new y8(i._databaseId,!!e.ignoreUndefinedProperties,t)}function _A(i,e,t,a,s,l={}){const c=i.Cc(l.merge||l.mergeFields?2:0,e,t,s);gy("Data must be an object, but it was:",c,a);const d=vA(a,c);let m,p;if(l.merge)m=new ea(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const S of l.mergeFields){const D=p1(e,S,t);if(!c.contains(D))throw new me(te.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);SA(v,D)||v.push(D)}m=new ea(v),p=c.fieldTransforms.filter((S=>m.covers(S.field)))}else m=null,p=c.fieldTransforms;return new p8(new kn(d),m,p)}class om extends fy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof om}}function _8(i,e,t,a){const s=i.Cc(1,e,t);gy("Data must be an object, but it was:",s,a);const l=[],c=kn.empty();gs(a,((m,p)=>{const v=py(e,m,t);p=fn(p);const S=s.yc(v);if(p instanceof om)l.push(v);else{const D=oh(p,S);D!=null&&(l.push(v),c.set(v,D))}}));const d=new ea(l);return new pA(c,d,s.fieldTransforms)}function v8(i,e,t,a,s,l){const c=i.Cc(1,e,t),d=[p1(e,a,t)],m=[s];if(l.length%2!=0)throw new me(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<l.length;D+=2)d.push(p1(e,l[D])),m.push(l[D+1]);const p=[],v=kn.empty();for(let D=d.length-1;D>=0;--D)if(!SA(p,d[D])){const k=d[D];let H=m[D];H=fn(H);const q=c.yc(k);if(H instanceof om)p.push(k);else{const $=oh(H,q);$!=null&&(p.push(k),v.set(k,$))}}const S=new ea(p);return new pA(v,S,c.fieldTransforms)}function b8(i,e,t,a=!1){return oh(t,i.Cc(a?4:3,e))}function oh(i,e){if(bA(i=fn(i)))return gy("Unsupported field value:",e,i),vA(i,e);if(i instanceof fy)return(function(a,s){if(!yA(s.Ac))throw s.Sc(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let m=oh(d,s.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(a,s){if((a=fn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return oz(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=vt.fromDate(a);return{timestampValue:Gl(s.serializer,l)}}if(a instanceof vt){const l=new vt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Gl(s.serializer,l)}}if(a instanceof yi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ka)return{bytesValue:hE(s.serializer,a._byteString)};if(a instanceof hn){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:q1(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof _i)return(function(c,d){return{mapValue:{fields:{[V1]:{stringValue:P1},[jl]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return j1(d.serializer,p)}))}}}}}})(a,s);throw s.Sc(`Unsupported field value: ${jd(a)}`)})(i,e)}function vA(i,e){const t={};return RT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(i,((a,s)=>{const l=oh(s,e.mc(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function bA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof vt||i instanceof yi||i instanceof ka||i instanceof hn||i instanceof fy||i instanceof _i)}function gy(i,e,t){if(!bA(t)||!fT(t)){const a=jd(t);throw a==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+a)}}function p1(i,e,t){if((e=fn(e))instanceof sm)return e._internalPath;if(typeof e=="string")return py(i,e);throw Nd("Field path arguments must be of type string or ",i,!1,void 0,t)}const S8=new RegExp("[~\\*/\\[\\]]");function py(i,e,t){if(e.search(S8)>=0)throw Nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new sm(...e.split("."))._internalPath}catch{throw Nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Nd(i,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${a}`),c&&(m+=` in document ${s}`),m+=")"),new me(te.INVALID_ARGUMENT,d+i+m)}function SA(i,e){return i.some((t=>t.isEqual(e)))}class TA{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T8 extends TA{data(){return super.data()}}function EA(i,e){return typeof e=="string"?py(i,e):e instanceof sm?e._internalPath:e._delegate._internalPath}function AA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new me(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yy{}class E8 extends yy{}function tS(i,e,...t){let a=[];e instanceof yy&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((m=>m instanceof vy)).length,d=l.filter((m=>m instanceof _y)).length;if(c>1||c>0&&d>0)throw new me(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)i=s._apply(i);return i}class _y extends E8{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new _y(e,t,a)}_apply(e){const t=this._parse(e);return wA(e._query,t),new So(e.firestore,e.converter,e1(e._query,t))}_parse(e){const t=my(e.firestore);return(function(l,c,d,m,p,v,S){let D;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){aS(S,v);const H=[];for(const q of S)H.push(nS(m,l,q));D={arrayValue:{values:H}}}else D=nS(m,l,S)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||aS(S,v),D=b8(d,c,S,v==="in"||v==="not-in");return it.create(p,v,D)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class vy extends yy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vy(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:bt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const m of d)wA(c,m),c=e1(c,m)})(e._query,t),new So(e.firestore,e.converter,e1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nS(i,e,t){if(typeof(t=fn(t))=="string"){if(t==="")throw new me(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KT(e)&&t.indexOf("/")!==-1)throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(mt.fromString(t));if(!ve.isDocumentKey(a))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Fc(i,new ve(a))}if(t instanceof hn)return Fc(i,t._key);throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(t)}.`)}function aS(i,e){if(!Array.isArray(i)||i.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wA(i,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(i.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class A8{convertValue(e,t="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return gs(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){const t=e.fields?.[jl].arrayValue?.values?.map((a=>Pt(a.doubleValue)));return new _i(t)}convertGeoPoint(e){return new yi(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Gd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const t=tr(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=mt.fromString(e);Ce(SE(a),9688,{name:e});const s=new ho(a.get(1),a.get(3)),l=new ve(a.popFirst(5));return s.isEqual(t)||Zt(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function IA(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}class yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class so extends TA{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(EA("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=so._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}so._jsonSchemaVersion="firestore/documentSnapshot/1.0",so._jsonSchema={type:cn("string",so._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class td extends so{data(e={}){return super.data(e)}}class oo{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new yc(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new td(this._firestore,this._userDataWriter,a.key,a,new yc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const m=new td(s._firestore,s._userDataWriter,d.doc.key,d.doc,new yc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new td(s._firestore,s._userDataWriter,d.doc.key,d.doc,new yc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:w8(d.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=z1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w8(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}oo._jsonSchemaVersion="firestore/querySnapshot/1.0",oo._jsonSchema={type:cn("string",oo._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class by extends A8{constructor(e){super(),this.firestore=e}convertBytes(e){return new ka(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}function I8(i){i=Zi(i,So);const e=Zi(i.firestore,_o),t=rm(e),a=new by(e);return AA(i._query),h8(t,i._query).then((s=>new oo(e,a,i,s)))}function Uf(i,e,t){i=Zi(i,hn);const a=Zi(i.firestore,_o),s=IA(i.converter,e,t);return Sy(a,[_A(my(a),"setDoc",i._key,s,i.converter!==null,t).toMutation(i._key,Dn.none())])}function D8(i){return Sy(Zi(i.firestore,_o),[new ah(i._key,Dn.none())])}function z8(i,...e){i=fn(i);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||eS(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(eS(e[a])){const m=e[a];e[a]=m.next?.bind(m),e[a+1]=m.error?.bind(m),e[a+2]=m.complete?.bind(m)}let l,c,d;if(i instanceof hn)c=Zi(i.firestore,_o),d=Qd(i._key.path),l={next:m=>{e[a]&&e[a](R8(c,i,m))},error:e[a+1],complete:e[a+2]};else{const m=Zi(i,So);c=Zi(m.firestore,_o),d=m._query;const p=new by(c);l={next:v=>{e[a]&&e[a](new oo(c,p,m,v))},error:e[a+1],complete:e[a+2]},AA(i._query)}return(function(p,v,S,D){const k=new dA(D),H=new rA(v,k,S);return p.asyncQueue.enqueueAndForget((async()=>aA(await g1(p),H))),()=>{k.Nu(),p.asyncQueue.enqueueAndForget((async()=>iA(await g1(p),H)))}})(rm(c),d,s,l)}function Sy(i,e){return(function(a,s){const l=new Wi;return a.asyncQueue.enqueueAndForget((async()=>GR(await c8(a),s,l))),l.promise})(rm(i),e)}function R8(i,e,t){const a=t.docs.get(e._key),s=new by(i);return new so(i,s,e._key,a,new yc(t.hasPendingWrites,t.fromCache),e.converter)}class C8{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=k8(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function N8(i){return new C8(i)}class M8{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qc.provider,this._offlineComponentProvider={build:t=>new fA(t,e?.cacheSizeBytes,this.forceOwnership)}}}class x8{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qc.provider,this._offlineComponentProvider={build:t=>new o8(t,e?.cacheSizeBytes)}}}function k8(i){return new M8(i?.forceOwnership)}function O8(){return new x8}class V8{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=my(e)}set(e,t,a){this._verifyNotCommitted();const s=Dp(e,this._firestore),l=IA(s.converter,t,a),c=_A(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,Dn.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=Dp(e,this._firestore);let c;return c=typeof(t=fn(t))=="string"||t instanceof sm?v8(this._dataReader,"WriteBatch.update",l._key,t,a,s):_8(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dp(e,this._firestore);return this._mutations=this._mutations.concat(new ah(t._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dp(i,e){if((i=fn(i)).firestore!==e)throw new me(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function zp(i){return rm(i=Zi(i,_o)),new V8(i,(e=>Sy(i,e)))}(function(e,t=!0){(function(s){nu=s})(tu),xl(new uo("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new _o(new iD(a.getProvider("auth-internal")),new oD(c,a.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new me(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ho(p.options.projectId,v)})(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),is(k2,O2,e),is(k2,O2,"esm2020")})();function DA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P8=DA,zA=new $c("auth","Firebase",DA());const Md=new A1("@firebase/auth");function L8(i,...e){Md.logLevel<=at.WARN&&Md.warn(`Auth (${tu}): ${i}`,...e)}function nd(i,...e){Md.logLevel<=at.ERROR&&Md.error(`Auth (${tu}): ${i}`,...e)}function Ti(i,...e){throw Ey(i,...e)}function vi(i,...e){return Ey(i,...e)}function Ty(i,e,t){const a={...P8(),[e]:t};return new $c("auth","Firebase",a).create(e,{appName:i.name})}function ls(i){return Ty(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function B8(i,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Ti(i,"argument-error"),Ty(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ey(i,...e){if(typeof i!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(t,...a)}return zA.create(i,...e)}function Ue(i,e,...t){if(!i)throw Ey(e,...t)}function $i(i){const e="INTERNAL ASSERTION FAILED: "+i;throw nd(e),new Error(e)}function ar(i,e){i||$i(e)}function y1(){return typeof self<"u"&&self.location?.href||""}function j8(){return iS()==="http:"||iS()==="https:"}function iS(){return typeof self<"u"&&self.location?.protocol||null}function U8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j8()||C5()||"connection"in navigator)?navigator.onLine:!0}function H8(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class lh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ar(t>e,"Short delay should be less than long delay!"),this.isMobile=z5()||N5()}get(){return U8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ay(i,e){ar(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class RA{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const F8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Y8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q8=new lh(3e4,6e4);function wy(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ou(i,e,t,a,s={}){return CA(i,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=Xc({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:m,...l};return R5()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&eu(i.emulatorConfig.host)&&(p.credentials="include"),RA.fetch()(await NA(i,i.config.apiHost,t,d),p)})}async function CA(i,e,t){i._canInitEmulator=!1;const a={...F8,...e};try{const s=new K8(i),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Hf(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Hf(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Hf(i,"user-disabled",c);const v=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ty(i,v,p);Ti(i,v)}}catch(s){if(s instanceof ir)throw s;Ti(i,"network-request-failed",{message:String(s)})}}async function G8(i,e,t,a,s={}){const l=await ou(i,e,t,a,s);return"mfaPendingCredential"in l&&Ti(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function NA(i,e,t,a){const s=`${e}${t}?${a}`,l=i,c=l.config.emulator?Ay(i.config,s):`${i.config.apiScheme}://${s}`;return Y8.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class K8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(vi(this.auth,"network-request-failed")),q8.get())})}}function Hf(i,e,t){const a={appName:i.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=vi(i,e,a);return s.customData._tokenResponse=t,s}async function Q8(i,e){return ou(i,"POST","/v1/accounts:delete",e)}async function xd(i,e){return ou(i,"POST","/v1/accounts:lookup",e)}function Nc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J8(i,e=!1){const t=fn(i),a=await t.getIdToken(e),s=Iy(a);Ue(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l?.sign_in_provider;return{claims:s,token:a,authTime:Nc(Rp(s.auth_time)),issuedAtTime:Nc(Rp(s.iat)),expirationTime:Nc(Rp(s.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Rp(i){return Number(i)*1e3}function Iy(i){const[e,t,a]=i.split(".");if(e===void 0||t===void 0||a===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{const s=FS(t);return s?JSON.parse(s):(nd("Failed to decode base64 JWT payload"),null)}catch(s){return nd("Caught error parsing JWT payload as JSON",s?.toString()),null}}function rS(i){const e=Iy(i);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Jc(i,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ir&&$8(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function $8({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class X8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nc(this.lastLoginAt),this.creationTime=Nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kd(i){const e=i.auth,t=await i.getIdToken(),a=await Jc(i,xd(e,{idToken:t}));Ue(a?.users.length,e,"internal-error");const s=a.users[0];i._notifyReloadListener(s);const l=s.providerUserInfo?.length?MA(s.providerUserInfo):[],c=Z8(i.providerData,l),d=i.isAnonymous,m=!(i.email&&s.passwordHash)&&!c?.length,p=d?m:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new _1(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(i,v)}async function W8(i){const e=fn(i);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z8(i,e){return[...i.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function MA(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function e7(i,e){const t=await CA(i,{},async()=>{const a=Xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=i.config,c=await NA(i,s,"/v1/token",`key=${l}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:a};return i.emulatorConfig&&eu(i.emulatorConfig.host)&&(m.credentials="include"),RA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function t7(i,e){return ou(i,"POST","/v2/accounts:revokeToken",wy(i,e))}class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=rS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await e7(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new Rl;return a&&(Ue(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(Ue(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Ue(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return $i("not implemented")}}function $r(i,e){Ue(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Xa{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new X8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Jc(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return J8(this,e)}reload(){return W8(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await kd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($a(this.auth.app))return Promise.reject(ls(this.auth));const e=await this.getIdToken();return await Jc(this,Q8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:S,emailVerified:D,isAnonymous:k,providerData:H,stsTokenManager:q}=t;Ue(S&&q,e,"internal-error");const $=Rl.fromJSON(this.name,q);Ue(typeof S=="string",e,"internal-error"),$r(a,e.name),$r(s,e.name),Ue(typeof D=="boolean",e,"internal-error"),Ue(typeof k=="boolean",e,"internal-error"),$r(l,e.name),$r(c,e.name),$r(d,e.name),$r(m,e.name),$r(p,e.name),$r(v,e.name);const W=new Xa({uid:S,auth:e,email:s,emailVerified:D,displayName:a,isAnonymous:k,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:$,createdAt:p,lastLoginAt:v});return H&&Array.isArray(H)&&(W.providerData=H.map(le=>({...le}))),m&&(W._redirectEventId=m),W}static async _fromIdTokenResponse(e,t,a=!1){const s=new Rl;s.updateFromServerResponse(t);const l=new Xa({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await kd(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];Ue(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?MA(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!l?.length,d=new Rl;d.updateFromIdToken(a);const m=new Xa({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new _1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!l?.length};return Object.assign(m,p),m}}const sS=new Map;function Xi(i){ar(i instanceof Function,"Expected a class definition");let e=sS.get(i);return e?(ar(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,sS.set(i,e),e)}class xA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xA.type="NONE";const oS=xA;function ad(i,e,t){return`firebase:${i}:${e}:${t}`}class Cl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=ad(this.userKey,s.apiKey,l),this.fullPersistenceKey=ad("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xd(this.auth,{idToken:e}).catch(()=>{});return t?Xa._fromGetAccountInfoResponse(this.auth,t,e):null}return Xa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Cl(Xi(oS),e,a);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=s[0]||Xi(oS);const c=ad(a,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(c);if(v){let S;if(typeof v=="string"){const D=await xd(e,{idToken:v}).catch(()=>{});if(!D)break;S=await Xa._fromGetAccountInfoResponse(e,D,v)}else S=Xa._fromJSON(e,v);p!==l&&(d=S),l=p;break}}catch{}const m=s.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Cl(l,e,a):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Cl(l,e,a))}}function lS(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BA(e))return"Blackberry";if(jA(e))return"Webos";if(OA(e))return"Safari";if((e.includes("chrome/")||VA(e))&&!e.includes("edge/"))return"Chrome";if(LA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(t);if(a?.length===2)return a[1]}return"Other"}function kA(i=gn()){return/firefox\//i.test(i)}function OA(i=gn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VA(i=gn()){return/crios\//i.test(i)}function PA(i=gn()){return/iemobile/i.test(i)}function LA(i=gn()){return/android/i.test(i)}function BA(i=gn()){return/blackberry/i.test(i)}function jA(i=gn()){return/webos/i.test(i)}function Dy(i=gn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function n7(i=gn()){return Dy(i)&&!!window.navigator?.standalone}function a7(){return M5()&&document.documentMode===10}function UA(i=gn()){return Dy(i)||LA(i)||jA(i)||BA(i)||/windows phone/i.test(i)||PA(i)}function HA(i,e=[]){let t;switch(i){case"Browser":t=lS(gn());break;case"Worker":t=`${lS(gn())}-${i}`;break;default:t=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tu}/${a}`}class i7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function r7(i,e={}){return ou(i,"GET","/v2/passwordPolicy",wy(i,e))}const s7=6;class o7{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??s7,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class l7{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uS(this),this.idTokenSubscription=new uS(this),this.beforeStateQueue=new i7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xd(this,{idToken:e}),a=await Xa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if($a(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=a?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(a=d.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($a(this.app))return Promise.reject(ls(this));const t=e?fn(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $a(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $a(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r7(this),t=new o7(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await t7(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xi(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[Xi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,a,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if($a(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&L8(`Error while retrieving App Check token: ${e.error}`),e?.token}}function uh(i){return fn(i)}class uS{constructor(e){this.auth=e,this.observer=null,this.addObserver=L5(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u7(i){zy=i}function c7(i){return zy.loadJS(i)}function h7(){return zy.gapiScript}function f7(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function d7(i,e){const t=I1(i,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(lo(l,e??{}))return s;Ti(s,"already-initialized")}return t.initialize({options:e})}function m7(i,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(Xi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e?.popupRedirectResolver)}function g7(i,e,t){const a=uh(i);Ue(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=FA(e),{host:c,port:d}=p7(e),m=d===null?"":`:${d}`,p={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){Ue(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ue(lo(p,a.config.emulator)&&lo(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,eu(c)?(KS(`${l}//${c}${m}`),D5("Auth",!0)):y7()}function FA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function p7(i){const e=FA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:cS(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:cS(c)}}}function cS(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function y7(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class YA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,t){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}}async function Nl(i,e){return G8(i,"POST","/v1/accounts:signInWithIdp",wy(i,e))}const _7="http://localhost";class vo extends YA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new vo(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Nl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Nl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Nl(e,t)}buildRequest(){const e={requestUri:_7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}}class Ry{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ch extends Ry{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wr extends ch{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";class Qi extends ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return Qi.credential(t,a)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";class Zr extends ch{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.GITHUB_SIGN_IN_METHOD="github.com";Zr.PROVIDER_ID="github.com";class es extends ch{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return es.credential(t,a)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await Xa._fromIdTokenResponse(e,a,s),c=hS(a);return new Xl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=hS(a);return new Xl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function hS(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Od extends ir{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new Od(e,t,a,s)}}function qA(i,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(i,l,e,a):l})}async function v7(i,e,t=!1){const a=await Jc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Xl._forOperation(i,"link",a)}async function b7(i,e,t=!1){const{auth:a}=i;if($a(a.app))return Promise.reject(ls(a));const s="reauthenticate";try{const l=await Jc(i,qA(a,s,e,i),t);Ue(l.idToken,a,"internal-error");const c=Iy(l.idToken);Ue(c,a,"internal-error");const{sub:d}=c;return Ue(i.uid===d,a,"user-mismatch"),Xl._forOperation(i,s,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ti(a,"user-mismatch"),l}}async function S7(i,e,t=!1){if($a(i.app))return Promise.reject(ls(i));const a="signIn",s=await qA(i,a,e),l=await Xl._fromIdTokenResponse(i,a,s);return t||await i._updateCurrentUser(l.user),l}function T7(i,e){return fn(i).setPersistence(e)}function E7(i,e,t,a){return fn(i).onIdTokenChanged(e,t,a)}function A7(i,e,t){return fn(i).beforeAuthStateChanged(e,t)}function w7(i,e,t,a){return fn(i).onAuthStateChanged(e,t,a)}function I7(i){return fn(i).signOut()}const Vd="__sak";class GA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const D7=1e3,z7=10;class KA extends GA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);a7()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,z7):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},D7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KA.type="LOCAL";const QA=KA;class JA extends GA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}JA.type="SESSION";const $A=JA;function R7(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new lm(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async p=>p(t.origin,l)),m=await R7(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lm.receivers=[];function Cy(i="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return i+t}class C7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const p=Cy("",20);s.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(S){const D=S;if(D.data.eventId===p)switch(D.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(D.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function bi(){return window}function N7(i){bi().location.href=i}function XA(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function M7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function x7(){return navigator?.serviceWorker?.controller||null}function k7(){return XA()?self:null}const WA="firebaseLocalStorageDb",O7=1,Pd="firebaseLocalStorage",ZA="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function um(i,e){return i.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function V7(){const i=indexedDB.deleteDatabase(WA);return new hh(i).toPromise()}function v1(){const i=indexedDB.open(WA,O7);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(Pd,{keyPath:ZA})}catch(s){t(s)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(Pd)?e(a):(a.close(),await V7(),e(await v1()))})})}async function fS(i,e,t){const a=um(i,!0).put({[ZA]:e,value:t});return new hh(a).toPromise()}async function P7(i,e){const t=um(i,!1).get(e),a=await new hh(t).toPromise();return a===void 0?null:a.value}function dS(i,e){const t=um(i,!0).delete(e);return new hh(t).toPromise()}const L7=800,B7=3;class e3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>B7)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lm._getInstance(k7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await M7(),!this.activeServiceWorker)return;this.sender=new C7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||x7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v1();return await fS(e,Vd,"1"),await dS(e,Vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>fS(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>P7(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=um(s,!1).getAll();return new hh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e3.type="LOCAL";const j7=e3;new lh(3e4,6e4);function t3(i,e){return e?Xi(e):(Ue(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Ny extends YA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function U7(i){return S7(i.auth,new Ny(i),i.bypassAuthState)}function H7(i){const{auth:e,user:t}=i;return Ue(t,e,"internal-error"),b7(t,new Ny(i),i.bypassAuthState)}async function F7(i){const{auth:e,user:t}=i;return Ue(t,e,"internal-error"),v7(t,new Ny(i),i.bypassAuthState)}class n3{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U7;case"linkViaPopup":case"linkViaRedirect":return F7;case"reauthViaPopup":case"reauthViaRedirect":return H7;default:Ti(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Y7=new lh(2e3,1e4);class wl extends n3{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,wl.currentPopupAction&&wl.currentPopupAction.cancel(),wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y7.get())};e()}}wl.currentPopupAction=null;const q7="pendingRedirect",id=new Map;class G7 extends n3{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const a=await K7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K7(i,e){const t=i3(e),a=a3(i);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}async function Q7(i,e){return a3(i)._set(i3(e),"true")}function J7(i,e){id.set(i._key(),e)}function a3(i){return Xi(i._redirectPersistence)}function i3(i){return ad(q7,i.config.apiKey,i.name)}function $7(i,e,t){return X7(i,e,t)}async function X7(i,e,t){if($a(i.app))return Promise.reject(ls(i));const a=uh(i);B8(i,e,Ry),await a._initializationPromise;const s=t3(a,t);return await Q7(s,a),s._openRedirect(a,e,"signInViaRedirect")}async function W7(i,e){return await uh(i)._initializationPromise,r3(i,e,!1)}async function r3(i,e,t=!1){if($a(i.app))return Promise.reject(ls(i));const a=uh(i),s=t3(a,e),c=await new G7(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}const Z7=600*1e3;class eC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!s3(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(vi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z7&&this.cachedEventUids.clear(),this.cachedEventUids.has(mS(e))}saveEventToCache(e){this.cachedEventUids.add(mS(e)),this.lastProcessedEventTime=Date.now()}}function mS(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function s3({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function tC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s3(i);default:return!1}}async function nC(i,e={}){return ou(i,"GET","/v1/projects",e)}const aC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iC=/^https?/;async function rC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await nC(i);for(const t of e)try{if(sC(t))return}catch{}Ti(i,"unauthorized-domain")}function sC(i){const e=y1(),{protocol:t,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&a===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!iC.test(t))return!1;if(aC.test(i))return a===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}const oC=new lh(3e4,6e4);function gS(){const i=bi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function lC(i){return new Promise((e,t)=>{function a(){gS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gS(),t(vi(i,"network-request-failed"))},timeout:oC.get()})}if(bi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(bi().gapi?.load)a();else{const s=f7("iframefcb");return bi()[s]=()=>{gapi.load?a():t(vi(i,"network-request-failed"))},c7(`${h7()}?onload=${s}`).catch(l=>t(l))}}).catch(e=>{throw rd=null,e})}let rd=null;function uC(i){return rd=rd||lC(i),rd}const cC=new lh(5e3,15e3),hC="__/auth/iframe",fC="emulator/auth/iframe",dC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gC(i){const e=i.config;Ue(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Ay(e,fC):`https://${i.config.authDomain}/${hC}`,a={apiKey:e.apiKey,appName:i.name,v:tu},s=mC.get(i.config.apiHost);s&&(a.eid=s);const l=i._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Xc(a).slice(1)}`}async function pC(i){const e=await uC(i),t=bi().gapi;return Ue(t,i,"internal-error"),e.open({where:document.body,url:gC(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dC,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=vi(i,"network-request-failed"),d=bi().setTimeout(()=>{l(c)},cC.get());function m(){bi().clearTimeout(d),s(a)}a.ping(m).then(m,()=>{l(c)})}))}const yC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_C=500,vC=600,bC="_blank",SC="http://localhost";class pS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TC(i,e,t,a=_C,s=vC){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const m={...yC,width:a.toString(),height:s.toString(),top:l,left:c},p=gn().toLowerCase();t&&(d=VA(p)?bC:t),kA(p)&&(e=e||SC,m.scrollbars="yes");const v=Object.entries(m).reduce((D,[k,H])=>`${D}${k}=${H},`,"");if(n7(p)&&d!=="_self")return EC(e||"",d),new pS(null);const S=window.open(e||"",d,v);Ue(S,i,"popup-blocked");try{S.focus()}catch{}return new pS(S)}function EC(i,e){const t=document.createElement("a");t.href=i,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}const AC="__/auth/handler",wC="emulator/auth/handler",IC=encodeURIComponent("fac");async function yS(i,e,t,a,s,l){Ue(i.config.authDomain,i,"auth-domain-config-required"),Ue(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:a,v:tu,eventId:s};if(e instanceof Ry){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",P5(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,S]of Object.entries({}))c[v]=S}if(e instanceof ch){const v=e.getScopes().filter(S=>S!=="");v.length>0&&(c.scopes=v.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await i._getAppCheckToken(),p=m?`#${IC}=${encodeURIComponent(m)}`:"";return`${DC(i)}?${Xc(d).slice(1)}${p}`}function DC({config:i}){return i.emulator?Ay(i,wC):`https://${i.authDomain}/${AC}`}const Cp="webStorageSupport";class zC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$A,this._completeRedirectFn=r3,this._overrideRedirectResult=J7}async _openPopup(e,t,a,s){ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await yS(e,t,a,y1(),s);return TC(e,l,Cy())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await yS(e,t,a,y1(),s);return N7(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ar(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await pC(e),a=new eC(e);return t.register("authEvent",s=>(Ue(s?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cp,{type:Cp},s=>{const l=s?.[0]?.[Cp];l!==void 0&&t(!!l),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UA()||OA()||Dy()}}const RC=zC;var _S="@firebase/auth",vS="1.12.0";class CC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function NC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MC(i){xl(new uo("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;Ue(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HA(i)},p=new l7(a,s,l,m);return m7(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),xl(new uo("auth-internal",e=>{const t=uh(e.getProvider("auth").getImmediate());return(a=>new CC(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(_S,vS,NC(i)),is(_S,vS,"esm2020")}const xC=300,kC=GS("authIdTokenMaxAge")||xC;let bS=null;const OC=i=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>kC)return;const s=t?.token;bS!==s&&(bS=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VC(i=FI()){const e=I1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=d7(i,{popupRedirectResolver:RC,persistence:[j7,QA,$A]}),a=GS("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=OC(l.toString());A7(t,c,()=>c(t.currentUser)),E7(t,d=>c(d))}}const s=E5("auth");return s&&g7(t,`http://${s}`),t}function PC(){return document.getElementsByTagName("head")?.[0]??document}u7({loadJS(i){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=s=>{const l=vi("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",PC().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MC("Browser");const LC={apiKey:"AIzaSyDa7LHhl6ncVqLdIJEokyeq3JCQwihL-aA",authDomain:"luach-web.firebaseapp.com",projectId:"luach-web",storageBucket:"luach-web.firebasestorage.app",messagingSenderId:"265711408278",appId:"1:265711408278:web:f32215478c1e2277581eb7",measurementId:"G-BWPEBF9H8S"},My=eT(LC),BC=async()=>{try{const{isSupported:i,getAnalytics:e}=await g5(async()=>{const{isSupported:a,getAnalytics:s}=await import("./index.esm-Ba2Wk8sz.js");return{isSupported:a,getAnalytics:s}},[],import.meta.url);if(await i())return e(My)}catch{}};BC();const Wn=d8(My,{localCache:N8({tabManager:O8()})}),_c=VC(My);T7(_c,QA);const jC=new Qi,UC={en:{title:"LUACH",premium:"Premium Calendar",addEvent:"Add Event",searchEvents:"Search Events",events:"Events",zmanimToday:"Zmanim Today",dailyNotes:"Daily Notifications",tefillahNotifications:"Tefillah Notifications",dafYomi:"Daf Yomi",weeklyParasha:"Weekly Parasha",goToDate:"Go to Date",today:"Today",previousYear:"Previous Year",nextYear:"Next Year",previousMonth:"Previous Month",nextMonth:"Next Month",noParasha:"No Parasha",addNewEvent:"Add New Event",eventName:"Event Name",repeatPattern:"Repeat Pattern",notes:"Notes",colorTheme:"Background Color",textColor:"Text Color",reminders:"Reminders",dayBefore:"Day Before",dayOf:"Day Of",saveEvent:"Save Event",cancel:"Cancel",gregDate:"Gregorian Date",jewDate:"Jewish Date",day:"DAY",month:"MONTH",year:"YEAR",close:"Close",goToJewish:"Go to Jewish Date",editEvent:"Edit Event",deleteEvent:"Delete Event",print:"Print Calendar",omer:"Day Of The Omer",pirkeiAvos:"Pirkei Avos",candleLighting:"Light Candles at",confirmDelete:"Are you sure you want to delete this event?",go:"Go",signInWithGoogle:"Sign in with Google",signOut:"Sign Out",syncMode:"Storage",cloud:"Cloud Sync",local:"Local Only",todayStart:"Today starts at",sunset:"Sunset (Jewish)",midnight:"Midnight (Secular)",emailReminders:"Email Reminders",browserNotifications:"Browser Alerts",settings:"Settings",on:"On",off:"Off",zmanim:"Zmanim",location:"Location",calendarView:"Calendar Layout",jewishMonth:"Jewish Month",secularMonth:"Secular Month",desktopSidebar:"Side Panel (Zmanim)",sidePanelVisible:"Visible",sidePanelHidden:"Hidden"},he:{title:"",premium:"  ",addEvent:" ",searchEvents:" ",events:"",zmanimToday:" ",dailyNotes:" ",tefillahNotifications:" ",dafYomi:" ",weeklyParasha:" ",goToDate:" ",today:"",previousYear:" ",nextYear:" ",previousMonth:" ",nextMonth:" ",noParasha:" ",addNewEvent:"  ",eventName:" ",repeatPattern:"",notes:"",colorTheme:" ",textColor:" ",reminders:"",dayBefore:" ",dayOf:" ",saveEvent:"",cancel:"",gregDate:" ",jewDate:" ",day:"",month:"",year:"",close:"",goToJewish:"  ",editEvent:" ",deleteEvent:" ",print:" ",omer:" ",pirkeiAvos:" ",candleLighting:"  ",confirmDelete:"      ?",go:"",signInWithGoogle:"  Google",signOut:"",syncMode:" ",cloud:" ",local:" ",todayStart:"  -",sunset:" ()",midnight:" ()",emailReminders:" ",browserNotifications:" ",settings:"",on:"",off:"",zmanim:" ",location:"",calendarView:" ",jewishMonth:" ",secularMonth:" ",desktopSidebar:"  ()",sidePanelVisible:"",sidePanelHidden:""}},HC="LuachDB",FC=1,Wl="events";function xy(){return new Promise((i,e)=>{const t=indexedDB.open(HC,FC);t.onupgradeneeded=a=>{const s=a.target.result;if(!s.objectStoreNames.contains(Wl)){const l=s.createObjectStore(Wl,{keyPath:"id"});l.createIndex("type","type",{unique:!1}),l.createIndex("jDate",["jYear","jMonth","jDay"],{unique:!1})}},t.onsuccess=a=>{i(a.target.result)},t.onerror=a=>{e(a.target.error)}})}async function YC(){try{(await xy()).close(),console.log(" IndexedDB initialized successfully")}catch(i){throw console.error(" Failed to initialize IndexedDB:",i),i}}async function sd(){const i=await xy();return new Promise((e,t)=>{const l=i.transaction([Wl],"readonly").objectStore(Wl).getAll();l.onsuccess=()=>{i.close(),e(l.result||[])},l.onerror=()=>{i.close(),t(l.error)}})}async function od(i){const e=await xy();return new Promise((t,a)=>{const s=e.transaction([Wl],"readwrite"),l=s.objectStore(Wl);l.clear(),i.forEach(c=>{l.add(c)}),s.oncomplete=()=>{e.close(),t()},s.onerror=()=>{e.close(),a(s.error)}})}async function qC(){try{const i=localStorage.getItem("luach-events");if(!i)return console.log(" No localStorage data to migrate"),!1;if((await sd()).length>0)return console.log(" IndexedDB already has data, skipping migration"),!1;const t=JSON.parse(i);return await od(t),localStorage.removeItem("luach-events"),console.log(` Migrated ${t.length} events from localStorage to IndexedDB`),!0}catch(i){return console.error(" Migration failed:",i),!1}}const GC=()=>{const[i,e]=_e.useState(()=>{const X=localStorage.getItem("luach-lang");return X==="en"||X==="he"?X:"en"}),[t,a]=_e.useState(()=>{switch(localStorage.getItem("luach-theme")?.toLowerCase()){case"warm":return un.Warm;case"dark":return un.Dark;case"light":return un.Light;case"tcheles":return un.Tcheles;default:return un.Warm}}),[s,l]=_e.useState(null),c=UC[i];_e.useEffect(()=>{const X=w7(_c,be=>{l(be)});return W7(_c).then(be=>{be?.user&&console.log(" Successfully signed in via redirect:",be.user.displayName)}).catch(be=>{be.code!=="auth/invalid-api-key"&&be.code!=="auth/network-request-failed"&&console.error(" Redirect sign-in failed:",be)}),()=>X()},[]);const d=async()=>{try{await $7(_c,jC)}catch(X){console.error("Login failed:",X)}},m=async()=>{try{await I7(_c)}catch(X){console.error("Logout failed:",X)}};Il.useEffect(()=>{document.body.dir=i==="he"?"rtl":"ltr",localStorage.setItem("luach-lang",i)},[i]),Il.useEffect(()=>{const X=un[t].toLowerCase();document.body.setAttribute("data-theme",X),localStorage.setItem("luach-theme",X)},[t]);const[p,v]=_e.useState("Jerusalem"),[S,D]=_e.useState(()=>localStorage.getItem("luach-today-start")||"sunset"),[k,H]=_e.useState(()=>localStorage.getItem("luach-email-reminders")!=="false"),[q,$]=_e.useState(()=>localStorage.getItem("luach-browser-notifications")!=="false"),[W,le]=_e.useState(()=>localStorage.getItem("luach-calendar-view")||"jewish");_e.useEffect(()=>{localStorage.setItem("luach-calendar-view",W)},[W]);const[Q,fe]=_e.useState(()=>localStorage.getItem("luach-desktop-sidebar")||"permanent");_e.useEffect(()=>{localStorage.setItem("luach-desktop-sidebar",Q)},[Q]),_e.useEffect(()=>{localStorage.setItem("luach-email-reminders",k.toString())},[k]),_e.useEffect(()=>{localStorage.setItem("luach-browser-notifications",q.toString())},[q]);const he=_e.useMemo(()=>Ml.find(X=>X.Name===p)||Ml.find(X=>X.Name==="Jerusalem"),[p]),ne=S==="sunset"?pe.nowAtLocation(he):new Te,[A,I]=_e.useState(ne),[z,C]=_e.useState(A),[N,O]=_e.useState(ne.Abs),[R,xe]=_e.useState([]),[We,L]=_e.useState(!1),[re,de]=_e.useState(!1),[je,Ee]=_e.useState(!1),[M,Z]=_e.useState(null);_e.useEffect(()=>{let X;return(async()=>{try{await YC(),await qC()}catch(ce){console.error("Failed to init local DB",ce)}if(s){console.log(" User logged in, setting up Firestore sync...");try{const gt=await sd();gt.length>0&&(console.log(` Warm start: Loaded ${gt.length} events from local cache`),xe(gt),L(!0))}catch(gt){console.error("Warm start failed",gt)}const ce=Jr(Wn,"users",s.uid,"settings","general"),Se=(await I8(tS($b(Wn,"users",s.uid,"settings")))).docs.find(gt=>gt.id==="general")?.data();Se?(Se.locationName&&v(Se.locationName),Se.todayStartMode&&D(Se.todayStartMode),Se.emailRemindersEnabled!==void 0&&H(Se.emailRemindersEnabled),Se.browserNotificationsEnabled!==void 0&&$(Se.browserNotificationsEnabled),Se.lang&&e(Se.lang),Se.calendarView&&le(Se.calendarView),Se.desktopSidebarMode&&fe(Se.desktopSidebarMode)):await Uf(ce,{locationName:p,todayStartMode:S,emailRemindersEnabled:k,browserNotificationsEnabled:q,lang:i,calendarView:W,desktopSidebarMode:Q}),de(!0);const qe=$b(Wn,"users",s.uid,"events"),ot=tS(qe);X=z8(ot,async gt=>{let jt=gt.docs.map(rt=>rt.data()),Tt=!1;if(jt=jt.map(rt=>rt.jAbs===void 0?(Tt=!0,{...rt,jAbs:Te.absJd(rt.jYear,rt.jMonth,rt.jDay)}):rt),Tt){console.log(` Migrating ${jt.length} cloud events to include jAbs...`);const rt=zp(Wn);jt.forEach(ht=>{const Jt=Jr(Wn,"users",s.uid,"events",ht.id);rt.set(Jt,ht)}),await rt.commit()}if(od(jt).catch(rt=>console.error("Local sync failed",rt)),jt.length===0){const rt=await sd();if(rt.length>0){console.log(` Migrating ${rt.length} events to Cloud...`);const ht=zp(Wn);rt.forEach(Jt=>{const Ri=Jr(Wn,"users",s.uid,"events",Jt.id);Jt.jAbs===void 0&&(Jt.jAbs=Te.absJd(Jt.jYear,Jt.jMonth,Jt.jDay)),ht.set(Ri,Jt)}),await ht.commit();return}}xe(jt),L(!0)})}else{console.log(" No user, loading from local IndexedDB...");try{const ce=await sd();let Me=!1;const Se=ce.map(qe=>qe.jAbs===void 0?(Me=!0,{...qe,jAbs:Te.absJd(qe.jYear,qe.jMonth,qe.jDay)}):qe);Me?(console.log(` Migrating ${Se.length} local events to include jAbs...`),await od(Se),xe(Se)):xe(ce),L(!0),de(!0)}catch(ce){console.error(" Local DB Load Failed:",ce),L(!0),de(!0)}}})(),()=>X?.()},[s]),_e.useEffect(()=>{if(s&&re){const X=Jr(Wn,"users",s.uid,"settings","general"),be=Jr(Wn,"users",s.uid);Uf(be,{email:s.email,lastSeen:new Date().toISOString()},{merge:!0}).catch(ce=>console.error("Failed to sync user doc:",ce)),Uf(X,{locationName:p,todayStartMode:S,emailRemindersEnabled:k,browserNotificationsEnabled:q,lang:i,calendarView:W,desktopSidebarMode:Q,email:s.email,lastUpdated:new Date().toISOString()},{merge:!0}).catch(ce=>console.error("Failed to sync settings:",ce))}},[s,p,S,k,q,i,W,Q]),_e.useEffect(()=>{if(We&&R.length>0){const X=setTimeout(()=>{LS.checkAndNotify(R,s,Wn,A,k,q)},5e3);return()=>clearTimeout(X)}},[R,We,q]);const[ue,ye]=_e.useState(""),[Ve,Ne]=_e.useState(""),[Ye,Lt]=_e.useState(He.HebrewDateRecurringYearly),[Dt,Oa]=_e.useState("#fde047"),[wi,Wa]=_e.useState("#1e293b"),[Ii,Un]=_e.useState(!1),[or,Va]=_e.useState(!1),[Di,ya]=_e.useState(!1),[xt,Bt]=_e.useState(!1),[Za,lr]=_e.useState(!1),[ys,Kt]=_e.useState(!0),[ei,ur]=_e.useState(new Date().toISOString().split("T")[0]),[cr,Pa]=_e.useState(new Te().Day),[To,_s]=_e.useState(new Te().Month),[vs,bs]=_e.useState(new Te().Year),[ta,tn]=_e.useState(!1),[Hn,kt]=_e.useState(!1),[lu,hr]=_e.useState(null);_e.useEffect(()=>{localStorage.setItem("luach-today-start",S)},[S,he]);const fr=_e.useRef(0);_e.useEffect(()=>{let X;const be=()=>{const ce=new Date,Me=new Date;Me.setHours(24,0,0,0);const Se=Me.getTime()-ce.getTime(),qe=Tt=>kp.getAllZmanim(Tt,he).find(ht=>ht.zmanType.id===15)?.time,ot=qe(new Te);let gt=-1;if(ot){const Tt=new Date;Tt.setHours(ot.hour,ot.minute,0,0),gt=Tt.getTime()-ce.getTime()}if(gt<=0){const Tt=new Te().addDays(1),rt=qe(Tt);if(rt){const ht=new Date;ht.setDate(ht.getDate()+1),ht.setHours(rt.hour,rt.minute,0,0),gt=ht.getTime()-ce.getTime()}else gt=Se+1e3}const jt=Math.max(1e4,Math.min(Se,gt));fr.current=Date.now()+jt,console.log(` Next auto-refresh in ${Math.round(jt/6e4)}m (at ${Se<gt?"Midnight":"Sunset"})`),X=setTimeout(()=>{const Tt=S==="sunset"?pe.nowAtLocation(he):new Te;console.log(" Refreshing Luach for new day:",Tt.toString()),I(Tt),C(Tt),O(Tt.Abs),be()},jt+2e3)};return be(),()=>clearTimeout(X)},[he,p,S]),_e.useEffect(()=>{const X=setInterval(()=>{if(Date.now()>=fr.current&&fr.current!==0){console.log(" Minute ticker detected refresh deadline. Refreshing...");const be=S==="sunset"?pe.nowAtLocation(he):new Te;I(be),C(be),O(be.Abs)}},6e4);return()=>clearInterval(X)},[S,he]);const na=()=>{const X=S==="sunset"?pe.nowAtLocation(he):new Te;I(X),C(X)},_a=async(X,be)=>{if(xe(X),s&&be){try{const ce=Jr(Wn,"users",s.uid,"events",be.id);await Uf(ce,be),console.log(` Event updated in Cloud: ${be.name}`)}catch(ce){console.error(" Cloud Save Failed:",ce)}return}try{if(s){const ce=zp(Wn);X.forEach(Me=>{ce.set(Jr(Wn,"users",s.uid,"events",Me.id),Me)}),await ce.commit()}await od(X)}catch(ce){console.error(" Storage Failed:",ce)}},Ht=async()=>{const be={id:M?.id||Math.random().toString(36).substr(2,9),name:ue||"New Event",notes:Ve,type:Ye,jAbs:M?.jAbs??(M?Te.absJd(M.jYear,M.jMonth,M.jDay):z.Abs),jYear:M?.jYear??z.Year,jMonth:M?.jMonth??z.Month,jDay:M?.jDay??z.Day,sDate:M?.sDate??z.getDate().toISOString(),backColor:Dt,textColor:wi,remindDayOf:Ii,remindDayBefore:or};if(M){const ce=R.map(Me=>Me.id===M.id?be:Me);await _a(ce,be)}else{const ce=[...R,be];await _a(ce,be)}Ee(!1),Fn()},Fn=()=>{ye(""),Ne(""),Lt(He.HebrewDateRecurringYearly),Oa("#fde047"),Wa("#1e293b"),Un(!1),Va(!1),Z(null)},Yn=async X=>{const be=R.filter(ce=>ce.id!==X);if(xe(be),s)try{await D8(Jr(Wn,"users",s.uid,"events",X)),console.log(` Event deleted from Cloud: ${X}`)}catch(ce){console.error(" Cloud Delete Failed:",ce)}else{const ce=R.filter(Me=>Me.id!==X);await _a(ce)}return Ee(!1),Z(null),Fn(),!0},zn=(X,be)=>{C(be),Z(X),ye(X.name),Ne(X.notes),Lt(X.type),Oa(X.backColor||"#7dd3fc"),Wa(X.textColor||"#ffffff"),Un(X.remindDayOf||!1),Va(X.remindDayBefore||!1),Ee(!0)},Eo=(X,be)=>{X.stopPropagation(),C(be),Fn(),Ee(!0)},Ao=()=>{tn(!1),hr(null)},va=(X,be,ce,Me)=>{if(ce>=12&&X>=12){const Se=Te.isJdLeapY(be),qe=Te.isJdLeapY(Me);if(Se!==qe)return Se&&ce===12||qe&&X===12&&ce===13}return X===ce},ba=X=>{const be=X.getDate();return R.filter(ce=>{if(ce.type===He.OneTime)return ce.jAbs===X.Abs||ce.jDay===X.Day&&ce.jMonth===X.Month&&ce.jYear===X.Year;if((ce.jAbs||Te.absJd(ce.jYear,ce.jMonth,ce.jDay))>X.Abs)return!1;switch(ce.type){case He.HebrewDateRecurringYearly:return ce.jDay===X.Day&&va(ce.jMonth,ce.jYear,X.Month,X.Year);case He.HebrewDateRecurringMonthly:return ce.jDay===X.Day;case He.SecularDateRecurringYearly:{const Se=new Date(ce.sDate);return Se.getDate()===be.getDate()&&Se.getMonth()===be.getMonth()}case He.SecularDateRecurringMonthly:return new Date(ce.sDate).getDate()===be.getDate();default:return!1}})},Ss=_e.useMemo(()=>ba(z),[z,R]),{todayReminders:aa,tomorrowReminders:La}=_e.useMemo(()=>{const X=S==="sunset"?pe.nowAtLocation(he):new Te,be=X.addDays(1),ce=ba(X).filter(Se=>Se.remindDayOf),Me=ba(be).filter(Se=>Se.remindDayBefore);return{todayReminders:ce,tomorrowReminders:Me}},[R,S,he]);_e.useEffect(()=>{if(!We)return;const X=localStorage.getItem("luach-reminders-dismissed"),be=new Date().toDateString();X!==be&&(aa.length>0||La.length>0)?Kt(!0):(X===be||aa.length===0&&La.length===0)&&Kt(!1)},[We,aa,La]),_e.useEffect(()=>{const X=be=>{be.ctrlKey&&be.shiftKey&&be.key==="R"&&(be.preventDefault(),localStorage.removeItem("luach-reminders-dismissed"),Kt(!0))};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[]);const Ts=()=>{const X=new Date().toDateString();localStorage.setItem("luach-reminders-dismissed",X),Kt(!1)},zi=_e.useMemo(()=>{let X,be;if(W==="jewish"){const ht=A.Year,Jt=A.Month;X=new Te(ht,Jt,1),be=new Te(ht,Jt,Te.daysJMonth(ht,Jt))}else{const ht=A.getDate(),Jt=new Date(ht.getFullYear(),ht.getMonth(),1),Ri=new Date(ht.getFullYear(),ht.getMonth()+1,0);X=new Te(Jt),be=new Te(Ri)}const ce=X.getDayOfWeek(),Me=X.addDays(-ce),Se=be.getDayOfWeek(),qe=Se===6?0:6-Se,gt=be.addDays(qe).Abs-Me.Abs+1,jt=Math.ceil(gt/7),Tt=[],rt=jt*7;for(let ht=0;ht<rt;ht++)Tt.push(Me.addDays(ht));return{days:Tt,weeksNeeded:jt,year:X.Year,month:X.Month}},[A,W]),Ba=_e.useMemo(()=>{if(W==="jewish"){const X=A.addDays(-(A.Day-1)).getDate(),be=A.addDays(Te.daysJMonth(A.Year,A.Month)-A.Day).getDate(),ce=i==="he"?"he-IL":"en-US",Me=X.toLocaleDateString(ce,{month:"long"}),Se=X.getFullYear(),qe=be.toLocaleDateString(ce,{month:"long"}),ot=be.getFullYear();return Se===ot?Me===qe?`${Me} ${Se}`:`${Me} - ${qe} ${Se}`:`${Me} ${Se} - ${qe} ${ot}`}else{const X=A.getDate(),be=new Date(X.getFullYear(),X.getMonth(),1),ce=new Date(X.getFullYear(),X.getMonth()+1,0),Me=new Te(be),Se=new Te(ce),qe=i==="he"?bc[Me.Month]:Dl[Me.Month],ot=i==="he"?bc[Se.Month]:Dl[Se.Month],gt=Me.Year,jt=Se.Year;return gt===jt?qe===ot?`${qe} ${gt}`:`${qe} - ${ot} ${gt}`:`${qe} ${gt} - ${ot} ${jt}`}},[A,i,W]),wo=_e.useMemo(()=>kp.getAllZmanim(z,he),[z,he]),Vn=_e.useMemo(()=>MS(z,{hour:10,minute:0},he,i==="en"),[z,he,i]);_e.useMemo(()=>({...Vn}),[Vn]);const Pn=X=>{const ce=Ss.some(Se=>Se.type===He.HebrewDateRecurringYearly||Se.type===He.HebrewDateRecurringMonthly)||W==="jewish";let Me;if(ce)Me=z.addMonths(X);else{const Se=z.getDate(),qe=new Date(Se.getFullYear(),Se.getMonth()+X,Se.getDate());qe.getMonth()!==(Se.getMonth()+X+12)%12&&qe.setDate(0),Me=new Te(qe)}I(Me),C(Me)},Ft=X=>{C(X),(window.innerWidth<=1200||Q==="hidden")&&tn(!0)},Qt=X=>{const ce=Ss.some(Se=>Se.type===He.HebrewDateRecurringYearly||Se.type===He.HebrewDateRecurringMonthly)||W==="jewish";let Me;if(ce)Me=z.addYears(X);else{const Se=z.getDate(),qe=new Date(Se.getFullYear()+X,Se.getMonth(),Se.getDate());qe.getMonth()!==Se.getMonth()&&qe.setDate(0),Me=new Te(qe)}I(Me),C(Me)},Sa=()=>{const X=new Date(ei);if(!isNaN(X.getTime())){const be=new Te(X);xt?(C(be),Bt(!1)):(I(be),C(be)),ya(!1)}},dr=()=>{try{const X=new Te(vs,To,cr);xt?(C(X),Bt(!1)):(I(X),C(X)),ya(!1)}catch{alert("Invalid Jewish Date")}},uu=X=>{I(X),C(X),lr(!1)};Il.useEffect(()=>{const X=be=>{if(je||Di||["INPUT","TEXTAREA","SELECT"].includes(document.activeElement?.tagName||""))return;let ce=null;switch(be.key.toLowerCase()){case"arrowleft":ce=z.addDays(i==="he"?1:-1);break;case"arrowright":ce=z.addDays(i==="he"?-1:1);break;case"arrowup":ce=z.addDays(-7);break;case"arrowdown":ce=z.addDays(7);break;case"t":{const Me=S==="sunset"?pe.nowAtLocation(he):new Te;C(Me),I(Me);return}default:return}ce&&(be.preventDefault(),C(ce),(ce.Month!==A.Month||ce.Year!==A.Year)&&I(ce))};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[z,A,je,Di,i]);const Io=_e.useMemo(()=>{if(W==="jewish")return i==="he"?bc[A.Month]:Dl[A.Month];{const X=i==="he"?"he-IL":"en-US";return A.getDate().toLocaleDateString(X,{month:"long"})}},[A,W,i]),Do=_e.useMemo(()=>W==="jewish"?i==="he"?pe.toJewishNumber(A.Year):A.Year.toString():A.getDate().getFullYear().toString(),[A,W,i]);return T.jsxs("div",{className:"app-container",children:[T.jsx(a5,{lang:i,textInLanguage:c,currentMonthName:Io,currentYearName:Do,secondaryDateRange:Ba,navigateMonth:Pn,navigateYear:Qt,handleGoToToday:na,setIsJumpModalOpen:ya,setIsEventsListOpen:lr,onSettingsOpen:()=>kt(!0),theme:t,setTheme:a,calendarView:W,setCalendarView:le}),ys&&(aa.length>0||La.length>0)&&T.jsx(f5,{isOpen:ys,todayEvents:aa,tomorrowEvents:La,lang:i,onDismiss:Ts,onEventClick:zn}),T.jsxs("div",{className:"main-layout",children:[T.jsx(t5,{lang:i,textInLanguage:c,selectedJDate:z,selectedEvents:Ss,selectedNotes:Vn,selectedZmanim:wo,location:he,handleEditEvent:zn,deleteEvent:Yn,handleAddNewEventForDate:Eo,isMobileOpen:ta,onMobileClose:Ao,isDesktopHidden:Q==="hidden",onToggleDesktopMode:()=>fe("hidden")}),T.jsx(r5,{lang:i,textInLanguage:c,currentJDate:A,monthInfo:zi,selectedJDate:z,location:he,events:R,setSelectedJDate:Ft,handleAddNewEventForDate:Eo,handleEditEvent:zn,getEventsForDate:ba,navigateMonth:Pn,today:ne,calendarView:W,theme:t})]}),T.jsx(i5,{lang:i,textInLanguage:c,navigateMonth:Pn,navigateYear:Qt,handleGoToToday:na,setIsJumpModalOpen:ya,setIsEventsListOpen:lr,theme:t,setTheme:a,calendarView:W,setCalendarView:le}),T.jsx(n5,{lang:i,setLang:e,theme:t,setTheme:a,textInLanguage:c,locationName:p,setLocationName:v,isOpen:Hn,onClose:()=>kt(!1),onLogout:m,user:s,onLogin:d,todayStartMode:S,setTodayStartMode:D,emailEnabled:k,setEmailEnabled:H,browserNotificationsEnabled:q,setBrowserNotificationsEnabled:$,calendarView:W,setCalendarView:le,desktopSidebarMode:Q,setDesktopSidebarMode:fe}),T.jsx(s5,{isOpen:je,onClose:()=>Ee(!1),editingEvent:M,textInLanguage:c,lang:i,selectedJDate:z,formName:ue,setFormName:ye,formNotes:Ve,setFormNotes:Ne,formType:Ye,setFormType:Lt,formColor:Dt,setFormColor:Oa,formTextColor:wi,setFormTextColor:Wa,formRemindDayOf:Ii,setFormRemindDayOf:Un,formRemindDayBefore:or,setFormRemindDayBefore:Va,onSave:Ht,onDelete:Yn,onChangeDate:()=>{ur(z.getDate().toISOString().split("T")[0]),Pa(z.Day),_s(z.Month),bs(z.Year),Bt(!0),ya(!0)}}),T.jsx(o5,{isOpen:Di,onClose:()=>ya(!1),textInLanguage:c,lang:i,jumpGregDate:ei,setJumpGregDate:ur,jumpJDay:cr,setJumpJDay:Pa,jumpJMonth:To,setJumpJMonth:_s,jumpJYear:vs,setJumpJYear:bs,handleJumpToGregorian:Sa,handleJumpToJewish:dr,mode:xt?"change":"jump"}),T.jsx(h5,{isOpen:Za,onClose:()=>lr(!1),events:R,lang:i,textInLanguage:c,handleEditEvent:zn,deleteEvent:Yn,saveEvents:_a,navigateToDate:uu})]})};K4.createRoot(document.getElementById("root")).render(T.jsx(Il.StrictMode,{children:T.jsx(GC,{})}));export{uo as C,$c as E,ir as F,A1 as L,xl as _,I1 as a,KC as b,XS as c,fn as d,lo as e,QC as f,FI as g,C5 as i,oI as o,is as r,x5 as v};
